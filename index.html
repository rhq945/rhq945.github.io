<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-形式语言与自动机实验（二）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/12/%E5%BD%A2%E5%BC%8F%E8%AF%AD%E8%A8%80%E4%B8%8E%E8%87%AA%E5%8A%A8%E6%9C%BA%E5%AE%9E%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2021-06-12T05:59:19.091Z" itemprop="datePublished">2021-06-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="实验二-设计上下文无关文法的变换算法"><a href="#实验二-设计上下文无关文法的变换算法" class="headerlink" title="实验二: 设计上下文无关文法的变换算法"></a>实验二: 设计上下文无关文法的变换算法</h1><h2 id="1-1实验目的"><a href="#1-1实验目的" class="headerlink" title="1.1实验目的"></a>1.1实验目的</h2><p>编程实现上下文无关文法的变换算法，用于消除文法中的ε产生式、单产生式、以及无用符号。 </p>
<h2 id="1-2-实验内容及要求"><a href="#1-2-实验内容及要求" class="headerlink" title="1.2 实验内容及要求"></a>1.2 实验内容及要求</h2><p>上下文无关文法对产生式的右部没有限制，这种完全自由的形式有时会对文法分析带来不良影响，而对文法的某些限制形式在应用中更方便。通过上下文无关文法的变换，在不改变文法的语言生成能力的前提下，可以消除文法中的ε产生式、单产生式、以及无用符号。<br>要求编程实现消除上下文无关文法中的ε产生式、单产生式、以及无用符号的算法。输入是一个上下文无关文法，输出是与该文法等价的没有ε产生式、单产生式、无用符号的上下文无关文法。<br>至少使用如下文法中的产生式进行程序的正确性验证。<br>S→a|bA|B|ccD<br>A→abB|&amp;<br>B→aA<br>C→ddC<br>D→ddd</p>
<h2 id="1-3-小组成员及分工"><a href="#1-3-小组成员及分工" class="headerlink" title="1.3. 小组成员及分工"></a>1.3. 小组成员及分工</h2><p>2019211309班          2019211403号       刘明哲           负责删除ε生成式和消除单产生式的代码，整合代码</p>
<p>2019211309班          2019211404号       戎惠强           负责程序的输入输出和删除无用符号的代码，负责文档部分</p>
<p>2019211309班          2019211409号       崔光程           负责测试</p>
<h2 id="1-4实验环境描述和所使用的语言"><a href="#1-4实验环境描述和所使用的语言" class="headerlink" title="1.4实验环境描述和所使用的语言"></a>1.4实验环境描述和所使用的语言</h2><p>实验环境：Visual Studio 2017</p>
<p>使用语言：C语言</p>
<h2 id="1-5程序的设计思路及核心算法"><a href="#1-5程序的设计思路及核心算法" class="headerlink" title="1.5程序的设计思路及核心算法"></a>1.5程序的设计思路及核心算法</h2><h3 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">linkNode</span> &#123;</span></span><br><span class="line">	<span class="keyword">char</span> *str;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">linkNode</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;Node;<span class="comment">//每个非终结符的产生式使用链表存放</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">grammer</span> &#123;</span></span><br><span class="line">	<span class="keyword">char</span> *N;</span><br><span class="line">	<span class="keyword">char</span> *T;</span><br><span class="line">	<span class="keyword">int</span> numN;</span><br><span class="line">	<span class="keyword">int</span> numT;</span><br><span class="line">	Node **delta;</span><br><span class="line">&#125;Grammer;<span class="comment">//文法使用结构体存放</span></span><br></pre></td></tr></table></figure>
<h3 id="模块划分"><a href="#模块划分" class="headerlink" title="模块划分"></a>模块划分</h3><p>分为四个模块：</p>
<p>输入输出：<code>Interface</code></p>
<p>删除无用符号：<code>Del_useless</code></p>
<p>删除ε生成式<code>removeE</code></p>
<p>消除单产生式<code>rmSingleGrammer</code></p>
<h3 id="模块调用"><a href="#模块调用" class="headerlink" title="模块调用"></a>模块调用</h3><img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\1.png" alt="1" style="zoom: 40%;" />

<h3 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h3><h4 id="Interface模块"><a href="#Interface模块" class="headerlink" title="Interface模块"></a><code>Interface</code>模块</h4><h5 id="函数说明及调用"><a href="#函数说明及调用" class="headerlink" title="函数说明及调用"></a>函数说明及调用</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Grammer * <span class="title">Input</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    <span class="comment">//在命令行界面生成用户输入界面</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Put_out</span><span class="params">(Grammer *g)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//将文法按照一定格式输出</span></span></span><br></pre></td></tr></table></figure>


<h4 id="Del-useless模块"><a href="#Del-useless模块" class="headerlink" title="Del_useless模块"></a><code>Del_useless</code>模块</h4><h5 id="函数说明及调用-1"><a href="#函数说明及调用-1" class="headerlink" title="函数说明及调用"></a>函数说明及调用</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> *<span class="title">JudgeA</span><span class="params">(<span class="keyword">bool</span> *b, <span class="keyword">int</span> numN, Node **n, <span class="keyword">char</span> *ch, <span class="keyword">int</span> times)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//BOOL数组，用来寻找生成符号</span></span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> *<span class="title">JudgeB</span><span class="params">(<span class="keyword">bool</span> *b, <span class="keyword">int</span> numN, Node **n, <span class="keyword">char</span> *ch)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//BOOL数组，用来寻找可达符号</span></span></span><br><span class="line"><span class="function">Node*<span class="title">New_node</span><span class="params">(Node *n, <span class="keyword">bool</span>*b, <span class="keyword">char</span>*ch, <span class="keyword">int</span> numN)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//产生某个非终结符的新产生式集合</span></span></span><br><span class="line"><span class="function">Grammer *<span class="title">Change</span><span class="params">(Grammer *g, <span class="keyword">bool</span> *b)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//将文法改变为BOOL数组里为TRUE集合的文法</span></span></span><br><span class="line"><span class="function"> Grammer * <span class="title">Useful_grammer</span><span class="params">(Grammer * g)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//对前面所有函数的封装，得到删除无用符号以后的文法</span></span></span><br></pre></td></tr></table></figure>
<img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\2.png" alt="2" style="zoom:40%;" />

<h5 id="算法思想"><a href="#算法思想" class="headerlink" title="算法思想"></a>算法思想</h5><p>​    使用两个BOOL数组来判断原文法的非终结符是否为生成符号和可达符号。其中定义寻找生成符号的BOOL数组时，由于每更新一位非终结符的BOOL值，都可能造成其他非终结符BOOL值的改变，所以使用递归算法来保证结果正确。得到BOOL数组之后即可根据其将文法产生规则中涉及无用符的产生式进行删除。</p>
<h4 id="removeE模块"><a href="#removeE模块" class="headerlink" title="removeE模块"></a><code>removeE</code>模块</h4><h5 id="函数说明及调用-2"><a href="#函数说明及调用-2" class="headerlink" title="函数说明及调用"></a>函数说明及调用</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findInN</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *N, <span class="keyword">char</span> c)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//查找字符数组N中是否有字符c并返回c在N中的位置</span></span></span><br><span class="line"><span class="function">Node * <span class="title">newGeneration</span><span class="params">(Node *lastestNode, <span class="keyword">char</span> *str, <span class="keyword">bool</span> *generateE, <span class="keyword">int</span> loc, <span class="keyword">char</span> *N)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//递归函数消除产生式中的ε</span></span></span><br><span class="line"><span class="function">Grammer * <span class="title">removeE</span><span class="params">(Grammer * g)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//得到删除ε生成式以后的文法</span></span></span><br></pre></td></tr></table></figure>
<p>​                                                                            <img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\4.png" alt="3" style="zoom:40%;" /></p>
<h5 id="算法思想-1"><a href="#算法思想-1" class="headerlink" title="算法思想"></a>算法思想</h5><p>​    <code>removeE</code>消去ε需要搜索算法。</p>
<p>​    这里采用递归的方式,递归的函数是<code>newGeneration</code>，该函数接受一个生成式节点地址，一个字符串（生成式），一个标记位数组（用于标记非终结符能否生成ε，一个位置，每个函数会调用两个该函数，一个是将字符串中非终结符替换为ε的生成式的，还有一个是不做任何处理的，这两个函数都将位置向后移一位)。当该函数接收到的位置为结束时，结束递归并返回。</p>
<p>​    对于S生成ε的处理，进行特殊判断，如果可以产生，将delta中的所有函数的位置后移，首位添加S。最后释放原文法g空间。 </p>
<h4 id="rmSingleGrammer模块"><a href="#rmSingleGrammer模块" class="headerlink" title="rmSingleGrammer模块"></a><code>rmSingleGrammer</code>模块</h4><h5 id="函数说明及调用-3"><a href="#函数说明及调用-3" class="headerlink" title="函数说明及调用"></a>函数说明及调用</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Grammer * <span class="title">rmSingelGenerate</span><span class="params">(Grammer * g)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//得到删除单产生式以后的文法</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addSg</span><span class="params">(Grammer * g, <span class="keyword">int</span> loc, <span class="keyword">bool</span> * sg)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//得到需要添加初始非终结符的标记位置</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findInD</span><span class="params">(Node * n, <span class="keyword">char</span> * str)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findInN</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *N, <span class="keyword">char</span> c)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//查找字符数组N中是否有字符c并返回c在N中的位置</span></span></span><br></pre></td></tr></table></figure>
<img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\3.png" alt="3" style="zoom:40%;" />

<h5 id="算法思想-2"><a href="#算法思想-2" class="headerlink" title="算法思想"></a>算法思想</h5><p>​    <code>rmSingleGenarate</code>由于需要对每一个单产生式查找它的单产生式，所以依然采用递归的方式.</p>
<p>​    先处理查找所有的单产生式，设置标记数组，对其进行标记，由于可能会产生循环产生的可能，比如S-&gt;A A-&gt;B B-&gt;S所以需要进行判断，对每一个标记数组是否已经标记过进行判断，并且将单生成式的初始非终结符（上述例中S）也添加到标记中。拥有标记后，对该非终结符的单生成式进行替换。（先添加非单产生式，再删除单产生式)。</p>
<h3 id="1-6-程序的输入格式，输出格式。"><a href="#1-6-程序的输入格式，输出格式。" class="headerlink" title="1.6 程序的输入格式，输出格式。"></a>1.6 程序的输入格式，输出格式。</h3><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p> 例如原有文法为 ( {S,A,B,C,D}，{0,1}，{S–&gt;01|1，A–&gt;0，B–&gt;10，C–&gt;01，D–&gt;110}，S )</p>
<p>若为命令行输入，则按照提示进行操作。</p>
<p>若预先在文件中写入，则需按以下格式进行输入（每一行最前方无空格，第二第四行字符间可以有空格）：</p>
<p>​     4<br>​     ABCD<br>​     2<br>​     01<br>​     2<br>​     01<br>​     1<br>​     1<br>​     0<br>​     1<br>​     10<br>​     1<br>​     01<br>​     1<br>​     110</p>
<h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>​     以下是简化以后的CFG：<br>​     CFG M={N,T,P,S},其中<br>​     N={ S }<br>​     T={ 0 1 }<br>​     生成式P如下:<br>​     S–&gt;01|1</p>
<h3 id="1-7-程序的测试用例，输入，输出，以及执行效果（可截图）"><a href="#1-7-程序的测试用例，输入，输出，以及执行效果（可截图）" class="headerlink" title="1.7 程序的测试用例，输入，输出，以及执行效果（可截图）"></a>1.7 程序的测试用例，输入，输出，以及执行效果（可截图）</h3><h4 id="测试用例1："><a href="#测试用例1：" class="headerlink" title="测试用例1："></a>测试用例1：</h4><p>N：{S A B C D}</p>
<p>T：{a b c d}</p>
<p>P：S→a|bA|B|ccD<br>      A→abB|&amp;<br>       B→aA<br>      C→ddC<br>      D→ddd    </p>
<p>输入：</p>
<img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\5.png" alt="5" style="zoom:50%;" />

<p>输出：</p>
<img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\6.png" alt="6" style="zoom: 50%;" />

<h4 id="测试用例2："><a href="#测试用例2：" class="headerlink" title="测试用例2："></a>测试用例2：</h4><p>N：{S A B}</p>
<p>T：{( ) + * a}</p>
<p>P：S→S+A|A<br>      A→A*B|B<br>       B→(S)|a</p>
<p>输入：</p>
<img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\7.png" alt="7" style="zoom:50%;" />

<p>输出：</p>
<img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\8.png" alt="8" style="zoom:50%;" />

<h4 id="测试用例3："><a href="#测试用例3：" class="headerlink" title="测试用例3："></a>测试用例3：</h4><p>N：{S  A  B   C  D  E}</p>
<p>T：{ a b d }</p>
<p>P： S→A|B<br>       A→C|D<br>        B→D|E<br>       C→S|b|&amp;<br>        D→a|S<br>       E→S|d|&amp;</p>
<p>输入：</p>
<img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\9.png" alt="9" style="zoom:50%;" />

<p>输出：</p>
<img src="D:\2019级学习文件\大学课件\大二下\形式语言自动机\第二次实验\10.png" alt="10" style="zoom:50%;" />




      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/12/%E5%BD%A2%E5%BC%8F%E8%AF%AD%E8%A8%80%E4%B8%8E%E8%87%AA%E5%8A%A8%E6%9C%BA%E5%AE%9E%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89/" data-id="ckq2c2d530000lsv09hbfcbdh" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-JAVA" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/07/JAVA/" class="article-date">
  <time class="dt-published" datetime="2021-06-07T12:16:33.453Z" itemprop="datePublished">2021-06-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <table>
        <tr>
        <th colspan = "6"> <div align='center' ><font size='6'>北京邮电大学课程设计报告</font></div>
</th>
        </tr>
    <tr>
        <th> 课程设计名称</th>
        <th> 面向对象程序设计实践课（Java）</th>
        <th> 学 院 </th>
        <th> 计算机 </th>
        <th> 指导教师 </th>
        <th> 吴起凡 </th>
        </tr>
    <tr>
        <th> 班级</th>
        <th> 班内序号</th>
        <th>学号</th>
        <th>学生姓名</th>
        <th colspan = "2">成绩</th>
    </tr>
        <td> 2019211309 </td>
        <td> 14 </td >
        <td> 2019211408 </td >
        <td> 李康童 </td >
        <th colspan = "2"></th>
    </tr>
        <td> 2019211309 </td>
        <td> 21 </td >
        <td> 2019211415 </td >
        <td> 李俊辉 </td >
        <th colspan = "2"></th>
    </tr>
        <td> 2019211309 </td>
        <td> 10 </td >
        <td> 2019211404 </td >
        <td> 戎惠强 </td >
        <th colspan = "2"></th>
    </tr>
        <td> 2019211309 </td>
        <td> 5 </td >
        <td> 2019211399 </td >
        <td> 王世泽 </td >
        <th colspan = "2"></th>
    </tr>
        <th> 课程设计内容 </th>
        <td colspan = "5">简要介绍课程设计的主要内容，包括课程设计教学目的、  基本内容、实验方法和团队分工等  <br/>一、设计任务基本内容：<br/>    校园中有众多的建筑物和道路，且学校有多个校区（至少2个）；某位同学于某一时刻向系统提出导航要求，系统根据该同学的要求为其设计一条线路并输出；系统能查询当前时刻同学所处的地点和周围的教学楼、宿舍楼、餐饮、后勤服务、操场等信息。  <br/>二、实验方法：<br/>使用Qt搭建前端，使用C++创建后端，两者整合，得到导航的图形界面<br/>三、团队分工：<br/>李康童负责后端算法，戎惠强负责编写文档和日志部分，两人共同负责前端的构建</td> </td >
    </tr>
        <th> 课程设计成绩判定 </th>
        <th colspan = "5">评语: <br/>成绩：<br/>指导教师签名：      <br/>年    月     日</th>
    </tr>
</table>




<h5 id="注：评语要体现每个学生的工作情况，可以加页。"><a href="#注：评语要体现每个学生的工作情况，可以加页。" class="headerlink" title="注：评语要体现每个学生的工作情况，可以加页。"></a>注：评语要体现每个学生的工作情况，可以加页。</h5><h3 id=""><a href="#" class="headerlink" title=""></a><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></h3><h3 id="编写环境："><a href="#编写环境：" class="headerlink" title="编写环境："></a>编写环境：</h3><h4 id="软件环境："><a href="#软件环境：" class="headerlink" title="软件环境："></a>软件环境：</h4><p>Eclipse软件</p>
<h4 id="硬件环境："><a href="#硬件环境：" class="headerlink" title="硬件环境："></a>硬件环境：</h4><p>搭载了微软Windows10操作系统的笔记本电脑；</p>
<h2 id="一、面向对象分析OOA"><a href="#一、面向对象分析OOA" class="headerlink" title="一、面向对象分析OOA"></a>一、面向对象分析OOA</h2><h3 id="功能模型："><a href="#功能模型：" class="headerlink" title="功能模型："></a>功能模型：</h3><h4 id="1、用例图"><a href="#1、用例图" class="headerlink" title="1、用例图"></a>1、用例图</h4><h4 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="C:\Users\14372\Desktop\6.png" alt="6" style="zoom:50%;" /></h4><h4 id="2、场景描述"><a href="#2、场景描述" class="headerlink" title="2、场景描述"></a>2、场景描述</h4><p>用户运行程序，在用户界面可以使用计算功能，需要进行下一组计算时可以使用清除功能，需要暂时保存某个数据时使用保存功能</p>
<h3 id="动态模型："><a href="#动态模型：" class="headerlink" title="动态模型："></a>动态模型：</h3><h3 id="-2"><a href="#-2" class="headerlink" title=""></a><img src="D:\2019级学习文件\大学课件\大二下\JAVA\photo\2.png" alt="2" style="zoom:50%;" /></h3><h3 id="对象模型："><a href="#对象模型：" class="headerlink" title="对象模型："></a>对象模型：</h3><p>总共需要三个类，分别是计算数据的算法，计算数据和计算符号的匹配，图形化界面</p>
<h5 id="其对象模型如下："><a href="#其对象模型如下：" class="headerlink" title="其对象模型如下："></a>其对象模型如下：</h5><h5 id="-3"><a href="#-3" class="headerlink" title=""></a><img src="D:\2019级学习文件\大学课件\大二下\JAVA\photo\3.png" alt="3" style="zoom:50%;" /></h5><h2 id="二、面向对象设计OOD"><a href="#二、面向对象设计OOD" class="headerlink" title="二、面向对象设计OOD"></a>二、面向对象设计OOD</h2><h3 id="对象模型：-1"><a href="#对象模型：-1" class="headerlink" title="对象模型："></a>对象模型：</h3><h3 id="-4"><a href="#-4" class="headerlink" title=""></a><img src="C:\Users\14372\Desktop\5.png" alt="5" style="zoom:67%;" /></h3><h5 id="其中调用关系："><a href="#其中调用关系：" class="headerlink" title="其中调用关系："></a>其中调用关系：</h5><h4 id="-5"><a href="#-5" class="headerlink" title=""></a><img src="D:\2019级学习文件\大学课件\大二下\JAVA\photo\5.png" alt="5" style="zoom:50%;" /></h4><p>用例一：<br>用例名：计算功能<br>简要说明：用户通过图形化界面输入数据和运算符，回车调用计算功能<br>前提条件：无<br>主事件流：<br>（1）    用户运行程序，在界面内输入数据和运算符，回车后用例开始<br>（2）    系统得出运算结果，输出到界面<br>（3）    用户继续输入下一轮运算数据和运算符<br>A1：输入数据非法 如：7/0<br>A2：输入格式错误 如：(7+2))<br>（4）    用例结束<br>其它事件流：<br>A1: 输入数据非法 如7/0<br>（1）    系统输出Infinity<br>（2）    用户重新输入数据进行下一轮运算<br>A2：输入格式错误 如：(7+2))<br>（1）    系统输出上一轮运算数据<br>（2）    用户重新输入数据进行下一轮运算</p>
<p>用例二：<br>用例名：保存功能<br>简要说明：用户通过图形化界面可以直接调用数据保存功能<br>前提条件：无<br>主事件流：<br>（1）    用户运行程序，按下MS储存当前显示的值<br>A1：当前显示框没有值的情况下MS<br>（2）    系统储存值用以进行运算<br>（3）    用户使用MR、M+、MC等对系统存储的值进行显示、运算、清除等功能<br>A2：当前显示框没有值的情况下MR、M+、MC<br>（4）    用例结束<br>其它事件流：<br>A1：当前显示框没有值的情况下MS<br>（1）    保存0进系统的存储区<br>（2）    用户继续进行其它操作<br>A2：当前显示框没有值的情况下MR、M+、MC<br>（1）    用0进行相关的操作<br>（2）    用户继续进行其它操作</p>
<h2 id="三、面向对象测试OOP"><a href="#三、面向对象测试OOP" class="headerlink" title="三、面向对象测试OOP"></a>三、面向对象测试OOP</h2><h3 id="1、-类测试"><a href="#1、-类测试" class="headerlink" title="1、  类测试"></a><strong>1、</strong>  <strong>类测试</strong></h3><h4 id="-6"><a href="#-6" class="headerlink" title=""></a></h4><p>根据类的集成关系、组装关系以及类簇包含关系构造的层次结构决定了测试的顺序：</p>
<h5 id="high-precision类："><a href="#high-precision类：" class="headerlink" title="high_precision类："></a>high_precision类：</h5><p><code>add(String stra,String strb)</code>测试</p>
<p>输入：用户输入两个字符串0.3，0.4</p>
<p>方法调用序列：Integer.parseInt，Strb.length()，String.charAt，String.substring。</p>
<p>预期输出：返回0.7，表示计算成功。</p>
<p><code>sub(String stra,String strb)</code>测试</p>
<p>输入：用户输入两个字符串0.4，0.3</p>
<p>方法调用序列：Integer.parseInt，Strb.length()，String.charAt，String.substring。</p>
<p>预期输出：返回0.1，表示计算成功。</p>
<p><code>div(String stra,String strb)</code>测试</p>
<p>输入：用户输入两个字符串0.8，0.4</p>
<p>方法调用序列：Double.valueOf(String)。</p>
<p>预期输出：返回2，表示计算成功。</p>
<p><code>pow(String stra,String strb)</code>测试</p>
<p>输入：用户输入字符串4</p>
<p>方法调用序列：Integer.parseInt，Strb.length()，String.charAt，String.substring。</p>
<p>预期输出：返回16，表示计算成功。</p>
<p><code>log(String stra)</code>测试输入：用户输入字符串100</p>
<p>方法调用序列：String.toString，Math.log。</p>
<p>预期输出：返回2，表示计算成功。</p>
<p>其他功能均测试正常 </p>
<h5 id="resolver类："><a href="#resolver类：" class="headerlink" title="resolver类："></a>resolver类：</h5><p><code>getResult()</code>测试输入：用户输入字符串(5+3)*10</p>
<p>方法调用序列：String.push()，String.matches()， String.equals()，String.pop()，Pattern.compile， Matcher.find，Math.log。</p>
<p>预期输出：返回150，表示计算成功。</p>
<p><code>ms_ax(double x)</code>测试输入：用户输入任意字符串</p>
<p>预期输出:字符串本身</p>
<p><code>mc_ax(double x)</code>测试输入：用户输入任意字符串</p>
<p>预期输出:0.0</p>
<h3 id="2、系统测试"><a href="#2、系统测试" class="headerlink" title="2、系统测试"></a>2、系统测试</h3><p>以用户需求为测试标准</p>
<img src="C:\Users\14372\Desktop\7.png" alt="7" style="zoom:30%;" />

<p>测试用例：<img src="C:\Users\14372\Desktop\8.png" alt="8" style="zoom:33%;" />  </p>
<p>得到结果：<img src="C:\Users\14372\Desktop\9.png" alt="9" style="zoom:33%;" /></p>
<h2 id="四、源代码"><a href="#四、源代码" class="headerlink" title="四、源代码"></a>四、源代码</h2><h3 id="high-precision-java"><a href="#high-precision-java" class="headerlink" title="high_precision.java:"></a>high_precision.java:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Project;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">high_precision</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String stra;</span><br><span class="line">	<span class="keyword">public</span> ArrayList list=<span class="keyword">new</span> ArrayList();</span><br><span class="line">	<span class="keyword">public</span> String strb;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> num;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> flag;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">high_precision</span><span class="params">(String stra,String strb,<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.stra = stra;</span><br><span class="line">		<span class="keyword">this</span>.strb = strb;</span><br><span class="line">		<span class="keyword">this</span>.num = num;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">(String stra,String strb)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(stra.indexOf(<span class="string">&quot;.&quot;</span>)==-<span class="number">1</span> &amp;&amp; strb.indexOf(<span class="string">&quot;.&quot;</span>)==-<span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">int</span>[] a=<span class="keyword">new</span> <span class="keyword">int</span>[stra.length()];</span><br><span class="line">			<span class="keyword">int</span>[] b=<span class="keyword">new</span> <span class="keyword">int</span>[strb.length()];</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; stra.length(); i ++)&#123;</span><br><span class="line">				a[a.length-<span class="number">1</span>-i]=(stra.charAt(i)-<span class="number">48</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strb.length(); i ++)&#123;</span><br><span class="line">				b[b.length-<span class="number">1</span>-i]=(strb.charAt(i)-<span class="number">48</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">int</span> maxLen = (a.length &gt; b.length)? a.length : b.length;</span><br><span class="line">			<span class="keyword">int</span> minLen = (a.length &lt; b.length)? a.length : b.length;</span><br><span class="line">			<span class="keyword">int</span>[] c=<span class="keyword">new</span> <span class="keyword">int</span>[maxLen+<span class="number">1</span>];</span><br><span class="line">			<span class="keyword">int</span> r = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; minLen; i ++) &#123;</span><br><span class="line">				<span class="keyword">int</span> temp = a[i] + b[i] + r;</span><br><span class="line">				r = temp / <span class="number">10</span>;</span><br><span class="line">				c[i]=temp % <span class="number">10</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(a.length &gt; b.length) &#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i = b.length; i&lt;maxLen; i ++)&#123;</span><br><span class="line">					<span class="keyword">int</span> temp = a[i] + r;</span><br><span class="line">					r = temp / <span class="number">10</span>;</span><br><span class="line">					c[i] = temp % <span class="number">10</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(a.length &lt; b.length)&#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i = a.length; i &lt; maxLen; i ++)&#123;</span><br><span class="line">					<span class="keyword">int</span> temp = b[i] + r;</span><br><span class="line">					r = temp / <span class="number">10</span>;</span><br><span class="line">					c[i] = temp % <span class="number">10</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(r != <span class="number">0</span>) &#123;</span><br><span class="line">				c[c.length-<span class="number">1</span>] += r;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(c[c.length-<span class="number">1</span>] == <span class="number">0</span>)&#123;</span><br><span class="line">				c = Arrays.copyOfRange(c, <span class="number">0</span>, c.length-<span class="number">1</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		</span><br><span class="line">			<span class="keyword">int</span>[] temp = <span class="keyword">new</span> <span class="keyword">int</span>[c.length];</span><br><span class="line">		</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; c.length; i ++)&#123;</span><br><span class="line">				temp[temp.length-<span class="number">1</span>-i] = c[i];</span><br><span class="line">			&#125;</span><br><span class="line">		</span><br><span class="line">			StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; temp.length; i ++)</span><br><span class="line">			&#123;</span><br><span class="line">				result.append(temp[i]);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> result.toString();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			BigDecimal a = <span class="keyword">new</span> BigDecimal(stra);</span><br><span class="line">			BigDecimal b = <span class="keyword">new</span> BigDecimal(strb);</span><br><span class="line">			BigDecimal c = a.add(b);</span><br><span class="line">			<span class="keyword">return</span> c.toString();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sub</span><span class="params">(String stra,String strb)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(stra.indexOf(<span class="string">&quot;.&quot;</span>)==-<span class="number">1</span> &amp;&amp; strb.indexOf(<span class="string">&quot;.&quot;</span>)==-<span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">int</span> flag;</span><br><span class="line">			<span class="keyword">int</span>[] a=<span class="keyword">new</span> <span class="keyword">int</span>[stra.length()];</span><br><span class="line">			<span class="keyword">int</span>[] b=<span class="keyword">new</span> <span class="keyword">int</span>[strb.length()];</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; stra.length(); i ++)&#123;</span><br><span class="line">				a[a.length-<span class="number">1</span>-i]=(stra.charAt(i) - <span class="number">48</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strb.length(); i ++)&#123;</span><br><span class="line">				b[b.length-<span class="number">1</span>-i]=(strb.charAt(i) - <span class="number">48</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">int</span> maxLen = (a.length &lt; b.length)? b.length : a.length;</span><br><span class="line">			<span class="keyword">int</span> minLen = (a.length &gt; b.length)? b.length : a.length;</span><br><span class="line">			<span class="keyword">int</span>[] c=<span class="keyword">new</span> <span class="keyword">int</span>[maxLen+<span class="number">1</span>];</span><br><span class="line">			<span class="keyword">int</span> r = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">if</span>(a.length &gt; b.length || (a.length == b.length &amp;&amp; a[a.length - <span class="number">1</span>] &gt; b[b.length - <span class="number">1</span>])) &#123;</span><br><span class="line">				flag = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; minLen; i ++) &#123;</span><br><span class="line">					<span class="keyword">int</span> temp = (a[i]+r &lt; b[i])? a[i] + r + <span class="number">10</span> - b[i] : a[i] + r - b[i];</span><br><span class="line">					r = (a[i]+r &lt; b[i])? -<span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">					c[i] = temp;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(a.length &gt; b.length) &#123;</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> i = b.length; i &lt; maxLen; i ++)&#123;</span><br><span class="line">						<span class="keyword">int</span> temp = (a[i] + r &lt; <span class="number">0</span>)? a[i] + r + <span class="number">10</span> : a[i] + r;</span><br><span class="line">						r = (a[i]+r &lt; <span class="number">0</span>)? -<span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">						c[i] = temp;					</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				flag = -<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">int</span> flag2 = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; minLen; i ++) &#123;</span><br><span class="line">					<span class="keyword">int</span> temp = (b[i]+r &lt; a[i])? b[i] + r + <span class="number">10</span> - a[i] : b[i] + r - a[i];</span><br><span class="line">					r = (b[i]+r &lt; a[i])? -<span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">					c[i] = temp;</span><br><span class="line">					<span class="keyword">if</span>(c[i] != <span class="number">0</span> &amp;&amp; flag2 == <span class="number">1</span>)</span><br><span class="line">						flag2 = -<span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				flag = flag2;</span><br><span class="line">				<span class="keyword">if</span>(b.length &gt; a.length) &#123;</span><br><span class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> i = a.length; i &lt; maxLen; i ++)&#123;</span><br><span class="line">						<span class="keyword">int</span> temp = (b[i] + r &lt; <span class="number">0</span>)? b[i] + r + <span class="number">10</span> : b[i] + r;</span><br><span class="line">						r = (b[i]+r &lt; <span class="number">0</span>)? -<span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">						c[i] = temp;					</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(r != <span class="number">0</span>) &#123;</span><br><span class="line">				c[c.length-<span class="number">1</span>] += r;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">int</span> len = c.length;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i ++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(c[len-i-<span class="number">1</span>] == <span class="number">0</span>)&#123;</span><br><span class="line">					c = Arrays.copyOfRange(c, <span class="number">0</span>, len-<span class="number">1</span>-i);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">int</span>[] temp = <span class="keyword">new</span> <span class="keyword">int</span>[c.length];</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; c.length; i ++)&#123;</span><br><span class="line">				temp[temp.length-<span class="number">1</span>-i] = c[i];</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">			<span class="keyword">if</span>(flag == -<span class="number">1</span>) &#123;</span><br><span class="line">				result.append(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; temp.length; i ++)</span><br><span class="line">			&#123;</span><br><span class="line">				result.append(temp[i]);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> result.toString();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			BigDecimal a = <span class="keyword">new</span> BigDecimal(stra);</span><br><span class="line">			BigDecimal b = <span class="keyword">new</span> BigDecimal(strb);</span><br><span class="line">			BigDecimal c = a.subtract(b);</span><br><span class="line">			<span class="keyword">return</span> c.toString();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">mul</span><span class="params">(String stra,String strb)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		BigDecimal a = <span class="keyword">new</span> BigDecimal(stra);</span><br><span class="line">		BigDecimal b = <span class="keyword">new</span> BigDecimal(strb);</span><br><span class="line">		BigDecimal c = a.multiply(b);</span><br><span class="line">		<span class="keyword">return</span> c.toString();</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">div</span><span class="params">(String stra,String strb)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		BigDecimal a = <span class="keyword">new</span> BigDecimal(stra);</span><br><span class="line">		BigDecimal b = <span class="keyword">new</span> BigDecimal(strb);</span><br><span class="line">		BigDecimal c = a.divide(b);</span><br><span class="line">		<span class="keyword">return</span> c.toString();</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">pow</span><span class="params">(String stra,String strb)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (strb.contains(<span class="string">&quot;.&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">int</span> place = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strb.length(); i ++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (strb.charAt(i) == <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                    place = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            strb = strb.substring(<span class="number">0</span>, place);</span><br><span class="line">        &#125;</span><br><span class="line">        n = Integer.parseInt(strb);</span><br><span class="line">        BigDecimal a = <span class="keyword">new</span> BigDecimal(stra);</span><br><span class="line">        a = a.pow(n);</span><br><span class="line">        <span class="keyword">return</span> a.toString();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">log</span><span class="params">(String stra)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">double</span> a = Double.valueOf(stra.toString());</span><br><span class="line">		String result = (Math.log(a) / Math.log(<span class="number">10</span>))+<span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sqr</span><span class="params">(String stra)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">double</span> a = Double.valueOf(stra.toString());</span><br><span class="line"></span><br><span class="line">		String result = Math.sqrt(a)+<span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sin</span><span class="params">(String stra)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">double</span> a = Double.valueOf(stra.toString());</span><br><span class="line">		System.out.println(a);</span><br><span class="line">		String result = Math.sin(a)+<span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">cos</span><span class="params">(String stra)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">double</span> a = Double.valueOf(stra.toString());</span><br><span class="line">		String result = Math.cos(a)+<span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">ave</span><span class="params">(ArrayList list,<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">double</span>[] a = <span class="keyword">new</span> <span class="keyword">double</span> [list.size()];</span><br><span class="line">		<span class="keyword">double</span> total = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;list.size();i++) &#123;</span><br><span class="line">			a[i] = Double.valueOf(list.get(i).toString());</span><br><span class="line">			total += a[i];</span><br><span class="line">		&#125;</span><br><span class="line">		BigDecimal s = <span class="keyword">new</span> BigDecimal(total);</span><br><span class="line">		String strb = num+<span class="string">&quot;&quot;</span>;</span><br><span class="line">		BigDecimal b = <span class="keyword">new</span> BigDecimal(strb);</span><br><span class="line">		BigDecimal c = s.divide(b);</span><br><span class="line">		<span class="keyword">return</span> c.toString();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">max_min</span><span class="params">(ArrayList list,<span class="keyword">int</span> flag)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">double</span>[] a = <span class="keyword">new</span> <span class="keyword">double</span> [list.size()];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;list.size();i++) &#123;</span><br><span class="line">			a[i] = Double.valueOf(list.get(i).toString());</span><br><span class="line">		&#125;</span><br><span class="line">		String result = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">switch</span>(flag) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:&#123;</span><br><span class="line">			Arrays.sort(a);</span><br><span class="line">			result = a[a.length-<span class="number">1</span>]+<span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:&#123;</span><br><span class="line">			Arrays.sort(a);</span><br><span class="line">			</span><br><span class="line">			result = a[<span class="number">0</span>]+<span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;a.length;i++) &#123;</span><br><span class="line">			System.out.println(a[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getstrb</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> strb;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setstrb</span><span class="params">(String b)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.strb = strb;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getstra</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> stra;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setstra</span><span class="params">(String a)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.stra = stra;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">high_precision</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Scanner sc=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		high_precision num = <span class="keyword">new</span> high_precision(sc.nextLine(),sc.nextLine(),sc.nextInt());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="resolver"><a href="#resolver" class="headerlink" title="resolver:"></a>resolver:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Project;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">//import java.math.BigDecimal;</span></span><br><span class="line"><span class="comment">//import java.util.Scanner;</span></span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">resolver</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String expr;</span><br><span class="line">	<span class="keyword">private</span> String sufExpr;</span><br><span class="line">	<span class="keyword">private</span> String result;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> sci_result;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> ax;</span><br><span class="line">    </span><br><span class="line"> 	<span class="function"><span class="keyword">public</span> <span class="title">resolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">cal</span><span class="params">(high_precision a, <span class="keyword">char</span> operator)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (operator) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> a.add(a.stra, a.strb);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;,&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> a.add(a.stra, a.strb);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> a.sub(a.stra, a.strb);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> a.mul(a.stra, a.strb);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> a.div(a.stra, a.strb);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;^&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> a.pow(a.stra, a.strb);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;S&#x27;</span>:</span><br><span class="line">           <span class="keyword">return</span> a.sqr(a.stra);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;l&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> a.log(a.stra);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> a.sin(a.stra);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;c&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> a.cos(a.stra);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">        	<span class="keyword">return</span> a.ave(a.list,a.num);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;E&#x27;</span>:</span><br><span class="line">        	<span class="keyword">return</span> a.mul(a.stra,a.pow(<span class="number">10</span>+<span class="string">&quot;&quot;</span>, a.strb));</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;m&#x27;</span>:</span><br><span class="line">        	<span class="keyword">return</span> a.max_min(a.list,a.flag);</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;illegal operator!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getPriority</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">switch</span>(s) &#123;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;(&quot;</span>:<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;,&quot;</span>:<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:<span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:<span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;^&quot;</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;lg&quot;</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;Sqrt&quot;</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;sin&quot;</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;cos&quot;</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;ave&quot;</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;max&quot;</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;min&quot;</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        	<span class="keyword">case</span> <span class="string">&quot;E&quot;</span>:<span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        	<span class="keyword">default</span>:<span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">exchange</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StringBuffer sufExpr = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        Stack&lt;String&gt; operator = <span class="keyword">new</span> Stack&lt;String&gt;();</span><br><span class="line">        operator.push(<span class="keyword">null</span>);</span><br><span class="line">        Pattern p = Pattern.compile(<span class="string">&quot;(?&lt;!\\d)+?\\d+(\\.\\d+)?|[+\\-*/()^,E]|([s]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)|([c]&#123;1&#125;[o]&#123;1&#125;[s]&#123;1&#125;)|([l]&#123;1&#125;[g]&#123;1&#125;)|([a]&#123;1&#125;[v]&#123;1&#125;[e]&#123;1&#125;)|([S]&#123;1&#125;[q]&#123;1&#125;[r]&#123;1&#125;[t]&#123;1&#125;)|([m]&#123;1&#125;[a]&#123;1&#125;[x]&#123;1&#125;)|([m]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)&quot;</span>);<span class="comment">//正则匹配表达式中的数字或运算符</span></span><br><span class="line">        Matcher m = p.matcher(<span class="keyword">this</span>.expr);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            String temp = m.group();</span><br><span class="line">            <span class="keyword">if</span> (temp.matches(<span class="string">&quot;[+\\-*/()^,E]|([l]&#123;1&#125;[g]&#123;1&#125;)|([s]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)|([c]&#123;1&#125;[o]&#123;1&#125;[s]&#123;1&#125;)|([a]&#123;1&#125;[v]&#123;1&#125;[e]&#123;1&#125;)|([S]&#123;1&#125;[q]&#123;1&#125;[r]&#123;1&#125;[t]&#123;1&#125;)|([m]&#123;1&#125;[a]&#123;1&#125;[x]&#123;1&#125;)|([m]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)&quot;</span>)) &#123;<span class="comment">//当遇到运算符 </span></span><br><span class="line">                <span class="keyword">if</span> (temp.equals(<span class="string">&quot;(&quot;</span>)) &#123; </span><br><span class="line">                    operator.push(temp);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (temp.equals(<span class="string">&quot;)&quot;</span>)) &#123; <span class="comment">//遇到右括号，弹出直到左括号（左括号不弹出）</span></span><br><span class="line">                    String topItem = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">while</span> (!(topItem = operator.pop()).equals(<span class="string">&quot;(&quot;</span>)) &#123;</span><br><span class="line">                        sufExpr.append(topItem+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;<span class="comment">//遇到运算符，比较栈顶符号，若该运算符优先级大于栈顶，直接压栈；若小于栈顶，弹栈输出直到大于栈顶，然后将改运算符压栈。</span></span><br><span class="line">                    <span class="keyword">while</span>(getPriority(temp) &lt;= getPriority(operator.peek())) &#123;</span><br><span class="line">                        sufExpr.append(operator.pop()+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    operator.push(temp);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;<span class="comment">//遇到数字</span></span><br><span class="line">                sufExpr.append(temp+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        String topItem = <span class="keyword">null</span>;<span class="comment">//最后将符合栈弹栈并输出</span></span><br><span class="line">        <span class="keyword">while</span>((topItem = operator.pop())!=<span class="keyword">null</span>) &#123;</span><br><span class="line">            sufExpr.append(topItem+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.sufExpr = sufExpr.toString();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//	public void getExt(String expr) throws Exception &#123;</span></span><br><span class="line"><span class="comment">//		this.expr=expr;</span></span><br><span class="line"><span class="comment">//		this.exchange();</span></span><br><span class="line"><span class="comment">//        String sufExpr = this.sufExpr;</span></span><br><span class="line"><span class="comment">//        Stack&lt;Double&gt; number = new Stack&lt;Double&gt;();</span></span><br><span class="line"><span class="comment">//        System.out.println(sufExpr);</span></span><br><span class="line"><span class="comment">//        Pattern p = Pattern.compile(&quot;-?\\d+(\\.\\d+)?|[+\\-*/()^,E]|([m]&#123;1&#125;[a]&#123;1&#125;[x]&#123;1&#125;)|([m]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)&quot;);</span></span><br><span class="line"><span class="comment">//        Matcher m = p.matcher(sufExpr);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        while (m.find()) &#123;</span></span><br><span class="line"><span class="comment">//            String temp = m.group();</span></span><br><span class="line"><span class="comment">//            if (temp.matches(&quot;[+\\-*/()^,E]|([m]&#123;1&#125;[a]&#123;1&#125;[x]&#123;1&#125;)|([m]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)&quot;)) &#123;// 遇到运算符</span></span><br><span class="line"><span class="comment">//                if(temp.matches(&quot;([m]&#123;1&#125;[a]&#123;1&#125;[x]&#123;1&#125;)|([m]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)&quot;)) &#123;</span></span><br><span class="line"><span class="comment">//                	</span></span><br><span class="line"><span class="comment">//                	int i = 0;</span></span><br><span class="line"><span class="comment">//                	high_precision a = new high_precision();</span></span><br><span class="line"><span class="comment">//                	while(!number.empty()) &#123;</span></span><br><span class="line"><span class="comment">//                		</span></span><br><span class="line"><span class="comment">//                		a.list.add(number.pop().toString());</span></span><br><span class="line"><span class="comment">//                		</span></span><br><span class="line"><span class="comment">//                		i++;</span></span><br><span class="line"><span class="comment">//                		</span></span><br><span class="line"><span class="comment">//                	&#125;</span></span><br><span class="line"><span class="comment">//	            	if(temp.matches(&quot;([m]&#123;1&#125;[a]&#123;1&#125;[x]&#123;1&#125;)&quot;))</span></span><br><span class="line"><span class="comment">//	            		a.flag = 1;</span></span><br><span class="line"><span class="comment">//	            	else</span></span><br><span class="line"><span class="comment">//	            		a.flag = 2;</span></span><br><span class="line"><span class="comment">//	            	String res = cal(a,temp.charAt(0));</span></span><br><span class="line"><span class="comment">//	            	</span></span><br><span class="line"><span class="comment">//	            	number.push(Double.valueOf(res.toString()));</span></span><br><span class="line"><span class="comment">//	            &#125;</span></span><br><span class="line"><span class="comment">//                else &#123;&#125;</span></span><br><span class="line"><span class="comment">//                </span></span><br><span class="line"><span class="comment">//            &#125; else &#123;// 遇到数字</span></span><br><span class="line"><span class="comment">//                number.push(Double.valueOf(temp));</span></span><br><span class="line"><span class="comment">//                System.out.println(number);</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        this.result = number.pop() + &quot;&quot;;</span></span><br><span class="line"><span class="comment">//        this.sci();</span></span><br><span class="line"><span class="comment">//		</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getResult</span><span class="params">(String expr)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		high_precision b = <span class="keyword">new</span> high_precision();</span><br><span class="line">		<span class="keyword">int</span> num=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">this</span>.expr=expr;</span><br><span class="line">		<span class="keyword">this</span>.exchange();</span><br><span class="line">        String sufExpr = <span class="keyword">this</span>.sufExpr;</span><br><span class="line">        Stack&lt;Double&gt; number = <span class="keyword">new</span> Stack&lt;Double&gt;();</span><br><span class="line">        System.out.println(sufExpr);</span><br><span class="line">        Pattern p = Pattern.compile(<span class="string">&quot;-?\\d+(\\.\\d+)?|[+\\-*/^√,E]|([l]&#123;1&#125;[g]&#123;1&#125;)|([s]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)|([c]&#123;1&#125;[o]&#123;1&#125;[s]&#123;1&#125;)|([a]&#123;1&#125;[v]&#123;1&#125;[e]&#123;1&#125;)|([S]&#123;1&#125;[q]&#123;1&#125;[r]&#123;1&#125;[t]&#123;1&#125;)|([m]&#123;1&#125;[a]&#123;1&#125;[x]&#123;1&#125;)|([m]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)&quot;</span>);</span><br><span class="line">        Matcher m = p.matcher(sufExpr);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            String temp = m.group();</span><br><span class="line">            <span class="keyword">if</span> (temp.matches(<span class="string">&quot;[+\\-*/^√,E]|([l]&#123;1&#125;[g]&#123;1&#125;)|([s]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)|([c]&#123;1&#125;[o]&#123;1&#125;[s]&#123;1&#125;)|([a]&#123;1&#125;[v]&#123;1&#125;[e]&#123;1&#125;)|([S]&#123;1&#125;[q]&#123;1&#125;[r]&#123;1&#125;[t]&#123;1&#125;)|([m]&#123;1&#125;[a]&#123;1&#125;[x]&#123;1&#125;)|([m]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)&quot;</span>)) &#123;<span class="comment">// 遇到运算符</span></span><br><span class="line">                <span class="keyword">if</span>(temp.matches(<span class="string">&quot;[+\\-*/^,E]&quot;</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                	<span class="keyword">if</span>(temp.matches(<span class="string">&quot;[,]&quot;</span>)) &#123;</span><br><span class="line">                		<span class="keyword">while</span>(!number.empty()) &#123;</span><br><span class="line">                    		</span><br><span class="line">                    		b.list.add(number.pop().toString());</span><br><span class="line">                    		</span><br><span class="line">                    	&#125;</span><br><span class="line">                		num ++;</span><br><span class="line">                	&#125;</span><br><span class="line">                	<span class="keyword">else</span> &#123;</span><br><span class="line">                		String a1 = number.pop().toString();</span><br><span class="line">                		String a2 = number.pop().toString();</span><br><span class="line">                		high_precision a = <span class="keyword">new</span> high_precision();</span><br><span class="line">                		a.stra = a2;</span><br><span class="line">                		a.strb = a1;</span><br><span class="line">                		String res = cal(a, temp.charAt(<span class="number">0</span>));</span><br><span class="line">                		number.push(Double.valueOf(res.toString()));</span><br><span class="line">                		System.out.println(a2 + temp + a1);</span><br><span class="line">                		System.out.println(number);</span><br><span class="line">                	&#125;</span><br><span class="line">                	</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(temp.matches(<span class="string">&quot;([l]&#123;1&#125;[g]&#123;1&#125;)|([s]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)|([c]&#123;1&#125;[o]&#123;1&#125;[s]&#123;1&#125;)|([S]&#123;1&#125;[q]&#123;1&#125;[r]&#123;1&#125;[t]&#123;1&#125;)&quot;</span>))&#123;<span class="comment">//根号与对数</span></span><br><span class="line">                	String a1 = number.pop().toString();</span><br><span class="line">                	high_precision a = <span class="keyword">new</span> high_precision();</span><br><span class="line">                	a.stra = a1;</span><br><span class="line">                	System.out.println(<span class="string">&quot;a=&quot;</span>+a1+<span class="string">&quot;operater=&quot;</span>+temp.charAt(<span class="number">0</span>));</span><br><span class="line">                	String res = cal(a, temp.charAt(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">                	number.push(Double.valueOf(res.toString()));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                	<span class="keyword">if</span>(temp.matches(<span class="string">&quot;([m]&#123;1&#125;[a]&#123;1&#125;[x]&#123;1&#125;)&quot;</span>))</span><br><span class="line">	            		b.flag = <span class="number">1</span>;</span><br><span class="line">	            	<span class="keyword">else</span> <span class="keyword">if</span>(temp.matches(<span class="string">&quot;([m]&#123;1&#125;[i]&#123;1&#125;[n]&#123;1&#125;)&quot;</span>))</span><br><span class="line">	            		b.flag = <span class="number">2</span>;</span><br><span class="line">	            	<span class="keyword">else</span> &#123;</span><br><span class="line">	            		b.num = num;</span><br><span class="line">	            		num = <span class="number">1</span>;</span><br><span class="line">	            	&#125;</span><br><span class="line">	            		</span><br><span class="line">	            	String res = cal(b,temp.charAt(<span class="number">0</span>));</span><br><span class="line">	            	</span><br><span class="line">	            	number.push(Double.valueOf(res.toString()));</span><br><span class="line">                	</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;<span class="comment">// 遇到数字</span></span><br><span class="line">                number.push(Double.valueOf(temp));</span><br><span class="line">                System.out.println(number);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.result = number.pop() + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">this</span>.sci();</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sci</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String temp = <span class="keyword">this</span>.result;</span><br><span class="line">		<span class="keyword">this</span>.sci_result = Double.parseDouble(temp);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;&quot;</span>+<span class="keyword">this</span>.sci_result;</span><br><span class="line">	&#125;</span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">	 	Scanner sc=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">	 	resolver e = <span class="keyword">new</span> resolver();</span><br><span class="line">	 	e.expr = sc.nextLine();</span><br><span class="line">	 	e.getResult(e.expr);</span><br><span class="line">	 	System.out.println(e.toString());</span><br><span class="line">         sc.close();</span><br><span class="line">	 &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">madd_ax</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ax+=x;</span><br><span class="line">        System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ms_ax</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ax=x;</span><br><span class="line">        System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mc_ax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ax=<span class="number">0.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">mr_ax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.ax;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Swing"><a href="#Swing" class="headerlink" title="Swing:"></a>Swing:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//package Project;</span></span><br><span class="line"><span class="comment">//import Project.resolver;</span></span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Swing</span> <span class="keyword">implements</span> <span class="title">ActionListener</span></span>&#123;</span><br><span class="line">    resolver resv=<span class="keyword">new</span> resolver();</span><br><span class="line">    JTextField text;</span><br><span class="line">    Swing() &#123;</span><br><span class="line">        <span class="comment">//创建界面，初始化</span></span><br><span class="line">        JFrame frame=<span class="keyword">new</span> JFrame(<span class="string">&quot;Calculator&quot;</span>);</span><br><span class="line">        frame.setBackground(Color.PINK);</span><br><span class="line">        frame.setSize(<span class="number">900</span>,<span class="number">600</span>);</span><br><span class="line">        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        frame.setVisible(<span class="keyword">true</span>);</span><br><span class="line">        setPane(frame.getContentPane());<span class="comment">//设置界面面板元素</span></span><br><span class="line">        JMenuBar m=<span class="keyword">new</span> JMenuBar();</span><br><span class="line">        setMenu(m);<span class="comment">//设置菜单元素</span></span><br><span class="line">        frame.setJMenuBar(m);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setPane</span><span class="params">(Container p)</span></span>&#123;<span class="comment">//在面板中添加组件</span></span><br><span class="line">        GridBagLayout layout=<span class="keyword">new</span> GridBagLayout();</span><br><span class="line">        GridBagConstraints constraints=<span class="keyword">new</span> GridBagConstraints();<span class="comment">//布局方式</span></span><br><span class="line">        p.setLayout(layout);</span><br><span class="line"></span><br><span class="line">        JButton[] button;<span class="comment">//按钮组件</span></span><br><span class="line">        String buttonName[]=&#123;<span class="string">&quot;max&quot;</span>,<span class="string">&quot;MC&quot;</span>,<span class="string">&quot;^&quot;</span>,<span class="string">&quot;(&quot;</span>,<span class="string">&quot;)&quot;</span>,<span class="string">&quot;C&quot;</span>,<span class="string">&quot;BackSpace&quot;</span>,<span class="string">&quot;min&quot;</span>,<span class="string">&quot;MR&quot;</span>,<span class="string">&quot;lg&quot;</span>, <span class="string">&quot;7&quot;</span>,<span class="string">&quot;8&quot;</span>,<span class="string">&quot;9&quot;</span>,<span class="string">&quot;/&quot;</span>,<span class="string">&quot;ave&quot;</span>,<span class="string">&quot;M+&quot;</span>,<span class="string">&quot;sin&quot;</span>,<span class="string">&quot;4&quot;</span>,<span class="string">&quot;5&quot;</span>,<span class="string">&quot;6&quot;</span>,<span class="string">&quot;*&quot;</span>,<span class="string">&quot;space&quot;</span>,<span class="string">&quot;MS&quot;</span>,<span class="string">&quot;cos&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span>,<span class="string">&quot;-&quot;</span>,<span class="string">&quot;,&quot;</span>,<span class="string">&quot;Sqrt&quot;</span>,<span class="string">&quot;tan&quot;</span>,<span class="string">&quot;0&quot;</span>,<span class="string">&quot;.&quot;</span>,<span class="string">&quot;=&quot;</span>,<span class="string">&quot;+&quot;</span>&#125;;</span><br><span class="line">        text=<span class="keyword">new</span> JTextField(<span class="number">20</span>);<span class="comment">//文本框组件</span></span><br><span class="line">        text.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        text.setFont(<span class="keyword">new</span> Font(<span class="string">&quot;微软雅黑&quot;</span>, Font.PLAIN, <span class="number">20</span>));</span><br><span class="line">        <span class="comment">//键盘回车监听</span></span><br><span class="line">        text.addKeyListener(<span class="keyword">new</span> KeyListener()&#123;</span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span></span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(e.getKeyChar()==<span class="string">&#x27;\n&#x27;</span>)&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            resv.getResult(text.getText());</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (Exception e1) &#123;</span><br><span class="line">                            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                            e1.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                        text.setText(resv.toString());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyTyped</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">                    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyReleased</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">                    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">        &#125;);<span class="comment">//添加监听</span></span><br><span class="line"></span><br><span class="line">        constraints.fill=GridBagConstraints.BOTH;</span><br><span class="line">        constraints.gridheight=<span class="number">2</span>;</span><br><span class="line">        constraints.gridwidth=GridBagConstraints.REMAINDER;</span><br><span class="line">        constraints.weightx=<span class="number">1</span>;</span><br><span class="line">        constraints.weighty=<span class="number">1</span>;</span><br><span class="line">        layout.setConstraints(text, constraints);</span><br><span class="line">        p.add(text);</span><br><span class="line"></span><br><span class="line">        constraints.gridheight=<span class="number">1</span>;</span><br><span class="line">        constraints.fill=GridBagConstraints.BOTH;</span><br><span class="line">        button=<span class="keyword">new</span> JButton[buttonName.length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;buttonName.length;i++)&#123;</span><br><span class="line">            Font font = <span class="keyword">new</span> Font(<span class="string">&quot;微软雅黑&quot;</span>, Font.BOLD, <span class="number">20</span>);</span><br><span class="line">            button[i]=<span class="keyword">new</span> JButton(buttonName[i]);</span><br><span class="line">            button[i].setFont(font);</span><br><span class="line">            button[i].setBackground(Color.WHITE);</span><br><span class="line">            button[i].setForeground(Color.BLACK);</span><br><span class="line">            button[i].setBorder(BorderFactory.createRaisedBevelBorder());</span><br><span class="line">           <span class="comment">// button[i].setIcon(new ImageIcon(getClass().getResource(&quot;E:\\java\\Project\\Project\\1.jpg&quot;)));</span></span><br><span class="line">            button[i].addActionListener(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">if</span>((i+<span class="number">1</span>)%<span class="number">7</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                constraints.gridwidth=GridBagConstraints.REMAINDER;</span><br><span class="line">                constraints.fill=GridBagConstraints.BOTH;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                constraints.gridwidth=<span class="number">1</span>;</span><br><span class="line">                constraints.fill=GridBagConstraints.BOTH;</span><br><span class="line">            &#125;</span><br><span class="line">            layout.setConstraints(button[i], constraints);</span><br><span class="line">            p.add(button[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setMenu</span><span class="params">(JMenuBar m)</span></span>&#123;</span><br><span class="line">        JMenu about=<span class="keyword">new</span> JMenu(<span class="string">&quot;关于(A)&quot;</span>);</span><br><span class="line">        JMenu help=<span class="keyword">new</span> JMenu(<span class="string">&quot;帮助(H)&quot;</span>);</span><br><span class="line"></span><br><span class="line">        m.add(about);</span><br><span class="line">        m.add(help);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span></span>&#123;</span><br><span class="line">        String name=((JButton)e.getSource()).getText();</span><br><span class="line">        <span class="keyword">switch</span>(name)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;BackSpace&quot;</span>:</span><br><span class="line">                name=text.getText().substring(<span class="number">0</span>,text.getText().length()-<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;=&quot;</span> :</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                    resv.getResult(text.getText());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e1) &#123;</span><br><span class="line">                    <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                    e1.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                name=resv.toString();</span><br><span class="line">                <span class="keyword">double</span> x=Double.valueOf(name);</span><br><span class="line">                <span class="keyword">int</span> y=(<span class="keyword">int</span>)x;</span><br><span class="line">                <span class="keyword">if</span>(x-y==<span class="number">0</span>)name=String.format(<span class="string">&quot;%d&quot;</span>, y);</span><br><span class="line">                <span class="keyword">else</span> name=String.format(<span class="string">&quot;%.4f&quot;</span>, x);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;C&quot;</span> :</span><br><span class="line">                name=<span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;MS&quot;</span> :</span><br><span class="line">                resv.ms_ax(Double.valueOf(text.getText()).doubleValue());</span><br><span class="line">                name=<span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;M+&quot;</span> :</span><br><span class="line">                resv.madd_ax(Double.valueOf(text.getText()).doubleValue());</span><br><span class="line">                name=<span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;MC&quot;</span> :</span><br><span class="line">                resv.mc_ax();</span><br><span class="line">                name=<span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;MR&quot;</span> :</span><br><span class="line">                Double temp=resv.mr_ax();</span><br><span class="line">                name=temp.toString();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;space&quot;</span> :</span><br><span class="line">                name=text.getText()+<span class="string">&quot; &quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                name=text.getText()+name;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        text.setText(name);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">       </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        SwingUtilities.invokeLater(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">new</span> Swing();</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="五、遇到的问题及解决方案"><a href="#五、遇到的问题及解决方案" class="headerlink" title="五、遇到的问题及解决方案"></a>五、遇到的问题及解决方案</h2><p>（1）对字符串进行划分时难以识别多个字母组成的运算符<br>解决方案：通过正则匹配[letter]{num}的形式将运算符分成几个固定的字母组合，通过此正则对字符串进行划分<br>（2）面对大数运算问题时出现错误。<br>解决方案：起初自制了一个模拟位运算的高精度运算算法，在测试过程中了解到了JAVA自带的Bigdecimal类别，借助此类中的基本加减乘除方法实现了大数的后续运算<br>（3）科学计数法无法识别。<br>解决方案：在处理字符串的过程中单独识别E字符，将其转化为幂指数运算，从而完成科学计数法与常规数字之间的转换。</p>
<h2 id="六、实验总结"><a href="#六、实验总结" class="headerlink" title="六、实验总结"></a>六、实验总结</h2><p>​    </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/07/JAVA/" data-id="ckq2c2d5e0004lsv0gfd0dusk" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-计算机网络课程设计报告" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A/" class="article-date">
  <time class="dt-published" datetime="2021-06-05T10:34:07.515Z" itemprop="datePublished">2021-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <table>
        <tr>
        <th colspan = "6"> <div align='center' ><font size='6'>计算机网络课程设计实验报告</font></div>
</th>
        </tr>
    <tr>
        <th> 课程设计名称</th>
        <th> 计算机网络课程设计</th>
        <th> 学 院 </th>
        <th> 计算机 </th>
        <th> 指导教师 </th>
        <th> 高占春 </th>
        </tr>
    <tr>
        <th> 班级</th>
        <th> 班内序号</th>
        <th>学号</th>
        <th>学生姓名</th>
        <th colspan = "2">成绩</th>
    </tr>
        <td> 2019211306 </td>
        <td> 32 </td >
        <td> 2019211327 </td >
        <td> 王怡婷 </td >
        <th colspan = "2"></th>
    </tr>
        <td> 2019211309 </td>
        <td> 14 </td >
        <td> 2019211408 </td >
        <td> 李康童 </td >
        <th colspan = "2"></th>
    </tr>
        <td> 2019211309 </td>
        <td> 10 </td >
        <td> 2019211404 </td >
        <td> 戎惠强 </td >
        <th colspan = "2"></th>
    </tr>
        <th> 课程设计内容 </th>
        <td colspan = "5">简要介绍课程设计的主要内容，包括课程设计教学目的、  基本内容、实验方法和团队分工等  <br/>一、实验目的<br/>
设计一个DNS服务器程序，读入“域名-IP地址”对照表，当客户端查询域名对应的IP地址时，用域名检索该对照表，三种检索结果：
检索结果为ip地址0.0.0.0，则向客户端返回“域名不存在”的报错消息（不良网站拦截功能）<br/>
检索结果为普通IP地址，则向客户返回这个地址（服务器功能）<br/>
表中未检到该域名，则向因特网DNS服务器发出查询，并将结果返给客户端（中继功能）<br/>
考虑多个计算机上的客户端会同时查询，需要进行消息ID的转换<br/>
二、实验环境<br/>
Windows10操作系统，C语言编写。<br/>
三、程序实验功能点<br/>
1.实现了不良网站拦截功能，即ip地址为0.0.0.0时向客户端返回的“域名不存在”的报错消息。<br/>
2.实现了服务器功能，即检索结果为普通IP地址时，向客户端返回这个地址。<br/>
3.实现了中继功能，即表中未检索到域名时，会向外部DNS服务器发出查询，并将结果返回给客户端。<br/>
4.通过ID转换，把要查询的地址转换之后存储在动态存储表中，并分配角标，方便调用。<br/>
5.通过更改参数实现三级调试，可以得到不同详略程度的输出结果，简略的话就是只输出查询结果；详细的可以详细到先打印出本地域名表，输出的时候可以输出查询的数据包情况。<br/>
6.可以利用wireshark抓包软件抓包，能够获取并翻译请求报文中的域名地址。<br/>
7.可以查询A类地址，可以判别AAAA类地址并进行回复。<br/>
8、实现了并发访问，即可以在辅助电脑上打开一个访问量较大的网站，频 繁点击多个链接，从 wireshark 观察消息 ID 的变化<br/>
四、分工安排<br/>
2019211327王怡婷：负责读取URL-IP表，实现IP黑名单功能以及程序缓存URL-IP以便快速读取<br/>
2019211408李康童：负责主要功能的程序实现，通过socket编程，从客户端接收报文到中继服务器，从外部服务器接收报文到中继服务器，以及中继服务器的中继分发功能；<br/>
2019211404戎惠强：负责实验文档的编写以及抓包和代码测试；<br/>
    </tr>
        <th> 学生课程设计报告（附页）</th>
        <td colspan = "5"> </td >
    </tr>
        <th> 课程设计成绩判定 </th>
        <th colspan = "5">评语: <br/>成绩：<br/>指导教师签名：      <br/>年    月     日</th>
    </tr>
</table>



<h5 id="注：评语要体现每个学生的工作情况，可以加页。"><a href="#注：评语要体现每个学生的工作情况，可以加页。" class="headerlink" title="注：评语要体现每个学生的工作情况，可以加页。"></a>注：评语要体现每个学生的工作情况，可以加页。</h5><p></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></p>
<p></br></br></p>
<h2 id="学生课程设计报告"><a href="#学生课程设计报告" class="headerlink" title="学生课程设计报告"></a>学生课程设计报告</h2><h3 id="一、程序基本模块："><a href="#一、程序基本模块：" class="headerlink" title="一、程序基本模块："></a>一、程序基本模块：</h3><h4 id="1、程序流程图"><a href="#1、程序流程图" class="headerlink" title="1、程序流程图"></a>1、程序流程图</h4><img src="C:\Users\14372\Desktop\DNS\23.png" alt="23" style="zoom:50%;" />

<h4 id="2、数据结构定义和字典"><a href="#2、数据结构定义和字典" class="headerlink" title="2、数据结构定义和字典"></a>2、数据结构定义和字典</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line"><span class="keyword">char</span> url[MAX_RECORD][<span class="number">65</span>];   <span class="comment">//url字符串</span></span><br><span class="line"><span class="keyword">int</span> index[MAX_RECORD];  <span class="comment">//对应url的ip在文件里的位置</span></span><br><span class="line">	<span class="keyword">int</span> expire_time[MAX_RECORD];    <span class="comment">//过期时间</span></span><br><span class="line">&#125; stru_record_index;    <span class="comment">//索引</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">	<span class="keyword">char</span> addr[<span class="number">16</span>];  <span class="comment">//ip地址字符串</span></span><br><span class="line">&#125; stru_record;  <span class="comment">//ip记录</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">id_trans</span> &#123;</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">short</span> oldId;			<span class="comment">//原有ID</span></span><br><span class="line">	<span class="keyword">bool</span> done;						<span class="comment">//标记是否完成解析</span></span><br><span class="line">	SOCKADDR_IN client;				<span class="comment">//请求者套接字地址</span></span><br><span class="line">	<span class="keyword">int</span> timer;						<span class="comment">//过期时间</span></span><br><span class="line">&#125; ID_trans; <span class="comment">//用户ID转换</span></span><br><span class="line">ID_trans idTrans[MAXID];<span class="comment">//用户ID转换表</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">dnsHeader</span> &#123;</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">short</span> id;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">short</span> tag;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">short</span> qdcount;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">short</span> ancount;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">short</span> nscount;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">short</span> arcount;</span><br><span class="line">&#125; Header;</span><br></pre></td></tr></table></figure>
<h4 id="3-、-各函数定义和意义"><a href="#3-、-各函数定义和意义" class="headerlink" title="3 、 各函数定义和意义"></a>3 、 各函数定义和意义</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置过期时间</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_timer</span><span class="params">(ID_trans* id, <span class="keyword">int</span> ttl)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//检查是否过期</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check_timer</span><span class="params">(ID_trans* id)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//转换ID 以数组下标作为新ID</span></span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">short</span> <span class="title">id_trans</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">short</span> ID, SOCKADDR_IN temp, <span class="keyword">bool</span> isdone)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//URL转换 如将3www5baidu3com 转化成 www.baidu.com</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">urlTrans</span><span class="params">(<span class="keyword">char</span>* source, <span class="keyword">char</span>* dest)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//输出传输包的内容</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Output_Packet</span><span class="params">(<span class="keyword">char</span> *buffer, <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//客户端和DNS接收包</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">receive</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//客户端发送请求报文</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendpacket</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_mode</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">judge_same</span><span class="params">(<span class="keyword">char</span>* record, <span class="keyword">char</span>* url, <span class="keyword">char</span>* ip)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">search_blacklist</span><span class="params">(<span class="keyword">char</span>* aim_url, <span class="keyword">char</span>* aim_ip)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//设置过期时间。参数是要设置的记录指针和生存时间</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_expire</span><span class="params">(<span class="keyword">int</span>* expire_time, <span class="keyword">int</span> ttl)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//检查record是否超时</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">is_expired</span><span class="params">(<span class="keyword">int</span> expire_time)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//对文件进行初始化</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ini_cache_file</span><span class="params">(FILE* file)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//向缓存文件里添加网址为url，地址为addr，生存时间为ttl的记录</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add_record</span><span class="params">(<span class="keyword">char</span>* url, <span class="keyword">char</span>* addr, <span class="keyword">int</span> ttl)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//删除pos位置的记录</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delete_record</span><span class="params">(FILE* file, <span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//显示缓存文件里内容</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">disp</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//读取预先设置的缓存</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read_pre_cache</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">ip_addr <span class="title">readLocalTable</span><span class="params">(<span class="keyword">char</span> *url)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//返回的地址第一个字符为&#x27;n&#x27;：没缓存这个。&#x27;e&#x27;：过期了。&#x27;b&#x27;：黑名单</span></span></span><br><span class="line"><span class="function">ip_addr <span class="title">get_ip</span><span class="params">(<span class="keyword">char</span>* query_url)</span></span></span><br></pre></td></tr></table></figure>
<h3 id="二、测试用例-amp-功能展示"><a href="#二、测试用例-amp-功能展示" class="headerlink" title="二、测试用例&amp;功能展示"></a>二、测试用例&amp;功能展示</h3><p>我们设计的DNS服务器经过了大量的试验及测试，在多用户访问以及单用户多访问情况下都有着较好的表现。并且，在DNS服务器功能上本服务器实现了不良网站拦截功能、服务器功能以及中继功能。</p>
<p>实验前，我们先将计算机本地TCP/IPv4协议配置属性中的DNS服务器设置为环回IP地址“127.0.0.1”</p>
<img src="C:\Users\14372\AppData\Roaming\Typora\typora-user-images\image-20210605194442122.png" alt="image-20210605194442122" style="zoom: 33%;" />

<p>这种情况下打开浏览器发现无法连接到网络：</p>
<img src="C:\Users\14372\Desktop\DNS\6.png" alt="6" style="zoom: 33%;" />

<p>然后命令行中运行<code>dns</code>程序,有三种调试模式，依次为<code>dns.exe</code>，<code>dns.exe -d</code>，<code>dns.exe -dd</code>分别得到调试信息：</p>
<img src="C:\Users\14372\Desktop\DNS\20.png" alt="20" style="zoom:50%;" />

<img src="C:\Users\14372\Desktop\DNS\8.png" alt="8" style="zoom:50%;" />

<img src="C:\Users\14372\Desktop\DNS\7.png" alt="7" style="zoom:80%;" />

<h4 id="1、中继功能"><a href="#1、中继功能" class="headerlink" title="1、中继功能"></a>1、中继功能</h4><p>使用本地配置<code>cache.txt</code>文件中不存在的网址“so.lenovo.com.cn”为例。当我们在浏览器中打开时 ，在调试等级为1的情况下，DNS服务器窗口输出如下所示内容：</p>
<img src="C:\Users\14372\Desktop\DNS\4.png" alt="4" style="zoom:50%;" />

<h4 id="2、拦截功能"><a href="#2、拦截功能" class="headerlink" title="2、拦截功能"></a>2、拦截功能</h4><p>使用本地配置<code>cache.txt</code>文件中IP地址设置为<code>0.0.0.0</code>，即黑名单中的网址，以<code>www.cctv1.net</code>为例，通过浏览器搜索cctv1发现无法访问：</p>
<p>​                                                  <img src="C:\Users\14372\Desktop\DNS\11.png" alt="11" style="zoom:50%;" /></p>
<img src="C:\Users\14372\Desktop\DNS\14.png" alt="14" style="zoom: 33%;" />

<p>接着在命令行中用<code>nslookup</code>命令查询<code>www.cctv1.net</code>的IP地址，得到服务器的响应如下所示：</p>
<img src="C:\Users\14372\Desktop\DNS\12.png" alt="12" style="zoom:50%;" />

<p>再将百度从黑名单中删除 ，</p>
<p><img src="C:\Users\14372\Desktop\DNS\13.png" alt="13"></p>
<p>先对DNS缓存进行刷新，再次登录<code>www.cctv1.net</code>，此时发现计算机可以访问CCTV1:</p>
<h4 id=""><a href="#" class="headerlink" title=""></a><img src="C:\Users\14372\Desktop\DNS\15.png" alt="15" style="zoom: 25%;" /></h4><h4 id="3、服务器功能"><a href="#3、服务器功能" class="headerlink" title="3、服务器功能"></a>3、服务器功能</h4><p>使用本地配置<code>cache.txt</code>文件中已有的网址<code>test1</code>为例,在命令行中用<code>nslookup</code>命令查询<code>test1</code>的IP地址，得到服务器的响应如下所示：<img src="C:\Users\14372\Desktop\DNS\18.PNG" alt="18" style="zoom:50%;" /></p>
<p>再查看cache文件中不包含的<code>www.bupt.edu.cn</code>,得到服务器响应如下：</p>
<img src="C:\Users\14372\Desktop\DNS\19.PNG" alt="19" style="zoom:50%;" />

<h4 id="5、其他附加功能"><a href="#5、其他附加功能" class="headerlink" title="5、其他附加功能"></a>5、其他附加功能</h4><h5 id="（1）缓存学习功能-使用最近最常用算法思想"><a href="#（1）缓存学习功能-使用最近最常用算法思想" class="headerlink" title="（1）缓存学习功能 (使用最近最常用算法思想)"></a>（1）缓存学习功能 (使用最近最常用算法思想)</h5><p>开始时预设缓存中的网址为：在上网遇到了新的网址之后，缓存会在缓存中删去已过期的网址或者距离过期最接近的网址，将这个最近使用的网址存在缓存中。保持对缓存文件流的一个更新状态。</p>
<h5 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="C:\Users\14372\Desktop\DNS\16.png" alt="16" style="zoom:50%;" /><img src="C:\Users\14372\Desktop\DNS\17.png" alt="17" style="zoom:50%;" /></h5><h5 id="（2-单用户多访问"><a href="#（2-单用户多访问" class="headerlink" title="（2)单用户多访问"></a>（2)单用户多访问</h5><p>在一台电脑上同时打开多个浏览器，并且访问不同的页面，快速全部确认后浏览器的显示反馈结果如下:</p>
<h5 id="-2"><a href="#-2" class="headerlink" title=""></a><img src="C:\Users\14372\Desktop\DNS\10.png" alt="10"></h5><h3 id="五、遇到的问题及解决"><a href="#五、遇到的问题及解决" class="headerlink" title="五、遇到的问题及解决"></a>五、遇到的问题及解决</h3><h4 id="1、-创建Socket进行通信时是选用UDP还是TCP？"><a href="#1、-创建Socket进行通信时是选用UDP还是TCP？" class="headerlink" title="1、 创建Socket进行通信时是选用UDP还是TCP？"></a>1、 创建Socket进行通信时是选用UDP还是TCP？</h4><p><code>socket(AF_INET, SOCK_DGRAM, 0);</code>在创建套接字时，第二个参数可以选择协议类型是TCP还是UDP；</p>
<p>SOCK_DGRAM表示UDP，SOCK_STREAM表示TCP，由于TCP是可靠的，全双工通信，同时，进行通信前要经过三次握手，结束通信时有四次挥手，选用TCP可能会导致程序设计相对复杂，而UDP是无保障的，但是已经能够实现DNS中继服务器的相关功能，而且程序设计相对简单，故选用UDP模式；</p>
<h4 id="2、-代码测试时，如何获得socket相关函数出现的错误？"><a href="#2、-代码测试时，如何获得socket相关函数出现的错误？" class="headerlink" title="2、 代码测试时，如何获得socket相关函数出现的错误？"></a>2、 代码测试时，如何获得socket相关函数出现的错误？</h4><p>由于网络编程的程序不同于普通程序，在调试时不能像不同程序一般在IDE中直接DEBUG，而需要实际使用中通过输出的调试信息来调试代码，所以调试起来相对复杂；通过查阅资料，我们用</p>
<p>WSAGetLastError()函数，根据其返回值来判断程序中与套接字相关的操作是否有错误出现；返回值为0表示没有错误产生；</p>
<h4 id="3、-如何分析请求报文和响应报文？"><a href="#3、-如何分析请求报文和响应报文？" class="headerlink" title="3、 如何分析请求报文和响应报文？"></a>3、 如何分析请求报文和响应报文？</h4><p>DNS的请求报文和响应报文的格式类似，通过查阅资料和抓包可以得知报文的结构：</p>
<p>主要分为头部信息，问题部分，资源记录部分（回答部分）；</p>
<h4 id="4、-如何判断请求报文是否是IPv6？"><a href="#4、-如何判断请求报文是否是IPv6？" class="headerlink" title="4、 如何判断请求报文是否是IPv6？"></a>4、 如何判断请求报文是否是IPv6？</h4><p>在请求报文中的问题部分中，有查询名，查询类型，查询类的记录；其中查询类的值代表了该请求报文请求的类型，A(1)表示ipv4，AAAA(28)表示ipv6;</p>
<h4 id="5、-为什么有的类型不是IPv4也不是IPv6"><a href="#5、-为什么有的类型不是IPv4也不是IPv6" class="headerlink" title="5、 为什么有的类型不是IPv4也不是IPv6?"></a>5、 为什么有的类型不是IPv4也不是IPv6?</h4><p>查询类型不只有A和AAAA两种，还有CNAME，MX，NS等类型，这些类型的值不是1，也不是28，而是其他的数字；所以有时候解析到的type值会为其他的数；</p>
<h4 id="6、-为什么测试程序时会一直报错GetLastError-返回值为10054和10038？"><a href="#6、-为什么测试程序时会一直报错GetLastError-返回值为10054和10038？" class="headerlink" title="6、 为什么测试程序时会一直报错GetLastError()返回值为10054和10038？"></a>6、 为什么测试程序时会一直报错GetLastError()返回值为10054和10038？</h4><p>由于基于UDP的通信是无保障的，同时我们将socket设置为非阻塞状态，所以函数recvfrom()和sendto()会一直保持接收和发送报文的状态，但是如果网络中没有报文可以接受或者客户端没有请求报文发送，那么这两个函数收不到报文就会报错。调试时，发现当我们不上网时，就会一直产生错误，但是每当打开网页，有报文时，就不会再报错了；</p>
<h4 id="7、-为什么端口绑定不了？"><a href="#7、-为什么端口绑定不了？" class="headerlink" title="7、 为什么端口绑定不了？"></a>7、 为什么端口绑定不了？</h4><p>调试时发现，当我们打开自己编写的程序的同时，再打开老师给的样例程序，样例程序中就会报错端口未绑定；这是由于两个程序都是绑定在53号端口，第二个程序想要绑定的53号端口已经被前一个程序占用了，所以会报错；</p>
<h4 id="8、-转换ID空间不够，开多个网页时程序崩溃"><a href="#8、-转换ID空间不够，开多个网页时程序崩溃" class="headerlink" title="8、 转换ID空间不够，开多个网页时程序崩溃"></a>8、 转换ID空间不够，开多个网页时程序崩溃</h4><p>初始时我们设置的ID转换表的容量为8，当我们开着程序上网时，如果同时打开多个网页，大量报文涌入和发出，就会导致ID转换表不够用，程序溢出崩溃；当我们把容量调大为1024时，情况得到了改善</p>
<h3 id="验收问题及代码修改"><a href="#验收问题及代码修改" class="headerlink" title="==验收问题及代码修改=="></a>==验收问题及代码修改==</h3><h4 id="1、在命令行中nslookup搜查cache-txt文件中原有的网址时-会同时出现它正确的ipv4地址和不知名的ipv6地址"><a href="#1、在命令行中nslookup搜查cache-txt文件中原有的网址时-会同时出现它正确的ipv4地址和不知名的ipv6地址" class="headerlink" title="1、在命令行中nslookup搜查cache.txt文件中原有的网址时,会同时出现它正确的ipv4地址和不知名的ipv6地址"></a>1、在命令行中<code>nslookup</code>搜查<code>cache.txt</code>文件中原有的网址时,会同时出现它正确的ipv4地址和不知名的ipv6地址</h4><p>​    关于这个问题，验收后我们仔细检查程序，发现我们在解析请求报文时，对于同一域名的ipv4请求和ipv6请求，都用我们表中存有的ipv4地址去构造响应报文，而ipv4地址和ipv6地址的结构不同，所以出现了未知的ipv6地址。</p>
<p>​    改进后对于表中有的域名（且不在黑名单中），我们会按照表中的实际内容返回；</p>
<img src="C:\Users\14372\Desktop\DNS\18.PNG" alt="18" style="zoom:50%;" />

<h4 id="2、对于两个socket的并行传输使用了非阻塞的处理方式，与程序的实际工作要求不符"><a href="#2、对于两个socket的并行传输使用了非阻塞的处理方式，与程序的实际工作要求不符" class="headerlink" title="2、对于两个socket的并行传输使用了非阻塞的处理方式，与程序的实际工作要求不符"></a>2、对于两个socket的并行传输使用了非阻塞的处理方式，与程序的实际工作要求不符</h4><p>​    修改方法：采用<code>select</code>函数来对<code>recvfrom</code>和<code>sendto</code>函数做一个监听，判断当前socket是否可以发送和接收数据，并为select函数设置一个过期时间，如果在过期时间内找不到可以接受或发送数据的socket，不会执行<code>recvfrom</code>或<code>sendto</code>函数，返回错误值；如果能找到就执行<code>recvfrom</code>或<code>sendto</code>函数，这样避免了非阻塞状态下<code>recvfrom</code>或<code>sendto</code>函数持续开放，占用资源；</p>
<img src="C:\Users\14372\Desktop\DNS\1.jpg" alt="1" style="zoom: 50%;" />

<img src="C:\Users\14372\Desktop\DNS\21.png" alt="21" style="zoom:50%;" />

<h3 id="六、实验总结"><a href="#六、实验总结" class="headerlink" title="六、实验总结"></a>六、实验总结</h3><p>​    我们开发这个程序的过程大概有一个月左右，由于对网络程序的不熟悉 ，在写代码期间遇到了很多困难，我们查阅了很多的资料去认识学习RFC协议，了解它的运作方式，并且认识熟悉了很多socket方面的函数，为我们以后的网络编程打下了基础。通过<code>wireshark</code>抓包，我们将DNS报文的各个字段按照协议里的规定去认真分析，直至熟悉了解其功能。</p>
<p>​    在实现这一系列的功能后，我们开始对程序的细节问题进行调试和更改，例如文件覆盖的设计，以及报文信息缓存的设计等。最终，我们还是相当成功的实现了DNS中继服务器的基本功能，并在此基础上，对缓存文件系统进行了改进，实现了单用户多访问以及多用户访问的问题。通过自己的亲手实践，我们有很大的收获，自己的编程能力与思想得到了锻炼，知识面更是得到了扩充。通过本学期课程的学习以及课程设计的完成，团队三名成员对IP、DNS协议有了一个较为基础、全面的认识。</p>
<p>​    最后感谢高老师课堂上精彩的讲解，帮助我们对计算机网络的体系有了很好的了解；感谢老师验收时耐心的询问帮助我们找到了问题所在，让我们对于程序工程的实际应用方面做出反思，能够及时的修改问题 。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A/" data-id="ckq2c2d5b0001lsv0czai5zke" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-计网课设文档" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/03/%E8%AE%A1%E7%BD%91%E8%AF%BE%E8%AE%BE%E6%96%87%E6%A1%A3/" class="article-date">
  <time class="dt-published" datetime="2021-06-03T04:15:34.254Z" itemprop="datePublished">2021-06-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <table>
        <tr>
        <th colspan = "6"> <div align='center' ><font size='6'>计算机网络课程设计报告</font></div>
</th>
        </tr>
    <tr>
        <th> 课程设计名称</th>
        <th> 计算机网络课程设计</th>
        <th> 学 院 </th>
        <th> 计算机 </th>
        <th> 指导教师 </th>
        <th> 高占春 </th>
        </tr>
    <tr>
        <th> 班级</th>
        <th> 班内序号</th>
        <th>学号</th>
        <th>学生姓名</th>
        <th colspan = "2">成绩</th>
    </tr>
        <td> 2019211309 </td>
        <td> 14 </td >
        <td> 2019211408 </td >
        <td> 李康童 </td >
        <th colspan = "2"></th>
    </tr>
        <td> 2019211309 </td>
        <td> 10 </td >
        <td> 2019211404 </td >
        <td> 戎惠强 </td >
        <th colspan = "2"></th>
    </tr>
       <td> 2019211306 </td>
        <td> 10 </td >
        <td> 2019211327 </td >
        <td> 王怡婷 </td >
        <th colspan = "2"></th>
    </tr>
        <th> 课程设计内容 </th>
        <td colspan = "5">一、实验目的<br/>
设计一个DNS服务器程序，读入“域名-IP地址”对照表，当客户端查询域名对应的IP地址时，用域名检索该对照表，三种检索结果：<br/>
检索结果为ip地址0.0.0.0，则向客户端返回“域名不存在”的报错消息（不良网站拦截功能）<br/>
检索结果为普通IP地址，则向客户返回这个地址（服务器功能）<br/>
表中未检到该域名，则向因特网DNS服务器发出查询，并将结果返给客户端（中继功能）<br/>
考虑多个计算机上的客户端会同时查询，需要进行消息ID的转换<br/>
二、实验环境<br/>
Windows10操作系统，C语言编写。<br/>
三、程序实验功能点<br/>
1.实现了不良网站拦截功能，即ip地址为0.0.0.0时向客户端返回的“域名不存在”的报错消息。<br/>
2.实现了服务器功能，即检索结果为普通IP地址时，向客户端返回这个地址。<br/>
3.实现了中继功能，即表中未检索到域名时，会向外部DNS服务器发出查询，并将结果返回给客户端。<br/>
4.通过ID转换，把要查询的地址转换之后存储在动态存储表中，并分配角标，方便调用。<br/>
5.通过更改参数实现三级调试，可以得到不同详略程度的输出结果，简略的话就是只输出查询结果；详细的可以详细到先打印出本地域名表，输出的时候可以输出查询的数据包情况。<br/>
6.可以利用wireshark抓包软件抓包，能够获取并翻译请求报文中的域名地址。<br/>
7.可以查询A类地址，以及完成了不完善的多客户端处理，即客户端可以向服务器发送请求报文，但客户端接受不到响应
<br/>        
    </tr>
        <th> 课程设计内容</th>
        <td colspan = "5">  11.学生可以实时查询自己所处的位置，能够查询周围的教学楼、学生宿舍和其他服务设施；系统需要给出一定范围内的教学楼（范围多大自拟）、学生宿舍和其他服务设施，并标出到这些目标的距离最短路线的距离；如果用户选定某一个目标可以给出距离最短路线。<br/>选做一：某同学在行走途中可更改目标和导航策略，系统按照当前位置做相应的操作；  <br/>    选做二：用图形绘制地图，并在地图上进行实时导航  <br/>    选做三：在教学楼和宿舍楼中进行导航，能够导航到具体的楼层和房间；  <br/>    选做四：能够根据食堂的人流量进行负载均衡导航；  <br/>      选做五：实现支持多用户的系统，可以实时查询任一用户状态；<br/>三、实验方法<br/>使用Qt搭建前端，使用C++创建后端，两者整合，得到导航的图形界面<br/>四、团队分工<br/>李康童负责后端算法，戎惠强负责编写文档和日志部分，两人共同负责前端的构建</td> </td >
    </tr>
        <th> 学生课程设计报告（附页）</th>
        <td colspan = "5"> </td >
    </tr>
        <th> 课程设计成绩判定 </th>
        <th colspan = "5">评语: <br/>成绩：<br/>指导教师签名：      <br/>年    月     日</th>
    </tr>
</table>



<h5 id="注：评语要体现每个学生的工作情况，可以加页。"><a href="#注：评语要体现每个学生的工作情况，可以加页。" class="headerlink" title="注：评语要体现每个学生的工作情况，可以加页。"></a>注：评语要体现每个学生的工作情况，可以加页。</h5><h2 id=""><a href="#" class="headerlink" title=""></a><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></h2><br/>

<h2 id="-1"><a href="#-1" class="headerlink" title=""></a><br/></h2><h2 id="-2"><a href="#-2" class="headerlink" title=""></a><br/><br/></h2><h2 id="学生课程设计报告"><a href="#学生课程设计报告" class="headerlink" title="学生课程设计报告"></a><br/><br/><br/><br/>学生课程设计报告</h2><h3 id="编写环境："><a href="#编写环境：" class="headerlink" title="编写环境："></a>编写环境：</h3><h4 id="软件环境："><a href="#软件环境：" class="headerlink" title="软件环境："></a>软件环境：</h4><p>搭载了微软Windows10操作系统的笔记本电脑；</p>
<h4 id="硬件环境："><a href="#硬件环境：" class="headerlink" title="硬件环境："></a>硬件环境：</h4><p>Visual Studio 2017集成开发环境和Qt creator。</p>
<h3 id="总体结构："><a href="#总体结构：" class="headerlink" title="总体结构："></a>总体结构：</h3><img src="C:\Users\14372\AppData\Roaming\Typora\typora-user-images\image-20210603112238640.png" alt="image-20210603112238640" style="zoom:40%;" />

<h3 id="模块划分："><a href="#模块划分：" class="headerlink" title="模块划分："></a>模块划分：</h3><h4 id="后端划分为Input、Building、Road、User、Student等模块"><a href="#后端划分为Input、Building、Road、User、Student等模块" class="headerlink" title="后端划分为Input、Building、Road、User、Student等模块"></a>后端划分为Input、Building、Road、User、Student等模块</h4><h5 id="Building模块："><a href="#Building模块：" class="headerlink" title="Building模块："></a>Building模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Building</span>&#123;</span><span class="comment">//将每个建筑物视为一个节点，有其位置，并存储与其相连的路有哪些</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location;<span class="comment">//每个建筑物节点的位置</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;Road&gt; adjacent;<span class="comment">//与节点相邻的路的vector</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_ad</span><span class="params">(Road* r)</span></span>;</span><br><span class="line">    Building(<span class="keyword">void</span>);</span><br><span class="line">    ~Building();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Input模块："><a href="#Input模块：" class="headerlink" title="Input模块："></a>Input模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Input</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    Input(<span class="keyword">void</span>);</span><br><span class="line">    ~Input();</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">input_road</span><span class="params">(Road* r)</span></span>;<span class="comment">//输入路径</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">input_buds</span><span class="params">(Building* b,Road* r)</span></span>;<span class="comment">//更新路与建筑进行连接</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">input_map</span><span class="params">(<span class="keyword">void</span>)</span></span>;<span class="comment">//通过map文件输入各地点</span></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">input_vector</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;<span class="comment">//输入相应的节点xy坐标</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">input_string</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Road模块："><a href="#Road模块：" class="headerlink" title="Road模块："></a>Road模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Road</span>&#123;</span><span class="comment">//Road类，每条路有自己的起点终点，拥挤度，是否允许自行车</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Road(<span class="keyword">void</span>);</span><br><span class="line">    ~Road();</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_road</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; start,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; end,<span class="keyword">float</span> jam,<span class="keyword">int</span> type,<span class="keyword">int</span> length)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_time</span><span class="params">(<span class="keyword">bool</span> userbike)</span></span>;<span class="comment">//设定路径通行时间</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; start;<span class="comment">//每条路的起点</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; end;<span class="comment">//每条路的终点</span></span><br><span class="line">    <span class="keyword">float</span> jam=<span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">int</span> type=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">    <span class="keyword">int</span> start_index;<span class="comment">//起始节点和终止节点在节点数组中的下标</span></span><br><span class="line">    <span class="keyword">int</span> end_index;</span><br><span class="line">    <span class="keyword">float</span> time;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="User模块："><a href="#User模块：" class="headerlink" title="User模块："></a>User模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>&#123;</span><span class="comment">//User类，包括用户的起点，终点，行动速度</span></span><br><span class="line">   <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;Road&gt; road;<span class="comment">//路径</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="built_in">array</span>;<span class="comment">//全排列</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pass;<span class="comment">//必经点</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location;<span class="comment">//位置</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; around;<span class="comment">//周围建筑</span></span><br><span class="line">    <span class="keyword">int</span> rate;<span class="comment">//演进速率</span></span><br><span class="line">    <span class="keyword">bool</span> is_arrive;</span><br><span class="line">    User(<span class="keyword">void</span>);<span class="comment">//question</span></span><br><span class="line">    ~User();<span class="comment">//析构函数，释放对象使用的资源，并销毁非static成员。</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_des</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; des)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">get_speed</span><span class="params">(<span class="keyword">int</span> type,<span class="keyword">float</span> jam)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">get_des</span><span class="params">(<span class="keyword">void</span>)</span></span>;<span class="comment">//找到用户自己的定位</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">find_point</span><span class="params">(Building* b,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">find_name</span><span class="params">(<span class="built_in">string</span> name)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">mindistance_way</span><span class="params">(Building* b,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>;<span class="comment">//最短路径算法</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">mintime_way</span><span class="params">(Building* b,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>;<span class="comment">//最短时间算法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pass_way</span><span class="params">(Building* b,<span class="keyword">int</span> start,<span class="keyword">int</span> end,<span class="keyword">int</span> n)</span></span>;<span class="comment">//途径点算法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">renew_locations</span><span class="params">(Building *b,<span class="keyword">int</span> rate,<span class="keyword">int</span> dest_id,<span class="keyword">int</span> road_id)</span></span>;<span class="comment">//返回用户当前位置</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pass,<span class="keyword">int</span> ans)</span></span>;<span class="comment">//求全排列//question</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(Building* b)</span></span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; destination;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span>:</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Student模块："><a href="#Student模块：" class="headerlink" title="Student模块："></a>Student模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">student</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    student();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> Policy;<span class="comment">//策略；用0/1/2/3分别表示四种策略；后期会改为枚举类；</span></span><br><span class="line">    <span class="keyword">bool</span> isStop;<span class="comment">//是否暂停；0表示没有暂停，1表示暂停；</span></span><br><span class="line">    <span class="keyword">bool</span> isGetEnd;<span class="comment">//是否抵达终点</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//算法生成对象</span></span><br><span class="line">    Input input;</span><br><span class="line">    Road roads[<span class="number">200</span>];</span><br><span class="line">    Building buds[<span class="number">200</span>];</span><br><span class="line">    Road *r=roads;</span><br><span class="line">    Building *b=buds;</span><br><span class="line"></span><br><span class="line">    User user;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//student的公共方法</span></span><br><span class="line">    <span class="comment">//当前坐标的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPositionX</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPositionY</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getPositionX</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getPositionY</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="comment">//起点与终点的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setStart</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setDestination</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getStart</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getDestination</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="comment">//途经点，仅在相应策略下生效</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setStations</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; station)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">getStations</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//规划路径</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPath</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">getPath</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//速度的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setSpeed</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSpeed</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//从user中获取数据</span></span><br><span class="line">    <span class="comment">//获取Path</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//当前坐标</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">    <span class="comment">//路径信息</span></span><br><span class="line">    <span class="comment">//起点与终点；整型；表示建筑物在building表中的下标</span></span><br><span class="line">    <span class="keyword">int</span> start;</span><br><span class="line">    <span class="keyword">int</span> destination;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; station;</span><br><span class="line">    <span class="comment">//路径</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path;</span><br><span class="line">    <span class="comment">//速度</span></span><br><span class="line">    <span class="keyword">int</span> speed_level;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="前端划分为drawingwidget、horizonespinbox、wiget等模块"><a href="#前端划分为drawingwidget、horizonespinbox、wiget等模块" class="headerlink" title="前端划分为drawingwidget、horizonespinbox、wiget等模块"></a>前端划分为drawingwidget、horizonespinbox、wiget等模块</h4><h5 id="horizonespinbox模块："><a href="#horizonespinbox模块：" class="headerlink" title="horizonespinbox模块："></a>horizonespinbox模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HorizoneSpinBox</span> :</span> <span class="keyword">public</span> QWidget&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">HorizoneSpinBox</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~HorizoneSpinBox();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValue</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::HorizoneSpinBox *ui;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="wiget模块："><a href="#wiget模块：" class="headerlink" title="wiget模块："></a>wiget模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> :</span> <span class="keyword">public</span> QWidget&#123;</span><br><span class="line"><span class="comment">//各个按钮功能信号；暂时保留不用；</span></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_preview</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_pauseAndContinue</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_reset</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_start</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Widget(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~Widget();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//成员</span></span><br><span class="line">    <span class="comment">//draw_map中的stu</span></span><br><span class="line">    student *stu;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置导航信息</span></span><br><span class="line">    <span class="comment">//设置起点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setDeparture</span><span class="params">(<span class="keyword">int</span> departure_id)</span></span>;</span><br><span class="line">    <span class="comment">//设置终点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setDestination</span><span class="params">(<span class="keyword">int</span> destination_id)</span></span>;</span><br><span class="line"><span class="comment">//    //途经点功能后续添加</span></span><br><span class="line"><span class="comment">//    void setStation(std::vector&lt;int&gt; Station);</span></span><br><span class="line">    <span class="comment">//设置速度</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setSpeed</span><span class="params">(<span class="keyword">int</span> speed_level)</span></span>;</span><br><span class="line">    <span class="comment">//设置规划策略</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPolicy</span><span class="params">(<span class="keyword">int</span> policy_id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//按钮功能实现</span></span><br><span class="line">    <span class="comment">//预览</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">preview</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//暂停</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pauseAndContinue</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//重置</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">reset</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//开始导航</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">start</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="drawingwidget模块："><a href="#drawingwidget模块：" class="headerlink" title="drawingwidget模块："></a>drawingwidget模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">drawingwidget</span> :</span> <span class="keyword">public</span> QWidget&#123;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_updateMap</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">drawingwidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~drawingwidget();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//学生</span></span><br><span class="line">    student stu;</span><br><span class="line">    <span class="comment">//地图</span></span><br><span class="line">    QImage ShaHe, XiTuCheng;</span><br><span class="line">    <span class="comment">//绘图定时器</span></span><br><span class="line">    QTimer *drawMapTimer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//用于</span></span><br><span class="line">    <span class="comment">//标准绘图事件的重载</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">paintEvent</span><span class="params">(QPaintEvent *event)</span></span>;</span><br><span class="line">    <span class="comment">//“预览”绘图事件</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">previewEvent</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//“开始导航”绘图事件</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">startEvent</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标事件 用于测试</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">mousePressEvent</span><span class="params">(QMouseEvent *event)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::drawingwidget *ui;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="数据结构说明和数据字典："><a href="#数据结构说明和数据字典：" class="headerlink" title="数据结构说明和数据字典："></a>数据结构说明和数据字典：</h3><h4 id="Input及Main模块中"><a href="#Input及Main模块中" class="headerlink" title="Input及Main模块中:"></a>Input及Main模块中:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Map</span>&#123;</span>    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location;    <span class="built_in">string</span> name;&#125;Map;<span class="comment">/*自定义结构体map，用来存储地图数据，包括坐标location和建筑物的名字name；主要使用Vector来记录存储路径数据，和坐标数据 ；如用户当前位置的坐标就用 vector&lt;int&gt; location表示*/</span></span><br></pre></td></tr></table></figure>
<h4 id="Building模块中"><a href="#Building模块中" class="headerlink" title="Building模块中:"></a>Building模块中:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location;<span class="comment">//每个建筑物节点的位置    vector&lt;Road&gt; adjacent;//与节点相邻的路的vector</span></span><br></pre></td></tr></table></figure>
<h4 id="Road模块中"><a href="#Road模块中" class="headerlink" title="Road模块中:"></a>Road模块中:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; start;<span class="comment">//每条路的起点    vector&lt;int&gt; end;//每条路的终点</span></span><br></pre></td></tr></table></figure>
<h4 id="User模块中"><a href="#User模块中" class="headerlink" title="User模块中:"></a>User模块中:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Road&gt; road;<span class="comment">//路径    vector&lt;vector&lt;int&gt; &gt; array;//全排列    vector&lt;int&gt; pass;//必经点    vector&lt;int&gt; location;//位置    vector&lt;int&gt; around;//周围建筑</span></span><br></pre></td></tr></table></figure>
<h3 id="各模块设计说明："><a href="#各模块设计说明：" class="headerlink" title="各模块设计说明："></a>各模块设计说明：</h3><p>​        为了便于程序的设计和编写，我们将导入的地图数据存入对象数组，包括Road类，Building类。在程序中当我们需要引用地图数据时，我们传递的参数是该建筑节点或该道路在其对象数组中的下标，不是其本身。同时我们定义指针指向Road和Building数组，方便对数组中对象进行引用和修改，所有有需要的函数都可以要求获得两个指针作为参数引入函数。</p>
<h4 id="Input模块：-1"><a href="#Input模块：-1" class="headerlink" title="Input模块："></a>Input模块：</h4><p>算法思想：使用文件流读入TXT文件中存储的地图数据和道路数据，并将相关数组结构进行赋值初始化；</p>
<p>特点：定义了地图数据的输入类，一切地图数据都通过该类从文件读入到程序中；</p>
<h4 id="Building模块：-1"><a href="#Building模块：-1" class="headerlink" title="Building模块："></a>Building模块：</h4><p>特点：定义了建筑物节点类，将建筑物相关信息在类中定义，在实例化的对象中存储相关信息，如建筑物节点的坐标，与建筑物相连的道路等；</p>
<h4 id="Road模块：-1"><a href="#Road模块：-1" class="headerlink" title="Road模块："></a>Road模块：</h4><p>特点：定义了Road类，实例化对象中存储道路的长度，拥挤度，终点，起点等信息；</p>
<h4 id="User模块：-1"><a href="#User模块：-1" class="headerlink" title="User模块："></a>User模块：</h4><h5 id="导航策略一："><a href="#导航策略一：" class="headerlink" title="导航策略一："></a>导航策略一：</h5><h6 id="算法思想："><a href="#算法思想：" class="headerlink" title="算法思想："></a>算法思想：</h6><p>以dijastra算法为基础，其中最短路径的算法是以道路的长度为权重，计算出最短路径，并且在算法中记录最短路径节点；指定起点s，即从顶点s开始计算。</p>
<p>引进两个集合S和U。</p>
<p>S：记录已求出最短路径的顶点(以及相应的最短路径长度)，</p>
<p>U：记录还未求出最短路径的顶点(以及该顶点到起点s的距离)。</p>
<p>-初始时，S中只有起点s；U中是除s之外的顶点。U中顶点的路径是”起点s到该顶点的路径”。然后，从U中找出路径最短的顶点v，并将其加入到S中。</p>
<p>-更新U中的顶点（及顶点对应的路径）。 然后，再从U中找出路径最短的顶点，并将其加入到S中。</p>
<p>… 重复该操作，直到遍历完所有顶点。</p>
<p>同时，为了存储最短路径上的各个节点，我们设置了beyond数组来存储到每个节点的最短路径中，到该节点的前一个节点的坐标；这样，当我们执行完算法后，得到终点的下标，再根据beyond数组，我们通过循环可以一步步得到，这条路径上所经历的节点下标。并且，我们在该函数中添加了一个关于导航策略type的判断，如果是带途经点的策略，那么每次执行该程序时用户的way，road路径数据不会被清空，以便储存带有途经点的多段路径的组合。</p>
<h6 id="算法："><a href="#算法：" class="headerlink" title="算法："></a>算法：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">初始化way[]，beyond[]，distance[],start,endWay[<span class="number">0</span>]=start,k=<span class="number">0</span>;While（<span class="literal">true</span>）&#123;以way[]中为可达点，更新各点到start的距离，distance[];选出距离最短点temp入数组way[];beyond[temp]=way[k]k++;If(temp=end)<span class="keyword">break</span>;&#125;</span><br></pre></td></tr></table></figure>


<h5 id="最短时间算法："><a href="#最短时间算法：" class="headerlink" title="最短时间算法："></a><strong>最短时间算法</strong>：</h5><h6 id="算法思想：-1"><a href="#算法思想：-1" class="headerlink" title="算法思想："></a>算法思想：</h6><p>算法思想与策略一类似，只是以通过每条道路的时间位权重，计算出最短时间，而道路的最短时间是与道路的长度，拥挤度，以及用户的速度相关的。</p>
<h6 id="算法：-1"><a href="#算法：-1" class="headerlink" title="算法："></a>算法：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">初始化way[]，beyond[]，time[],start,endWay[<span class="number">0</span>]=start,k=<span class="number">0</span>;While（<span class="literal">true</span>）&#123;以way[]中为可达点，更新各点到start的时间，time[];选出耗时最短点temp入数组way[];beyond[temp]=way[k]k++;If(temp=end)<span class="keyword">break</span>;&#125;</span><br></pre></td></tr></table></figure>


<h5 id="有途径点的最短路策略："><a href="#有途径点的最短路策略：" class="headerlink" title="有途径点的最短路策略："></a><strong>有途径点的最短路策略：</strong></h5><h6 id="算法思想：-2"><a href="#算法思想：-2" class="headerlink" title="算法思想："></a>算法思想：</h6><p>用户名先将必经点传入规定的数组，并传入起点和终点。算法思想是，将路径分为三个部分，从起点到第一个必经点，从第一个必经点通过所有必经点到最后一个必经点，从最后一个必经点到终点。我们先将这三部分的可能的最短路径长度都求出来，然后再分别搭配组合，得到最短路径。</p>
<p>具体实现为，先用深度优先搜索算法求出必经点的全排列，因为我们最终求得的路径的第二部分，必然是全排列中的一种，然后将这些全排列的路径长度都算出来。之后，再计算出每个必经点到终点和起点的最短路径长度，最后对于所有的全排列进行三段路径长度相加，比较，得到最短路径长度。得到最短路径长度后，我们存储该种排列在全排列数组中的下标，重置用户的way，road路径数据，重新执行一遍从start到排列的第一个建筑，排列中各个建筑之间按顺序，已经排列中最后一个数据到end，所有这些的min_distance()，得到路径组合，由于上一段路的终点和这一段路的起点会重复出现，所以我们也会pop_back()这些重复的点。</p>
<h6 id="算法：-2"><a href="#算法：-2" class="headerlink" title="算法："></a>算法：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">初始化必经点pass[], 必经点数目n,全排列<span class="built_in">array</span>[][]Dfs(i):Ans=i;If(i==n)<span class="built_in">array</span>.push_back(pass),<span class="keyword">return</span>;While（ans&lt;=n）&#123;	Pass[i]&lt;==&gt;pass[ans]	Ans++	dfs(i+<span class="number">1</span>)	pass[i]&lt;==&gt;pass[ans]	ans++&#125;求最短路径：初始化<span class="keyword">int</span> dis[n][n];<span class="comment">//各点之间的距离int pre[n];//开始到各必经点距离int after[n];//必经点到结束距离for(i=0-&gt;n;j=0-&gt;n)&#123;	dis[i][j]=mindistance(pass[i],pass[j])&#125;for(i=0-&gt;n)&#123;	pre[i]= mindistance(start,pass[i])&#125;for(i=0-&gt;n)&#123;    after[i]= mindistance(start,pass[i])&#125;for(i=0-&gt;n;j=0-&gt;n)&#123;	length=min(pre[i]+dis[i][j]+after[j])&#125;</span></span><br></pre></td></tr></table></figure>


<h5 id="导航策略四："><a href="#导航策略四：" class="headerlink" title="导航策略四："></a>导航策略四：</h5><h6 id="算法思想：-3"><a href="#算法思想：-3" class="headerlink" title="算法思想："></a>算法思想：</h6><p>与导航策略二类似。为了区分这两种策略，我们在选择策略这两种策略时，会根据策略的不同，对道路的拥挤度，以及用户在该条道路上的速度做不同的初始化（用户是否能骑自行车导致速度不同）。</p>
<h6 id="算法：-3"><a href="#算法：-3" class="headerlink" title="算法："></a>算法：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">初始化way[]，beyond[]，time[],start,end,道路road[]<span class="keyword">for</span>(i=<span class="number">0</span>-&gt;n)&#123;	<span class="keyword">if</span>(road[i].type==自行车)｛	road[i].time/=<span class="number">2</span>	｝&#125;Way[<span class="number">0</span>]=start,k=<span class="number">0</span>;While（<span class="literal">true</span>）&#123;	以way[]中为可达点，更新各点到start的时间，time[];	选出耗时最短点temp入数组way[];	beyond[temp]=way[k]	k++;	If(temp=end)<span class="keyword">break</span>;&#125;</span><br></pre></td></tr></table></figure>


<h5 id="对于位置更新的函数："><a href="#对于位置更新的函数：" class="headerlink" title="对于位置更新的函数："></a>对于位置更新的函数：</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renew_location(Building *b,<span class="keyword">int</span> rate)</span><br></pre></td></tr></table></figure>
<h6 id="算法思想：-4"><a href="#算法思想：-4" class="headerlink" title="算法思想："></a>算法思想：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">算法思想：当用户选择策略之后，程序执行完相关算法，得到最短路径之后，为了在图形界面上呈现用户位置变化的动画，通过该函数来更新用户的位置location；根据用户的速度，是否骑自行车等设置用户每次位置变化的数值，同时根据用户路径上每条路的起点和终点坐标，按照比例来变化用户坐标的x,y值，确保用户坐标一直在道路上；同时，当用户已经到当前道路的终点时，变换到下一条道路；算法：根据用户速度设置初始值change，道路长度dis；x_change=change*(location2[<span class="number">0</span>]-location[<span class="number">0</span>])/dis;y_change=change*(location2[<span class="number">1</span>]-location[<span class="number">1</span>])/dis;<span class="keyword">if</span>(location超过该道路终点位置)=&gt;road_id++;location=该道路终点位置</span><br></pre></td></tr></table></figure>


<p>对于查询周围建筑物函数：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search(Building* b)find_distance(Building* b,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span><br></pre></td></tr></table></figure>
<h6 id="算法思想：-5"><a href="#算法思想：-5" class="headerlink" title="算法思想："></a>算法思想：</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在一定范围内查询用户周围的建筑物，并用最短路算法求出最短路的长度，将相应建筑物的下标，最短距离分别存储；如果想要得到到某建筑的具体的最短路径，则再调用一遍find_distance(Building* b,<span class="keyword">int</span> start,<span class="keyword">int</span> end)函数，最短路径结果存在user中:<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp_way;<span class="comment">//查询时用到的暂存储路径建筑下标的数组vector&lt;int&gt; temp_length;//查询使用到的暂时存储距离的数组vector&lt;int&gt; around;//周围建筑为了防止与查询结果与用户当前导航路径相冲突，我们设置了以上三个向量来存储相关结果；并且由于用户用鼠标点击建筑物，来作为途经点，产生的坐标会有些许误差，我们还设计了find_Building函数来消除这些误差，确保途经点准确无误地被程序接收。</span></span><br></pre></td></tr></table></figure>


<h3 id="测试情况说明："><a href="#测试情况说明：" class="headerlink" title="测试情况说明："></a>测试情况说明：</h3><h3 id="评价和改进意见："><a href="#评价和改进意见：" class="headerlink" title="评价和改进意见："></a>评价和改进意见：</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/03/%E8%AE%A1%E7%BD%91%E8%AF%BE%E8%AE%BE%E6%96%87%E6%A1%A3/" data-id="ckq2c2d5f0006lsv00d8u40w7" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-数据结构实验报告" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/02/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/" class="article-date">
  <time class="dt-published" datetime="2021-06-02T09:59:52.741Z" itemprop="datePublished">2021-06-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <table>
        <tr>
        <th colspan = "6"> <div align='center' ><font size='6'>数据结构实验报告</font></div>
</th>
        </tr>
    <tr>
        <th> 课程设计名称</th>
        <th> 数据结构课程设计</th>
        <th> 学 院 </th>
        <th> 计算机 </th>
        <th> 指导教师 </th>
        <th> 杨震 </th>
        </tr>
    <tr>
        <th> 班级</th>
        <th> 班内序号</th>
        <th>学号</th>
        <th>学生姓名</th>
        <th colspan = "2">成绩</th>
    </tr>
        <td> 2019211309 </td>
        <td> 14 </td >
        <td> 2019211408 </td >
        <td> 李康童 </td >
        <th colspan = "2"></th>
    </tr>
        <td> 2019211309 </td>
        <td> 10 </td >
        <td> 2019211404 </td >
        <td> 戎惠强 </td >
        <th colspan = "2"></th>
    </tr>
        <th> 课程设计内容 </th>
        <td colspan = "5">简要介绍课程设计的主要内容，包括课程设计教学目的、  基本内容、实验方法和团队分工等  <br/>一、设计任务基本内容：<br/>    校园中有众多的建筑物和道路，且学校有多个校区（至少2个）；某位同学于某一时刻向系统提出导航要求，系统根据该同学的要求为其设计一条线路并输出；系统能查询当前时刻同学所处的地点和周围的教学楼、宿舍楼、餐饮、后勤服务、操场等信息。  <br/>二、实验方法：<br/>使用Qt搭建前端，使用C++创建后端，两者整合，得到导航的图形界面<br/>三、团队分工：<br/>李康童负责后端算法，戎惠强负责编写文档和日志部分，两人共同负责前端的构建</td> </td >
    </tr>
        <th> 学生课程设计报告（附页）</th>
        <td colspan = "5"> </td >
    </tr>
        <th> 课程设计成绩判定 </th>
        <th colspan = "5">评语: <br/>成绩：<br/>指导教师签名：      <br/>年    月     日</th>
    </tr>
</table>



<h5 id="注：评语要体现每个学生的工作情况，可以加页。"><a href="#注：评语要体现每个学生的工作情况，可以加页。" class="headerlink" title="注：评语要体现每个学生的工作情况，可以加页。"></a>注：评语要体现每个学生的工作情况，可以加页。</h5><p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>
<h2 id="学生课程设计报告目录："><a href="#学生课程设计报告目录：" class="headerlink" title="学生课程设计报告目录："></a>学生课程设计报告目录：</h2><p>一、功能需求说明及分析———————————————————–-—————————–4</p>
<p>二、编写环境————————————————————————--——————————4</p>
<p>​     （一）软件环境————————————————————————————————-5</p>
<p>​     （二）硬件环境————————————————————————————————-5</p>
<p>三、模块划分——————————————————————————————————–5</p>
<p>​     （一）后端划分————————————————————————————————-5</p>
<p>​                  1、User模块——————————————————————————————-5</p>
<p>​                  2、Input模块——————————————————————————————6</p>
<p>​                  3、Building模块————————————————————————————–6</p>
<p>​                  4、Road模块—————————————————————————————–6</p>
<p>​                  5、Log模块——————————————————————————————–6</p>
<p>​     （二）前端划分————————————————————————————————7</p>
<p>​                  1、widget模块—————————————————————————————-7</p>
<p>​                  2、drawingwidget模块—————————————————————————-8</p>
<p>​                  3、horizonespinbox模块————————————————————————-9</p>
<p>​                  4、student模块————————————————————————————–9</p>
<p>四、模块调用————————————————————————--——————————11</p>
<p>​     （一）算法模块调用——————————————————————————————-11</p>
<p>​     （二）GUI模块调用——————————————————————————————–11</p>
<p>五、数据结构说明和数据字典———————————————————————————-11</p>
<p>​                  1、Input及Main模块——————————————————————————–11</p>
<p>​                  2、User模块中—————————————————————————————-11</p>
<p>​                  3、Building模块中———————————————————————————–12</p>
<p>​                  4、Road模块中—————————————————————————————12</p>
<p>​                  5、Student模块中———————————————————————————–12</p>
<p>六、各模块设计说明———————————————————————————————–13</p>
<p>​                  1、User模块——————————————————————————————-13</p>
<p>​                  2、Input模块——————————————————————————————16</p>
<p>​                  3、Building模块————————————————————————————–17</p>
<p>​                  4、Road模块——————————————————————————————17</p>
<p>​                  5、Log模块———————————————————————————————17</p>
<p>​                  6、widget模块—————————————————————————————-17</p>
<p>​                  7、drawingwidget模块—————————————————————————-17</p>
<p>​                  8、horizonespinbox模块————————————————————————-17</p>
<p>​                  9、student模块—————————————————————————————17</p>
<p>七、测试情况与功能说明—————————————————————————————-18</p>
<p>八、用户使用手册 ————————————————————————————————-22</p>
<p>九、评价与改进意见———————————————————————————————-23</p>
<p>十、实验总结————————————————————————-——————————23</p>
<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>
<h3 id="一、功能需求说明及分析："><a href="#一、功能需求说明及分析：" class="headerlink" title="一、功能需求说明及分析："></a>一、功能需求说明及分析：</h3><p> 1.校园内建筑物（教学楼、办公楼、宿舍楼）数不少于20个，其它服务设施      不少于5种，共20个； </p>
<p> 2.建立校园内部道路图  -包括各种建筑物、服务设施等信息；</p>
<p>​       -不能太简单（边数不能少于200条）</p>
<p>​       -校区个数至少2个 </p>
<p> 3.学生的导航要求包括：起点、终点和导航策略。</p>
<p>​       -起点和终点可以是物理位置，也可以是逻辑位置；所谓物理地址如：教三楼111教室；所谓逻辑地址如：2019211306班-数据结构课-周五10点，或者2019211306班-数据结构课-考场，或者食堂等 </p>
<p>​       -逻辑位置可以和物理位置一对一，比如2019211311班-数据结构课-周五10点对应教三111教室，也可以是一对多，比如食堂对应一食堂、二食堂等；</p>
<p>​       -起点和终点可以在不同校区，需要考虑校区间的交通方式。</p>
<p>  4.校区间的交通方式为：定点班车（可以自行规划班次时刻表）和公共汽车（可等间隔发车）； </p>
<p>  5.导航策略有：（前三种策略默认校区内步行，第四种，校区内可选交通工具） </p>
<p>​       最短距离策略：距离最短即可； </p>
<p>​       最短时间策略：假设每条道路拥挤度不一样，在这种情况下时间最短即可；拥挤度为小于等于1的一个正数，真实速度=拥挤度*理想速度；拥挤度与理想速度自拟；  </p>
<p>​       途径最短距离策略：途径某些地点的最短距离；交通工具的最短时间策略：校区内选择自行车时，只能走自行车道路，默认自行车在校区任何地点都有，这时在考虑不同拥挤度的情况下时间最短；</p>
<p>  6.查询系统可以基于PC机开发，要能模拟学生在校园中按照给定线路的行走过程。</p>
<p>  7.模拟导航系统以时间为轴向前推移，比如：每5或10秒左右向前推进1分钟；</p>
<p>  8.系统时间精确到分钟；</p>
<p>  9.建立日志文件，对学生状态变化和键入等信息进行记录</p>
<p>  10.学生选定路线后，会在模拟导航系统中按照路线和设定好的行进速度行进；</p>
<p>  11.学生可以实时查询自己所处的位置，能够查询周围的教学楼、学生宿舍和其他服务设施；系统需要给出一定范围内的教学楼（范围多大自拟）、学生宿舍和其他服务设施，并标出到这些目标的距离最短路线的       距离；如果用户选定某一个目标可以给出距离最短路线。</p>
<p>​    选做一：某同学在行走途中可更改目标和导航策略，系统按照当前位置做相应的操作；  </p>
<p>​    选做二：用图形绘制地图，并在地图上进行实时导航  <strong>(完成)</strong></p>
<p>​    选做三：在教学楼和宿舍楼中进行导航，能够导航到具体的楼层和房间；  </p>
<p>​    选做四：能够根据食堂的人流量进行负载均衡导航；**(完成)**  </p>
<p>​    选做五：实现支持多用户的系统，可以实时查询任一用户状态；</p>
<h3 id="二、编写环境："><a href="#二、编写环境：" class="headerlink" title="二、编写环境："></a>二、编写环境：</h3><h4 id="软件环境："><a href="#软件环境：" class="headerlink" title="软件环境："></a>软件环境：</h4><p>搭载了微软Windows10操作系统的笔记本电脑；</p>
<h4 id="硬件环境："><a href="#硬件环境：" class="headerlink" title="硬件环境："></a>硬件环境：</h4><p>Visual Studio 2017集成开发环境和Qt creator。</p>
<h3 id="三、模块划分："><a href="#三、模块划分：" class="headerlink" title="三、模块划分："></a>三、模块划分：</h3><h4 id="后端划分为User、Input、Building、Road、Log等模块"><a href="#后端划分为User、Input、Building、Road、Log等模块" class="headerlink" title="后端划分为User、Input、Building、Road、Log等模块"></a>后端划分为User、Input、Building、Road、Log等模块</h4><h5 id="User模块："><a href="#User模块：" class="headerlink" title="User模块："></a>User模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>&#123;</span><span class="comment">//User类，包括用户的起点，终点，行动速度</span></span><br><span class="line">   <span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">/******交互成员********/</span></span><br><span class="line">    <span class="comment">//待传入数据</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pass;<span class="comment">//必经点</span></span><br><span class="line">    <span class="keyword">int</span> rate;<span class="comment">//演进速率</span></span><br><span class="line">    <span class="keyword">int</span> type;<span class="comment">//导航策略</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">choose</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end,<span class="keyword">int</span> type,<span class="keyword">int</span> current_map)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">find_building</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> currentMap)</span></span>;<span class="comment">//用户点击选择必经点</span></span><br><span class="line">    Building *b;</span><br><span class="line">    Road* r;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_area</span><span class="params">(Building *b,Road* r)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//规划结果</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;Road&gt; road;<span class="comment">//路径向量</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; way;<span class="comment">//建筑物下标向量</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location;<span class="comment">//位置坐标</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; destination;<span class="comment">//目的地坐标</span></span><br><span class="line">    <span class="keyword">bool</span> is_arrive;<span class="comment">//抵达终点标志</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">renew_locations</span><span class="params">(<span class="keyword">int</span> rate)</span></span>;<span class="comment">//返回用户当前位置</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">get_renew_times</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> location_id;<span class="comment">//当前位置节点下标</span></span><br><span class="line">    <span class="keyword">int</span> destination_id;<span class="comment">//本次规划目的地节点下标</span></span><br><span class="line">    <span class="keyword">int</span> renew_times;<span class="comment">//更新次数</span></span><br><span class="line">    <span class="keyword">int</span> length;<span class="comment">//路径长度</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询结果</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp_way;<span class="comment">//查询temp_时用到的暂时存储路径建筑下标的数组</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp_length;<span class="comment">//查询使用到的暂时存储距离的数组</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; around;<span class="comment">//周围建筑</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> currentMap)</span></span>;<span class="comment">//查询周围建筑</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">find_distance</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>;<span class="comment">//当前位置到某指定节点距离</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/****非交互成员***/</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="built_in">array</span>;<span class="comment">//全排列</span></span><br><span class="line">    <span class="keyword">int</span> dest_id;</span><br><span class="line">    <span class="keyword">int</span> road_id;</span><br><span class="line">    User(<span class="keyword">int</span> location_id,<span class="keyword">int</span> destination_id);<span class="comment">//构造函数</span></span><br><span class="line">    ~User();<span class="comment">//析构函数</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_des</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; des)</span></span>;<span class="comment">//改变用户终点</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">mindistance_way</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end,<span class="keyword">int</span> type)</span></span>;<span class="comment">//最短路径策略</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">mintime_way</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>;<span class="comment">//最短时间策略</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">pass_way</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end,<span class="keyword">int</span> n)</span></span>;<span class="comment">//途经点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pass,<span class="keyword">int</span> ans)</span></span>;<span class="comment">//求全排列</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_road</span><span class="params">(<span class="keyword">int</span> type)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Input模块："><a href="#Input模块：" class="headerlink" title="Input模块："></a>Input模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Input</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    Input(<span class="keyword">void</span>);</span><br><span class="line">    ~Input();</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">input_road</span><span class="params">(Road* r)</span></span>;<span class="comment">//输入路径</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">input_buds</span><span class="params">(Building* b,Road* r)</span></span>;<span class="comment">//更新路与建筑进行连接</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">input_map</span><span class="params">(<span class="keyword">void</span>)</span></span>;<span class="comment">//通过map文件输入各地点</span></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">input_vector</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;<span class="comment">//输入相应的节点xy坐标</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">input_string</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Building模块："><a href="#Building模块：" class="headerlink" title="Building模块："></a>Building模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Building</span>&#123;</span><span class="comment">//将每个建筑物视为一个节点，有其位置，并存储与其相连的路有哪些</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location;<span class="comment">//每个建筑物节点的位置</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;Road&gt; adjacent;<span class="comment">//与节点相邻的路的vector</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_ad</span><span class="params">(Road* r)</span></span>;</span><br><span class="line">    Building(<span class="keyword">void</span>);</span><br><span class="line">    ~Building();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Road模块："><a href="#Road模块：" class="headerlink" title="Road模块："></a>Road模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Road</span>&#123;</span><span class="comment">//Road类，每条路有自己的起点终点，拥挤度，是否允许自行车</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Road(<span class="keyword">void</span>);</span><br><span class="line">    ~Road();</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_road</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; start,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; end,<span class="keyword">float</span> jam,<span class="keyword">int</span> type,<span class="keyword">int</span> length)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_time</span><span class="params">(<span class="keyword">bool</span> userbike)</span></span>;<span class="comment">//设定路径通行时间</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; start;<span class="comment">//每条路的起点</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; end;<span class="comment">//每条路的终点</span></span><br><span class="line">    <span class="keyword">float</span> jam=<span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">int</span> type=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">    <span class="keyword">int</span> start_index;<span class="comment">//起始节点和终止节点在节点数组中的下标</span></span><br><span class="line">    <span class="keyword">int</span> end_index;</span><br><span class="line">    <span class="keyword">float</span> time;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Log模块："><a href="#Log模块：" class="headerlink" title="Log模块："></a>Log模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myMessageOutput</span><span class="params">(QtMsgType type, <span class="keyword">const</span> QMessageLogContext &amp;context, <span class="keyword">const</span> QString &amp;msg)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="前端划分为wiget、drawingwidget、horizonespinbox、Student等模块"><a href="#前端划分为wiget、drawingwidget、horizonespinbox、Student等模块" class="headerlink" title="前端划分为wiget、drawingwidget、horizonespinbox、Student等模块"></a>前端划分为wiget、drawingwidget、horizonespinbox、Student等模块</h4><h5 id="wiget模块："><a href="#wiget模块：" class="headerlink" title="wiget模块："></a>wiget模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//各个按钮功能信号；暂时保留不用；</span></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_preview</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_pauseAndContinue</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_reset</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_start</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~Widget();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//成员</span></span><br><span class="line">    <span class="comment">//draw_map中的stu</span></span><br><span class="line">    student * stu;</span><br><span class="line">    <span class="comment">//draw_map中的drawMapTimer</span></span><br><span class="line">    QTimer * Timer;</span><br><span class="line">    <span class="comment">//非法输入检测结果</span></span><br><span class="line">    <span class="keyword">char</span> errorType = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//起点引用</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;QComboBox *&gt; departure;</span><br><span class="line">    <span class="comment">//终点引用</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;QComboBox *&gt; destination;</span><br><span class="line">    <span class="comment">//途经点引用</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;QComboBox *&gt; station;</span><br><span class="line">    <span class="comment">//起点校区、终点校区</span></span><br><span class="line">    <span class="keyword">int</span> departure_map, destination_map;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置导航信息</span></span><br><span class="line">    <span class="comment">//设置起点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setDeparture</span><span class="params">(<span class="keyword">int</span> departure_id)</span></span>;</span><br><span class="line">    <span class="comment">//设置终点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setDestination</span><span class="params">(<span class="keyword">int</span> destination_id)</span></span>;</span><br><span class="line">    <span class="comment">//途经点</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setStation</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//设置速度</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setSpeed</span><span class="params">(<span class="keyword">int</span> speed_level)</span></span>;</span><br><span class="line">    <span class="comment">//设置规划策略</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPolicy</span><span class="params">(<span class="keyword">int</span> policy_id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//按钮功能实现</span></span><br><span class="line">    <span class="comment">//预览</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">preview</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//暂停</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pauseAndContinue</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//重置</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">reset</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//开始导航</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">start</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//搜索</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//状态处理</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">isArrived</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//非法输入检测</span></span><br><span class="line">    <span class="function"><span class="keyword">char</span> <span class="title">isIllegal</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="comment">//非法输入警告</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inputWarning</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> )</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//其他操作</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setComboBoxText</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::Widget *ui;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="drawingwidget模块："><a href="#drawingwidget模块：" class="headerlink" title="drawingwidget模块："></a>drawingwidget模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">drawingwidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Signal_updateMap</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">drawingwidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~drawingwidget();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//一个标志;用于paintEvent重复规划的问题</span></span><br><span class="line">    <span class="keyword">bool</span> isPreview;</span><br><span class="line">    <span class="comment">//一个标志；可省去stu.getPath()的不必要调用</span></span><br><span class="line">    <span class="keyword">bool</span> isPlanned;</span><br><span class="line">    <span class="comment">//一个标志；用于启用鼠标事件中添加途经点功能</span></span><br><span class="line">    <span class="keyword">bool</span> enableAddStation = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//一个标志; 在跨校区导航中判断是否已经切换了校区</span></span><br><span class="line">    <span class="keyword">bool</span> ChangedMap = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//一个标志; 判定查询状态</span></span><br><span class="line">    <span class="keyword">bool</span> isInsearch = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//一个标志; 判定查询选定状态</span></span><br><span class="line">    <span class="keyword">bool</span> chosenToSearch = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//学生</span></span><br><span class="line">    student stu;</span><br><span class="line">    <span class="comment">//地图</span></span><br><span class="line">    QImage ShaHe, XiTuCheng;</span><br><span class="line">    <span class="comment">//地图数组</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;QImage&gt; <span class="built_in">map</span>;</span><br><span class="line">    <span class="comment">//绘图定时器</span></span><br><span class="line">    QTimer * drawMapTimer;</span><br><span class="line">    <span class="comment">//主窗口widget中建筑物文本的引用</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;QComboBox *&gt; stationComboBox;</span><br><span class="line">    <span class="comment">//Widget-&gt;ui-&gt;textbrowser的引用</span></span><br><span class="line">    QTextBrowser * browser;</span><br><span class="line">    <span class="comment">//Widget-&gt;ui-&gt;choose_map的引用</span></span><br><span class="line">    QComboBox * choose_map;</span><br><span class="line">    <span class="comment">//Widget-&gt;ui-&gt;timeNow的引用</span></span><br><span class="line">    QTimeEdit * time;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//用于标准绘图事件的重载</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">paintEvent</span><span class="params">(QPaintEvent *event)</span></span>;</span><br><span class="line">    <span class="comment">//“预览”绘图事件</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">previewEvent</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="comment">//“开始导航”绘图事件</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">startEvent</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标事件</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">mousePressEvent</span><span class="params">(QMouseEvent *event)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    //节点构造函数，用于构造地图</span></span><br><span class="line"><span class="comment">//    int constructNodes(int x, int y);</span></span><br><span class="line"><span class="comment">//    int nodeSequence = 0;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::drawingwidget *ui;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="horizonespinbox模块："><a href="#horizonespinbox模块：" class="headerlink" title="horizonespinbox模块："></a>horizonespinbox模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HorizoneSpinBox</span> :</span> <span class="keyword">public</span> QWidget&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">HorizoneSpinBox</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~HorizoneSpinBox();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValue</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::HorizoneSpinBox *ui;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Student模块："><a href="#Student模块：" class="headerlink" title="Student模块："></a>Student模块：</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    student();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//student的公共成员</span></span><br><span class="line">    <span class="comment">//策略；用0/1/2/3分别表示四种策略；后期会改为枚举类；</span></span><br><span class="line">    <span class="keyword">int</span> Policy;</span><br><span class="line">    <span class="comment">//是否暂停；0表示没有暂停，1表示暂停；</span></span><br><span class="line">    <span class="keyword">bool</span> isStop = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//是否离开起点校区</span></span><br><span class="line">    <span class="keyword">bool</span> departureMap_finished = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//是否抵达终点</span></span><br><span class="line">    <span class="keyword">bool</span> isArrived = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//当前所在校区</span></span><br><span class="line">    <span class="keyword">int</span> currentMap;</span><br><span class="line">    <span class="comment">//起点校区、终点校区</span></span><br><span class="line">    <span class="keyword">int</span> departure_map, destination_map;</span><br><span class="line">    <span class="comment">//逻辑位置映射数组</span></span><br><span class="line">    <span class="keyword">int</span> logical[<span class="number">2</span>][<span class="number">3</span>] = &#123;&#123;<span class="number">17</span>, <span class="number">14</span>, <span class="number">30</span>&#125;, &#123;<span class="number">19</span>, <span class="number">13</span>, <span class="number">5</span>&#125;&#125;;</span><br><span class="line">    <span class="comment">//花费总时长</span></span><br><span class="line">    <span class="keyword">int</span> timecost = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//出发时间</span></span><br><span class="line">    QTime startTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//算法生成对象</span></span><br><span class="line">    Input input;</span><br><span class="line">    Road road1[<span class="number">200</span>],road2[<span class="number">500</span>];</span><br><span class="line">    Building bud1[<span class="number">200</span>],bud2[<span class="number">200</span>];</span><br><span class="line">    Road * r1 = road1, * r2 = road2;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Road *&gt; r;</span><br><span class="line">    Building * b1 = bud1, * b2 = bud2;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Building *&gt; b;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span> &gt; gate = &#123;<span class="number">73</span>, <span class="number">86</span>&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//user对象成员</span></span><br><span class="line">    User user_shahe = User(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    User user_xitucheng = User(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;User&gt; user;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//student的公共方法</span></span><br><span class="line">    <span class="comment">//当前坐标的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPositionX</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPositionY</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">renewPositionX</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">renewPositionY</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getPositionX</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getPositionY</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//起点与终点的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setStart</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setDestination</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getStart</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getDestination</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//途经点，仅在相应策略下生效</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findStation</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addStation</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setStations</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">getStations</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clearStation</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//规划路径</span></span><br><span class="line">    <span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">renewPath</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">getPath</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//路径长度</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getLength</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setLength</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//速度的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setSpeed</span><span class="params">(<span class="keyword">int</span> )</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSpeed</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//从user中获取数据</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">renewState</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重置student状态</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">resetState</span><span class="params">(<span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//当前坐标</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//路径信息</span></span><br><span class="line">    <span class="comment">//起点与终点；整型；表示建筑物在building表中的下标</span></span><br><span class="line">    <span class="comment">//station 表示途经点下标</span></span><br><span class="line">    <span class="keyword">int</span> start;</span><br><span class="line">    <span class="keyword">int</span> destination;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; station_shahe;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; station_xitucheng;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; station;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//路径</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path_shahe;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path_xitucheng;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; path;</span><br><span class="line">    <span class="keyword">int</span> path_length;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//速度</span></span><br><span class="line">    <span class="keyword">int</span> speed_level;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="四、模块调用："><a href="#四、模块调用：" class="headerlink" title="四、模块调用："></a>四、模块调用：</h3><h4 id="（一）算法模块调用"><a href="#（一）算法模块调用" class="headerlink" title="（一）算法模块调用"></a>（一）算法模块调用</h4><img src="C:\Users\14372\AppData\Roaming\Typora\typora-user-images\image-20210610183848677.png" alt="image-20210610183848677" style="zoom:33%;" />

<h4 id="（二）GUI模块调用"><a href="#（二）GUI模块调用" class="headerlink" title="（二）GUI模块调用"></a>（二）GUI模块调用</h4><img src="C:\Users\14372\Desktop\DS_GUI_lkt\Picture\13.png" alt="13" style="zoom:50%;" />

<h3 id="五、数据结构说明和数据字典："><a href="#五、数据结构说明和数据字典：" class="headerlink" title="五、数据结构说明和数据字典："></a>五、数据结构说明和数据字典：</h3><h4 id="Input及Main模块中"><a href="#Input及Main模块中" class="headerlink" title="Input及Main模块中:"></a>Input及Main模块中:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Map</span>&#123;</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location;</span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">&#125;Map;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">自定义结构体map，用来存储地图数据，包括坐标location和建筑物的名字name；</span></span><br><span class="line"><span class="comment">主要使用Vector来记录存储路径数据，和坐标数据 ；如用户当前位置的坐标就用 vector&lt;int&gt; location表示</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="User模块中"><a href="#User模块中" class="headerlink" title="User模块中:"></a>User模块中:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Road&gt; road;<span class="comment">//路径</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="built_in">array</span>;<span class="comment">//全排列</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pass;<span class="comment">//必经点</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location;<span class="comment">//位置</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; around;<span class="comment">//周围建筑</span></span><br></pre></td></tr></table></figure>
<h4 id="Building模块中"><a href="#Building模块中" class="headerlink" title="Building模块中:"></a>Building模块中:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; location;<span class="comment">//每个建筑物节点的位置</span></span><br><span class="line"><span class="built_in">vector</span>&lt;Road&gt; adjacent;<span class="comment">//与节点相邻的路的vector</span></span><br></pre></td></tr></table></figure>
<h4 id="Road模块中"><a href="#Road模块中" class="headerlink" title="Road模块中:"></a>Road模块中:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; start;<span class="comment">//每条路的起点</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; end;<span class="comment">//每条路的终点</span></span><br></pre></td></tr></table></figure>
<h4 id="Student模块中"><a href="#Student模块中" class="headerlink" title="Student模块中"></a>Student模块中</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; station_shahe;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; station_xitucheng;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; station;</span><br><span class="line"></span><br><span class="line"><span class="comment">//路径</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path_shahe;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path_xitucheng;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; path;</span><br></pre></td></tr></table></figure>
<h3 id="六、各模块设计说明："><a href="#六、各模块设计说明：" class="headerlink" title="六、各模块设计说明："></a>六、各模块设计说明：</h3><p>​        为了便于程序的设计和编写，我们将导入的地图数据存入对象数组，包括Road类，Building类。在程序中当我们需要引用地图数据时，我们传递的参数是该建筑节点或该道路在其对象数组中的下标，不是其本身。同时我们定义指针指向Road和Building数组，方便对数组中对象进行引用和修改，所有有需要的函数都可以要求获得两个指针作为参数引入函数。</p>
<h4 id="User模块：-1"><a href="#User模块：-1" class="headerlink" title="User模块："></a><code>User</code>模块：</h4><h5 id="导航策略一："><a href="#导航策略一：" class="headerlink" title="导航策略一："></a>导航策略一：</h5><h6 id="算法思想："><a href="#算法思想：" class="headerlink" title="算法思想："></a>算法思想：</h6><p>以dijastra算法为基础，其中最短路径的算法是以道路的长度为权重，计算出最短路径，并且在算法中记录最短路径节点；指定起点s，即从顶点s开始计算。</p>
<p>引进两个集合S和U。</p>
<p>S：记录已求出最短路径的顶点(以及相应的最短路径长度)，</p>
<p>U：记录还未求出最短路径的顶点(以及该顶点到起点s的距离)。</p>
<p>-初始时，S中只有起点s；U中是除s之外的顶点。U中顶点的路径是”起点s到该顶点的路径”。然后，从U中找出路径最短的顶点v，并将其加入到S中。</p>
<p>-更新U中的顶点（及顶点对应的路径）。 然后，再从U中找出路径最短的顶点，并将其加入到S中。</p>
<p>… 重复该操作，直到遍历完所有顶点。</p>
<p>同时，为了存储最短路径上的各个节点，我们设置了beyond数组来存储到每个节点的最短路径中，到该节点的前一个节点的坐标；这样，当我们执行完算法后，得到终点的下标，再根据beyond数组，我们通过循环可以一步步得到，这条路径上所经历的节点下标。并且，我们在该函数中添加了一个关于导航策略type的判断，如果是带途经点的策略，那么每次执行该程序时用户的way，road路径数据不会被清空，以便储存带有途经点的多段路径的组合。</p>
<h6 id="算法："><a href="#算法：" class="headerlink" title="算法："></a>算法：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">初始化way[]，beyond[]，distance[],start,end</span><br><span class="line">Way[<span class="number">0</span>]=start,k=<span class="number">0</span>;</span><br><span class="line">While（<span class="literal">true</span>）&#123;</span><br><span class="line">以way[]中为可达点，更新各点到start的距离，distance[];</span><br><span class="line">选出距离最短点temp入数组way[];</span><br><span class="line">beyond[temp]=way[k]</span><br><span class="line">k++;</span><br><span class="line">If(temp=end)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="最短时间算法："><a href="#最短时间算法：" class="headerlink" title="最短时间算法："></a><strong>最短时间算法</strong>：</h5><h6 id="算法思想：-1"><a href="#算法思想：-1" class="headerlink" title="算法思想："></a>算法思想：</h6><p>算法思想与策略一类似，只是以通过每条道路的时间位权重，计算出最短时间，而道路的最短时间是与道路的长度，拥挤度，以及用户的速度相关的。</p>
<h6 id="算法：-1"><a href="#算法：-1" class="headerlink" title="算法："></a>算法：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">初始化way[]，beyond[]，time[],start,end</span><br><span class="line">Way[<span class="number">0</span>]=start,k=<span class="number">0</span>;</span><br><span class="line">While（<span class="literal">true</span>）&#123;</span><br><span class="line">以way[]中为可达点，更新各点到start的时间，time[];</span><br><span class="line">选出耗时最短点temp入数组way[];</span><br><span class="line">beyond[temp]=way[k]</span><br><span class="line">k++;</span><br><span class="line">If(temp=end)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="有途径点的最短路策略："><a href="#有途径点的最短路策略：" class="headerlink" title="有途径点的最短路策略："></a><strong>有途径点的最短路策略：</strong></h5><h6 id="算法思想：-2"><a href="#算法思想：-2" class="headerlink" title="算法思想："></a>算法思想：</h6><p>用户名先将必经点传入规定的数组，并传入起点和终点。算法思想是，将路径分为三个部分，从起点到第一个必经点，从第一个必经点通过所有必经点到最后一个必经点，从最后一个必经点到终点。我们先将这三部分的可能的最短路径长度都求出来，然后再分别搭配组合，得到最短路径。</p>
<p>具体实现为，先用深度优先搜索算法求出必经点的全排列，因为我们最终求得的路径的第二部分，必然是全排列中的一种，然后将这些全排列的路径长度都算出来。之后，再计算出每个必经点到终点和起点的最短路径长度，最后对于所有的全排列进行三段路径长度相加，比较，得到最短路径长度。得到最短路径长度后，我们存储该种排列在全排列数组中的下标，重置用户的way，road路径数据，重新执行一遍从start到排列的第一个建筑，排列中各个建筑之间按顺序，已经排列中最后一个数据到end，所有这些的min_distance()，得到路径组合，由于上一段路的终点和这一段路的起点会重复出现，所以我们也会pop_back()这些重复的点。</p>
<h6 id="算法：-2"><a href="#算法：-2" class="headerlink" title="算法："></a>算法：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">初始化必经点pass[], 必经点数目n,全排列<span class="built_in">array</span>[][]</span><br><span class="line">Dfs(i):</span><br><span class="line">Ans=i;</span><br><span class="line">If(i==n)<span class="built_in">array</span>.push_back(pass),<span class="keyword">return</span>;</span><br><span class="line">While（ans&lt;=n）&#123;</span><br><span class="line">	Pass[i]&lt;==&gt;pass[ans]</span><br><span class="line">	Ans++</span><br><span class="line">	dfs(i+<span class="number">1</span>)</span><br><span class="line">	pass[i]&lt;==&gt;pass[ans]</span><br><span class="line">	ans++</span><br><span class="line">&#125;</span><br><span class="line">求最短路径：初始化</span><br><span class="line"><span class="keyword">int</span> dis[n][n];<span class="comment">//各点之间的距离</span></span><br><span class="line"><span class="keyword">int</span> pre[n];<span class="comment">//开始到各必经点距离</span></span><br><span class="line"><span class="keyword">int</span> after[n];<span class="comment">//必经点到结束距离</span></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>-&gt;n;j=<span class="number">0</span>-&gt;n)&#123;</span><br><span class="line">	dis[i][j]=mindistance(pass[i],pass[j])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>-&gt;n)&#123;</span><br><span class="line">	pre[i]= mindistance(start,pass[i])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>-&gt;n)&#123;</span><br><span class="line">    after[i]= mindistance(start,pass[i])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>-&gt;n;j=<span class="number">0</span>-&gt;n)&#123;</span><br><span class="line">	length=min(pre[i]+dis[i][j]+after[j])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="导航策略四："><a href="#导航策略四：" class="headerlink" title="导航策略四："></a>导航策略四：</h5><h6 id="算法思想：-3"><a href="#算法思想：-3" class="headerlink" title="算法思想："></a>算法思想：</h6><p>与导航策略二类似。为了区分这两种策略，我们在选择策略这两种策略时，会根据策略的不同，对道路的拥挤度，以及用户在该条道路上的速度做不同的初始化（用户是否能骑自行车导致速度不同）。</p>
<h6 id="算法：-3"><a href="#算法：-3" class="headerlink" title="算法："></a>算法：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">初始化way[]，beyond[]，time[],start,end,道路road[]</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>-&gt;n)&#123;</span><br><span class="line">	<span class="keyword">if</span>(road[i].type==自行车)｛</span><br><span class="line">	road[i].time/=<span class="number">2</span></span><br><span class="line">	｝</span><br><span class="line">&#125;</span><br><span class="line">Way[<span class="number">0</span>]=start,k=<span class="number">0</span>;</span><br><span class="line">While（<span class="literal">true</span>）&#123;</span><br><span class="line">	以way[]中为可达点，更新各点到start的时间，time[];</span><br><span class="line">	选出耗时最短点temp入数组way[];</span><br><span class="line">	beyond[temp]=way[k]</span><br><span class="line">	k++;</span><br><span class="line">	If(temp=end)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="对于道路更新的函数："><a href="#对于道路更新的函数：" class="headerlink" title="对于道路更新的函数："></a>对于道路更新的函数：</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_road(<span class="keyword">int</span> type)</span><br></pre></td></tr></table></figure>
<h6 id="算法思想：-4"><a href="#算法思想：-4" class="headerlink" title="算法思想："></a>算法思想：</h6><p>每次导航前，对于地图中所有的道路拥挤度进行重新规划，采用随机数来随机规定每一条道路的拥挤度，和所耗费时间权值（用于算法，并不一定是真实耗费的时间，与拥挤度，道路长度，道路条件及导航策略有关）；同时对于允许载具的情况，在设置道路条件时，会将允许载具的道路的耗费时间减半，以体现载具的速度快于行走的速度。</p>
<h5 id="对于更新次数的函数："><a href="#对于更新次数的函数：" class="headerlink" title="对于更新次数的函数："></a>对于更新次数的函数：</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_renew_times(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span><br></pre></td></tr></table></figure>
<h6 id="算法思想：-5"><a href="#算法思想：-5" class="headerlink" title="算法思想："></a>算法思想：</h6><p>调用renew_locations，在用户位置更新前，先计算出用户需要更新位置的次数，每次更新位置为50ms，以便得到用户行走的总耗费时间；</p>
<h5 id="对于位置更新的函数："><a href="#对于位置更新的函数：" class="headerlink" title="对于位置更新的函数："></a>对于位置更新的函数：</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renew_location(Building *b,<span class="keyword">int</span> rate)</span><br></pre></td></tr></table></figure>
<h6 id="算法思想：-6"><a href="#算法思想：-6" class="headerlink" title="算法思想："></a>算法思想：</h6><p>当用户选择策略之后，程序执行完相关算法，得到最短路径之后，为了在图形界面上呈现用户位置变化的动画，通过该函数来更新用户的位置location；根据用户的速度，是否骑自行车等设置用户每次位置变化的数值，同时根据用户路径上每条路的起点和终点坐标，按照比例来变化用户坐标的x,y值，确保用户坐标一直在道路上；同时，当用户已经到当前道路的终点时，变换到下一条道路；</p>
<h6 id="算法：-4"><a href="#算法：-4" class="headerlink" title="算法："></a>算法：</h6><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">根据用户速度设置初始值change，道路长度dis；</span><br><span class="line">x_change=change*(location2[<span class="number">0</span>]-location[<span class="number">0</span>])/dis;</span><br><span class="line">y_change=change*(location2[<span class="number">1</span>]-location[<span class="number">1</span>])/dis;</span><br><span class="line"><span class="keyword">if</span>(location超过该道路终点位置)=&gt;road_id++;location=该道路终点位置</span><br></pre></td></tr></table></figure>
<h5 id="对于查询周围建筑物函数："><a href="#对于查询周围建筑物函数：" class="headerlink" title="对于查询周围建筑物函数："></a>对于查询周围建筑物函数：</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">search(Building* b)</span><br><span class="line">find_distance(Building* b,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span><br></pre></td></tr></table></figure>
<h6 id="算法思想：-7"><a href="#算法思想：-7" class="headerlink" title="算法思想："></a>算法思想：</h6><p>在一定范围内查询用户周围的建筑物，并用最短路算法求出最短路的长度，将相应建筑物的下标，最短距离分别存储；<br>如果想要得到到某建筑的具体的最短路径，则再调用一遍</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">find_distance(Building* b,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span><br><span class="line">函数，最短路径结果存在user中:</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp_way;<span class="comment">//查询时用到的暂存储路径建筑下标的数组</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp_length;<span class="comment">//查询使用到的暂时存储距离的数组</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; around;<span class="comment">//周围建筑</span></span><br><span class="line">为了防止与查询结果与用户当前导航路径相冲突，我们设置了以上三个向量来存储相关结果；并且由于用户用鼠标点击建筑物，来作为途经点，产生的坐标会有些许误差，我们还设计了find_Building函数来消除这些误差，确保途经点准确无误地被程序接收。</span><br></pre></td></tr></table></figure>
<h4 id="Input模块：-1"><a href="#Input模块：-1" class="headerlink" title="Input模块："></a><code>Input</code>模块：</h4><h6 id="算法思想：-8"><a href="#算法思想：-8" class="headerlink" title="算法思想："></a>算法思想：</h6><p>使用文件流读入TXT文件中存储的地图数据和道路数据，并将相关数组结构进行赋值初始化；</p>
<h6 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h6><p>定义了地图数据的输入类，一切地图数据都通过该类从文件读入到程序中；</p>
<h4 id="Building模块：-1"><a href="#Building模块：-1" class="headerlink" title="Building模块："></a><code>Building</code>模块：</h4><h6 id="特点：-1"><a href="#特点：-1" class="headerlink" title="特点："></a>特点：</h6><p>定义了建筑物节点类，将建筑物相关信息在类中定义，在实例化的对象中存储相关信息，如建筑物节点的坐标，与建筑物相连的道路等；</p>
<h4 id="Road模块：-1"><a href="#Road模块：-1" class="headerlink" title="Road模块："></a><code>Road</code>模块：</h4><h6 id="特点：-2"><a href="#特点：-2" class="headerlink" title="特点："></a>特点：</h6><p>定义了Road类，实例化对象中存储道路的长度，拥挤度，终点，起点等信息；</p>
<h4 id="Log模块"><a href="#Log模块" class="headerlink" title="Log模块:"></a><code>Log</code>模块:</h4><h6 id="算法思想：-9"><a href="#算法思想：-9" class="headerlink" title="算法思想："></a>算法思想：</h6><p>使用文件流读入TXT文件中存储的地图数据和道路数据，并将相关数组结构进行赋值初始化；</p>
<h4 id="widget模块："><a href="#widget模块：" class="headerlink" title="widget模块："></a><code>widget</code>模块：</h4><h6 id="模块内容："><a href="#模块内容：" class="headerlink" title="模块内容："></a>模块内容：</h6><ol>
<li>规定了图形化控件的分工</li>
<li>确定了图形化控件的布局</li>
<li>实现了图形化控件的响应逻辑</li>
<li>设定导航所需参数</li>
</ol>
<h4 id="drawingwidget模块：-1"><a href="#drawingwidget模块：-1" class="headerlink" title="drawingwidget模块："></a><code>drawingwidget</code>模块：</h4><h5 id="drawingwidget封装了一个图形化控件，其内容为"><a href="#drawingwidget封装了一个图形化控件，其内容为" class="headerlink" title="drawingwidget封装了一个图形化控件，其内容为:"></a><code>drawingwidget</code>封装了一个图形化控件，其内容为:</h5><ol>
<li><h6 id="面向用户："><a href="#面向用户：" class="headerlink" title="面向用户："></a>面向用户：</h6><ol>
<li>静态展示<em>预览</em> 结果</li>
<li>动态展示<em>导航</em> 过程</li>
<li>提供<em>添加途经点</em>功能</li>
<li>提供<em>指定搜索目的地</em>功能</li>
</ol>
</li>
<li><h6 id="面向过程："><a href="#面向过程：" class="headerlink" title="面向过程："></a>面向过程：</h6><ol>
<li>实现<em>预览</em>，调用<code>renewPath</code>进行路径规划</li>
<li>实现<em>开始导航</em>，调用<code>renew_location</code>，进行坐标的动态更新</li>
<li>响应<em>搜索输出</em>，静态展示指向搜索点的规划路径</li>
<li>调用*<code>painEvent</code>*进行绘图，所需数据存储在成员<code>stu</code>中</li>
</ol>
</li>
</ol>
<h5 id="drawingwidget拥有一个成员stu，stu是Class-student的一个实例。"><a href="#drawingwidget拥有一个成员stu，stu是Class-student的一个实例。" class="headerlink" title="drawingwidget拥有一个成员stu，stu是Class student的一个实例。"></a><code>drawingwidget</code>拥有一个成员<code>stu</code>，<code>stu</code>是<code>Class student</code>的一个实例。</h5><h4 id="horizonespinbox模块：-1"><a href="#horizonespinbox模块：-1" class="headerlink" title="horizonespinbox模块："></a><code>horizonespinbox</code>模块：</h4><p>封装了一个图形化控件，其内容为:</p>
<ol>
<li>面向用户:提供<em>调节导航演进速率</em>的功能</li>
<li>面向过程:其传出值参与算法层<code>renew_location</code>计算</li>
</ol>
<h4 id="Student模块：-1"><a href="#Student模块：-1" class="headerlink" title="Student模块："></a><code>Student</code>模块：</h4><h5 id="student是导航用户的抽象，包含了以下成员和方法"><a href="#student是导航用户的抽象，包含了以下成员和方法" class="headerlink" title="student是导航用户的抽象，包含了以下成员和方法:"></a><code>student</code>是导航用户的抽象，包含了以下成员和方法:</h5><ol>
<li>用户指定的起点、终点、途经点</li>
<li>用户指定的起点终点校区、出行策略</li>
<li>用户当前的位置坐标、所处状态</li>
<li>以及上述成员对应的<code>get</code>/<code>set</code>/<code>renew</code>方法</li>
</ol>
<h5 id="student也是GUI界面的数据来源，包含了以下成员和方法"><a href="#student也是GUI界面的数据来源，包含了以下成员和方法" class="headerlink" title="student也是GUI界面的数据来源，包含了以下成员和方法:"></a><code>student</code>也是GUI界面的数据来源，包含了以下成员和方法:</h5><ol>
<li><p>加载地图以及相关数据的存储</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input input;</span><br><span class="line">Road road1[<span class="number">200</span>],road2[<span class="number">500</span>];</span><br><span class="line">Building bud1[<span class="number">200</span>],bud2[<span class="number">200</span>];</span><br><span class="line">Road * r1 = road1, * r2 = road2;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Road *&gt; r;</span><br><span class="line">Building * b1 = bud1, * b2 = bud2;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Building *&gt; b;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span> &gt; gate = &#123;<span class="number">73</span>, <span class="number">86</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> logical[<span class="number">2</span>][<span class="number">3</span>] = &#123;&#123;<span class="number">17</span>, <span class="number">14</span>, <span class="number">30</span>&#125;, &#123;<span class="number">19</span>, <span class="number">13</span>, <span class="number">5</span>&#125;&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>包括<code>Class User</code>的实例，及其对应的<code>std::vector&lt;User&gt;</code>实例</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">User user_shahe = User(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">User user_xitucheng = User(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;User&gt; user;</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h3 id="七、测试情况与功能说明："><a href="#七、测试情况与功能说明：" class="headerlink" title="七、测试情况与功能说明："></a>七、测试情况与功能说明：</h3><p>实现用图形绘制地图，建立了校园内部建筑物图与道路图，只要用鼠标在地图上点击就可以得到点击点的坐标：<img src="C:\Users\14372\Desktop\DS_GUI_lkt\Picture\2.png" alt="2" style="zoom:67%;" /></p>
<p>沙河校区：</p>
<img src="C:\Users\14372\Desktop\DS_GUI_lkt\Picture\1.png" alt="1" style="zoom:67%;" />

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>实现了物理位置和逻辑位置导航，实现人流量负载。在地图上进行实时导航，输入起点，终点和导航策略以后即可开始导航</p>
<p><img src="C:\Users\14372\Desktop\DS_GUI_lkt\Picture\10.png" alt="10" style="zoom:67%;" /><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>
<p>实现了起点和终点在不同校区，考虑到了校区间的交通方式</p>
<img src="C:\Users\14372\Desktop\DS_GUI_lkt\Picture\5.png" alt="5" style="zoom: 60%;" />

<p>模拟导航系统实现了以时间为轴，系统时间精确到秒钟</p>
<p>建立了日志文件”log.txt“ ,对用户的状态变化和键入信息进行记录</p>
<img src="C:\Users\14372\Desktop\DS_GUI_lkt\Picture\11.png" alt="11" style="zoom: 55%;" />

<p>用户确定起点终点和导航策略后，会在模拟导航系统预览路径，选定路线后，用户在模拟导航系统中按照路线和设定好的速度前进</p>
<p>用户可以选择四种导航策略</p>
<p><img src="C:\Users\14372\Desktop\DS_GUI_lkt\Picture\7.png" alt="7"></p>
<p>用户可以在行走的过程中随意暂停并查询自己所处的位置和身边附近的教学楼，学生宿舍和其他服务设施</p>
<img src="C:\Users\14372\Desktop\DS_GUI_lkt\Picture\6.9.1.png" alt="6.9.1" style="zoom:67%;" />

<p>用户可以在模拟导航系统中通过拉动速度条来改变自己的速度</p>
<p><img src="C:\Users\14372\Desktop\DS_GUI_lkt\Picture\6.png" alt="6"></p>
<h3 id="八、用户使用手册："><a href="#八、用户使用手册：" class="headerlink" title="八、用户使用手册："></a>八、用户使用手册：</h3><p>地图版块下方是菜单栏，操作均在菜单栏完成。</p>
<h4 id="操作流程："><a href="#操作流程：" class="headerlink" title="操作流程："></a>操作流程：</h4><p>可以通过切换校区查询所需校区地图。</p>
<p>导航前确定出发点和目的地以及出行策略，需要途径点则选择途径点。点击“预览”可以看到由颜色点构成的出行路径提示，选择好路径后即可点击“开始导航”。导航过程中可以拖动速度条调节速度，通过菜单栏左下角可以看到精确到秒的实时时间。</p>
<p>每次开始新的导航前，需要点击“重置”，重新设置起点终点和出行策略。</p>
<p>导航中需要查看周围建筑时，点击“搜索”即可在菜单栏右方文字框内看到查询结果。</p>
<h3 id="九、评价和改进意见："><a href="#九、评价和改进意见：" class="headerlink" title="九、评价和改进意见："></a>九、评价和改进意见：</h3><p>​    本次课程设计中，我们利用QT完成对GUI的设计与实现；基本实现了实验的基础要求，充分考虑到用户主要需求的操作逻辑、可能需要的交互信息以及会带来不必要错误的非法操作等可能性分支，并对他们进行详尽的相应处理。</p>
<p>​    在图形化界面设计时，经历了控件排版、封装、逻辑实现、实验调试等多个阶段，其中核心代码集中在规划路径的图形化展示和导航模拟动画的控制实现两个方面。由于paintEvent的机制限制，无法仅通过展示一张图片实现静态展示展示的功能。最终通过不同标志成员的组合，完成了一个事件同时展示静态和动态效果的目标，从而实现导航系统GUI界面的核心功能。</p>
<p>​    就算法而言，用到的主要算法就是dijastra算法；基本实现了实验的要求，能够较快地找到最佳路径，相较于用深度优先搜索来查找路径在时间和空间复杂度上都要更优化；但是由于时间限制问题，我们没有将dijastra算法与Floyd算法同时实现，来比较取更佳者；也没有使用其他的算法来对原有算法进行优化，我们查找资料发现有A*算法，模拟退火算法等其他更优化的算法，这是一个可以改进的地方；</p>
<p>​    在求有必经点的最短路径时，我们是将所有的必经点压入数组，然后进行全排列，这样最终路径必然会时全排列的一种；这样做虽然省事，但是增加了程序的时间和空间复杂度，不能够承担许多个必经点的路径计算；查阅资料发现，这里也可以用更优化的方法来实现，也是一个可以改进的地方。</p>
<p>​    更新用户位置坐标时，由于用户的坐标是整数，如果将速度设置得过小，那么因为浮点型到整型的舍入而产生的误差就会较大，导致用户之间的速度差别体现在图形化界面上时不正确；而如果速度设置的过大，用户行走速度就会过快，不能清晰地体现出行走的过程；这一点也需要改进。</p>
<h3 id="十、实验总结："><a href="#十、实验总结：" class="headerlink" title="十、实验总结："></a>十、实验总结：</h3><p>​    本次实验使得我们更加深入地了解了dijastra算法，对于C++面向对象编程有了更好的掌握；并对QT GUI的设计、实现方法有了基础和熟练的认知；同时，在编写程序时更多的用stl库中的vector，map等数据结构，较少使用int 数组结构，使得程序设计起来更加的简洁，因为stl库中的数据结构自带很多的数据处理接口，可以直接调用；实验后期阶段的程序调试更锻炼了作为程序编写和维护人员应该有的耐心和细心；实验中发现和解决的问题都会成为日后编写程序的财富；在编写日志模块时，我们查找了log4Qt并对其源码有一定的学习，为以后的工程编写打下了良好的基础。</p>
<p>​    课程设计作品是一个团队合作的结果，团队里面的每个人都必不可少，本次实验中我们团队也经历过磨合阶段，大家初期编写完自己的部分后，由于对其他人的部分不够熟悉，导致代码整合有些许困难，但是经过大家多天在一起调试代码，最终顺利完成了代码的整合工作。相较于一个人编写程序，团队合作显然更加有效率。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/02/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/" data-id="ckq2c2d5g0007lsv07jvfcspo" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-自动机总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/13/%E8%87%AA%E5%8A%A8%E6%9C%BA%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2021-04-13T14:51:58.232Z" itemprop="datePublished">2021-04-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="形式语言与自动机总结"><a href="#形式语言与自动机总结" class="headerlink" title="形式语言与自动机总结"></a>形式语言与自动机总结</h1><h2 id="1-绪论"><a href="#1-绪论" class="headerlink" title="1.绪论"></a>1.绪论</h2><h3 id="形式语言定义"><a href="#形式语言定义" class="headerlink" title="形式语言定义"></a>形式语言定义</h3><p>自动机：具有离散输入输出的数学模型</p>
<h3 id="对应关系"><a href="#对应关系" class="headerlink" title="对应关系"></a>对应关系</h3><p>非限定性语言        ———-        图灵机 </p>
<p>上下文有关语言    ———-        线性有界自动机 </p>
<p>上下文无关语言    ———-        下推式自动机</p>
<p>正则语言               ———-        有限自动机 </p>
<h2 id="2-语言及文法"><a href="#2-语言及文法" class="headerlink" title="2.语言及文法"></a>2.语言及文法</h2><h3 id="字符串运算"><a href="#字符串运算" class="headerlink" title="字符串运算"></a>字符串运算</h3><p>字符串：简称为‘字’或者‘串’，是由字母表T中字符构成的有限序列</p>
<p>连接</p>
<p>取头字符,取尾部,子串匹配</p>
<p>逆:字符串倒置：w<del>1</del>=a<del>1</del>a<del>2</del>a<del>3</del>–&gt;w<del>1</del>上有一横=a<del>3</del>a<del>2</del>a<del>1</del></p>
<p>幂运算:自身连接 ，T^0^={ε}</p>
<p>闭包(*,+):*闭包包括{ε}，+闭包不包括</p>
<h3 id="语言："><a href="#语言：" class="headerlink" title="语言："></a>语言：</h3><p><u>注意：L<del>1</del>={ε}和L2={}=Φ不一样，前者是只有一个空句子的语言，后者是空语言</u></p>
<h4 id="语言的积"><a href="#语言的积" class="headerlink" title="语言的积"></a>语言的积</h4><p>L<del>1</del>={ ab , ba },L<del>2</del>={  aa , bb };则L<del>1</del>L<del>2</del>={abaa,abbb,baaa,babb};L<del>1</del>L<del>2</del> ≠ L<del>2</del>L<del>1</del>.</p>
<h4 id="语言的幂"><a href="#语言的幂" class="headerlink" title="语言的幂"></a>语言的幂</h4><p>自身连接</p>
<h3 id="文法定义"><a href="#文法定义" class="headerlink" title="文法定义"></a>文法定义</h3><h4 id="四元组G-N-T-P-S"><a href="#四元组G-N-T-P-S" class="headerlink" title="四元组G={N,T,P,S}"></a>四元组G={<em>N,T,P,S</em>}</h4><p>L(G)是文法生成的句子</p>
<p><em>N</em>:非终结符的有限集合</p>
<p><em>T</em>: 终结符的有限集合</p>
<p><em>P</em>: 生成式的有限集合</p>
<p><em>S</em>: 起始符，<em>S</em>∈<em>N</em></p>
<h3 id="文法分类："><a href="#文法分类：" class="headerlink" title="文法分类："></a>文法分类：</h3><h4 id="0型文法"><a href="#0型文法" class="headerlink" title="0型文法"></a>0型文法</h4><p>无限制</p>
<h4 id="1型文法"><a href="#1型文法" class="headerlink" title="1型文法"></a>1型文法</h4><pre><code>α--&gt;β,其中|α|&lt;|β|, β∈(N∪T)^+^,α∈(N∪T)^*^N^+^(N∪T)^*^，即意味着左边必须至少有一个起始符，右边可以起始也可以不起始，但右边长度必须不小于左边长度。对应语言：上下文有关语言</code></pre>
<h4 id="2型文法"><a href="#2型文法" class="headerlink" title="2型文法"></a>2型文法</h4><pre><code>A--&gt;α，A∈N，α∈(N∪T)^*^，即意味着左边必须是一个起始符，右边无限制，但长度不小于1（满足1型文法）。对应语言：上下文无关语言</code></pre>
<h4 id="3型文法-正则文法"><a href="#3型文法-正则文法" class="headerlink" title="3型文法/正则文法"></a>3型文法/正则文法</h4><pre><code>右线性文法：

    A--&gt;wB 或 A--&gt;w   A,B∈N，w∈T^*^.

左线性文法：

    A--&gt;Bw 或 A--&gt;w   A,B∈N，w∈T^*^.

对应语言：正则语言</code></pre>
<h2 id="3-有限自动机和右线性文法"><a href="#3-有限自动机和右线性文法" class="headerlink" title="3.有限自动机和右线性文法"></a>3.有限自动机和右线性文法</h2><h3 id="3-1确定的有限自动机DFA"><a href="#3-1确定的有限自动机DFA" class="headerlink" title="3.1确定的有限自动机DFA"></a>3.1确定的有限自动机DFA</h3><p>五元组 = ( Q , T , δ , q<del>0</del> , F )</p>
<p>Q x T –&gt; Q.</p>
<p>切记：不管是转移图还是转移表表示DFA时，<u>都要注意初始状态和终止状态</u>。初始状态前有箭头，终止状态               有双圈。</p>
<p>被DFA接受的字符串必须在输入结束后能够使DFA状态达到终止</p>
<h4 id="格局"><a href="#格局" class="headerlink" title="格局"></a>格局</h4><p>包括信息：当前状态q，待输入字符串w. 两者构成的瞬时描述 ( q , w )</p>
<p>初始格局：( q<del>0</del> , w )</p>
<p>终止格局： ( q , ε ), q∈F</p>
<img src="https://img-blog.csdnimg.cn/20210425104536664.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" style="zoom: 50%;" />


<h4 id="设计有限自动机："><a href="#设计有限自动机：" class="headerlink" title="设计有限自动机："></a>设计有限自动机：</h4><h5 id="多个例子"><a href="#多个例子" class="headerlink" title="多个例子"></a>多个例子</h5><p><img src="https://img-blog.csdnimg.cn/2021042510455461.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210425104602388.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210425104605844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-2-不确定有限自动机：NFA"><a href="#3-2-不确定有限自动机：NFA" class="headerlink" title="3.2 不确定有限自动机：NFA"></a>3.2 不确定有限自动机：NFA</h3><h4 id="五元组：NFA-M-Q-T-δ-q0-F"><a href="#五元组：NFA-M-Q-T-δ-q0-F" class="headerlink" title="五元组：NFA M = ( Q , T , δ , q0 , F )"></a>五元组：NFA M = ( Q , T , δ , q<del>0</del> , F )</h4><p>其中δ = Q x T –&gt;2^Q^</p>
<p>DFA是特殊的NFA ，NFA转化DFA：</p>
<h4 id="子集构造法"><a href="#子集构造法" class="headerlink" title="子集构造法"></a>子集构造法</h4><p>列表法进行，注意以下几点：</p>
<p>表中的状态集合要在中括号中。例：[ p ]，[ q , r ];</p>
<p>表中的起始状态要加箭头，终止状态要加星号*</p>
<p>最后的图中状态集合要在大括号中。例：{ q }, { q , r },同时外加圆圈，终止状态双重圆圈</p>
<h3 id="3-3-ε-NFA"><a href="#3-3-ε-NFA" class="headerlink" title="3.3 ε-NFA"></a>3.3 ε-NFA</h3><h4 id="五元组：NFA-M-Q-T-δ-q0-F-1"><a href="#五元组：NFA-M-Q-T-δ-q0-F-1" class="headerlink" title="五元组：NFA M = ( Q , T , δ , q0 , F )"></a>五元组：NFA M = ( Q , T , δ , q<del>0</del> , F )</h4><p>其中δ = Q x( T ∪{ ε }) –&gt; 2^Q^</p>
<h4 id="ε闭包"><a href="#ε闭包" class="headerlink" title="ε闭包"></a>ε闭包</h4><p>ε-CLOSURE或ECLOSE，定义为从q经过所有的ε路径可到达状态，包括q自身</p>
<p>状态子集的ε-闭包：ε-CLOSURE( I ) = ∪ε-CLOSURE( q ),q∈I</p>
<p>Ia定义：对于状态子集 I ⊆ Q,任意 a ∈ T，Ia = ε-CLOSURE( δ ( I , a ) ) .</p>
<p>定义P = δ ( I , a ):P是从I中的所有状态经过一条标a的边可以到达的状态集合</p>
<p>计算δ’ ( q<del>0</del> , a ):</p>
<p>δ’ ( q<del>0</del> , a ) = ε-CLOSURE{ δ [ δ’ ( q<del>0</del> , ε ) , a ] }</p>
<pre><code>             = ε-CLOSURE&#123; δ [ ε-CLOSURE(q~0~) , a ] &#125; //先求一个q~0~的ε-闭包，再将其闭包后的结果全部经过一个a形成的集                                                                                      合，再将其集合中的元素全部进行ε-闭包得到集合即为最终答案。</code></pre>
<h4 id="构造ε-NFA自动机"><a href="#构造ε-NFA自动机" class="headerlink" title="构造ε-NFA自动机"></a>构造ε-NFA自动机</h4><p><img src="https://img-blog.csdnimg.cn/20210425104952819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h5 id="ε-NFA自动机格局"><a href="#ε-NFA自动机格局" class="headerlink" title="ε-NFA自动机格局"></a>ε-NFA自动机格局</h5><p><img src="https://img-blog.csdnimg.cn/20210425104646931.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h4 id="ε-NFA转化NFA"><a href="#ε-NFA转化NFA" class="headerlink" title="ε-NFA转化NFA"></a>ε-NFA转化NFA</h4><h5 id="ε闭包法："><a href="#ε闭包法：" class="headerlink" title="ε闭包法："></a>ε闭包法：</h5><p><img src="https://img-blog.csdnimg.cn/20210425104701441.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>一个一个找，从起始状态开始将ε路径跳过(空跳)，比如从X跳到A，那么A接受1到B，就可以看成X接受1到B，既然X可以空跳经过G，那么讨论完X之后就不再讨论G。</p>
<p><img src="https://img-blog.csdnimg.cn/20210425104713172.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-4-正则集和正则式"><a href="#3-4-正则集和正则式" class="headerlink" title="3.4 正则集和正则式"></a>3.4 正则集和正则式</h3><h4 id="正则集"><a href="#正则集" class="headerlink" title="正则集"></a>正则集</h4><p>字母表上一些特殊形式的字符串集合</p>
<p>{ε} , Φ , {a}都是正则集</p>
<h4 id="正则式"><a href="#正则式" class="headerlink" title="正则式"></a>正则式</h4><p>用类似代数表达式的方法表示正则语言</p>
<p>ε , Φ , a(a∈T)都是正则式</p>
<h4 id="运算：作用于语言上的代数运算"><a href="#运算：作用于语言上的代数运算" class="headerlink" title="运算：作用于语言上的代数运算"></a>运算：作用于语言上的代数运算</h4><p>若A,B为正则式，L{ A } , L{ B }为正则集</p>
<p>联合：A+B   或者   L { A } ∪ L { B } 或者的关系，若之后没有*闭包运算，则A,B不能共存，每次只出现一个</p>
<p>连接：AB   或者   L{ A } · L{ B }  顺序的关系</p>
<p>星闭包：A*  或者 L(A)* </p>
<p>算数符优先级：* 大于 · 大于 +</p>
<h4 id="正则式的性质"><a href="#正则式的性质" class="headerlink" title="正则式的性质"></a>正则式的性质</h4><p>L^+^一定不包含ε吗？不一定，如果L中包含ε，那么L^+^也可以包含ε.</p>
<h5 id="与闭包有关的定律"><a href="#与闭包有关的定律" class="headerlink" title="与闭包有关的定律"></a>与闭包有关的定律</h5><p>(a^<em>^)^</em>^=a^<em>^,  a^</em>^=a+a^<em>^, L^+^=LL^</em>^=L^<em>^L, L^</em>^=L^+^∪{ε}</p>
<h4 id="右线性文法与正则式"><a href="#右线性文法与正则式" class="headerlink" title="右线性文法与正则式"></a>右线性文法与正则式</h4><p>两者等效</p>
<p>文法 S –&gt; aS,  S –&gt; a</p>
<p>对应正则式 a^+^ = a*a</p>
<h5 id="从右线性文法导出正则式："><a href="#从右线性文法导出正则式：" class="headerlink" title="从右线性文法导出正则式："></a>从右线性文法导出正则式：</h5><h6 id="求解规则"><a href="#求解规则" class="headerlink" title="求解规则"></a>求解规则</h6><p>设x=αx+β，α∈T^<em>^，β∈(N∪T)^</em>^,x∈N，则x的解为x=α^*^β</p>
<h6 id="求解方法"><a href="#求解方法" class="headerlink" title="求解方法"></a>求解方法</h6><p>将右线性文法的生成式写成联立方程，将所有的大写字母当作未知数求解</p>
<h3 id="3-5-正则集与右线性文法"><a href="#3-5-正则集与右线性文法" class="headerlink" title="3.5 正则集与右线性文法"></a>3.5 正则集与右线性文法</h3><h4 id="正则集-lt-gt-右线性文法产生的语言"><a href="#正则集-lt-gt-右线性文法产生的语言" class="headerlink" title="正则集&lt;==&gt;右线性文法产生的语言"></a>正则集&lt;==&gt;右线性文法产生的语言</h4><h5 id="已知正则集，求右线性文法："><a href="#已知正则集，求右线性文法：" class="headerlink" title="已知正则集，求右线性文法："></a>已知正则集，求右线性文法：</h5><h5 id="例1"><a href="#例1" class="headerlink" title="例1"></a>例1</h5><p>设正则集L为含有两个相继a和两个相继b的由a和b组成的所有字符串集合，构造产生L的右线性文法</p>
<h5 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h5><h5 id="先得出正则式"><a href="#先得出正则式" class="headerlink" title="先得出正则式"></a>先得出正则式</h5><p>提炼核心内容：必须有aa和bb，所以可能是aabb，bbaa。</p>
<p>确定其余部分：(a+b)^*^</p>
<p>得出正则式：(a+b)^<em>^aa(a+b)^</em>^bb(a+b)^<em>^ + (a+b)^</em>^bb(a+b)^<em>^aa(a+b)^</em>^</p>
<h5 id="根据正则式得出右线性文法"><a href="#根据正则式得出右线性文法" class="headerlink" title="根据正则式得出右线性文法"></a>根据正则式得出右线性文法</h5><h6 id="分解规则"><a href="#分解规则" class="headerlink" title="分解规则"></a>分解规则</h6><p>需要从左侧开始分解</p>
<p>对于aX的形式，可以转化为S–&gt;aX</p>
<p>对于(a+b)X的形式，可以转化为S–&gt;aX|bX</p>
<p>对于a*的形式，可以转化为S–&gt;aS</p>
<h6 id="逐步分解"><a href="#逐步分解" class="headerlink" title="逐步分解"></a>逐步分解</h6><p>首先，对(a+b)^*^（相当于提公因式），有S–&gt;aS|bS</p>
<p>然后，对于剩下的aa(a+b)^<em>^bb(a+b)^</em>^和bb(a+b)^<em>^aa(a+b)^</em>^，因为是两部分相加得到，所以有S–&gt;aaA|bbB</p>
<p>其中，A = (a+b)^<em>^bb(a+b)^</em>^，B = (a+b)^<em>^aa(a+b)^</em>^</p>
<p>先研究A，对于(a+b)^*^，有A–&gt;aA|bA</p>
<p>剩下bb(a+b)^<em>^，有A–&gt;bbC,其中C=(a+b)^</em>^</p>
<p>所以C–&gt;aC|bC|ε</p>
<p>同理，B–&gt;aB|bB|aaC</p>
<h6 id="得出答案"><a href="#得出答案" class="headerlink" title="得出答案"></a>得出答案</h6><p>S–&gt;aS|bS|aaA|bbB</p>
<p>A–&gt;aA|bA|bbC</p>
<p>B–&gt;aB|bB|aaC</p>
<p>C–&gt;aC|bC|ε</p>
<h3 id="3-7-正则表达式与有限自动机的关系"><a href="#3-7-正则表达式与有限自动机的关系" class="headerlink" title="3.7 正则表达式与有限自动机的关系"></a>3.7 正则表达式与有限自动机的关系</h3><h4 id="从DFA构造正则表达式"><a href="#从DFA构造正则表达式" class="headerlink" title="从DFA构造正则表达式"></a>从DFA构造正则表达式</h4><h5 id="状态消去法"><a href="#状态消去法" class="headerlink" title="状态消去法"></a>状态消去法</h5><p>消去的是中间状态，即除了起始和终止都要消去</p>
<p>最终得到的正则表达式为每一终态对应的正则表达式之和</p>
<h5 id="消去规则"><a href="#消去规则" class="headerlink" title="消去规则"></a>消去规则</h5><p><img src="https://img-blog.csdnimg.cn/2021042510473746.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>例1</p>
<p><img src="https://img-blog.csdnimg.cn/2021042510474488.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>例2</p>
<p><img src="https://img-blog.csdnimg.cn/20210425104750574.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h4 id="从正则式构造等价ε-NFA"><a href="#从正则式构造等价ε-NFA" class="headerlink" title="从正则式构造等价ε-NFA"></a>从正则式构造等价ε-NFA</h4><h5 id="归纳构造过程"><a href="#归纳构造过程" class="headerlink" title="归纳构造过程"></a>归纳构造过程</h5><p>对于R+S:</p>
<p><img src="https://img-blog.csdnimg.cn/20210425104802981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>对于RS</p>
<p><img src="https://img-blog.csdnimg.cn/20210425104813882.png" alt="在这里插入图片描述"></p>
<p>对于R*</p>
<p><img src="https://img-blog.csdnimg.cn/20210425104819942.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h5 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h5><p><img src="https://img-blog.csdnimg.cn/20210425104829142.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-8-右线性语言与有限自动机"><a href="#3-8-右线性语言与有限自动机" class="headerlink" title="3.8 右线性语言与有限自动机"></a>3.8 右线性语言与有限自动机</h3><p>由右线性文法G定义的语言必然能被一个NFA M所接受。即L(G) = L(M)</p>
<h4 id="构造与右线性文法等价的有限自动机"><a href="#构造与右线性文法等价的有限自动机" class="headerlink" title="构造与右线性文法等价的有限自动机"></a>构造与右线性文法等价的有限自动机</h4><h5 id="例1-1"><a href="#例1-1" class="headerlink" title="例1"></a>例1</h5><p>设有右线性文法G=({S, B} , {a, b} , P , S),其中 P:S–&gt;aB     B–&gt;aB|bS|a， 试着构造与G等价的有限自动机M</p>
<h5 id="答题步骤"><a href="#答题步骤" class="headerlink" title="答题步骤"></a>答题步骤</h5><h6 id="构造NFA-M"><a href="#构造NFA-M" class="headerlink" title="构造NFA M"></a>构造NFA M</h6><p> M = ( Q , T , δ , q<del>0</del> , F ) ,</p>
<h6 id="将Q-T-q0-F-全部表明清楚"><a href="#将Q-T-q0-F-全部表明清楚" class="headerlink" title="将Q , T , q0 , F 全部表明清楚"></a>将Q , T , q<del>0</del> , F 全部表明清楚</h6><p>注意Q中要多一个H作为终止状态:  Q = { S, B, H }，T = { a, b },  q<del>0</del> = S, F = { H }</p>
<h6 id="构造转换函数δ"><a href="#构造转换函数δ" class="headerlink" title="构造转换函数δ"></a>构造转换函数δ</h6><p>每个产生式都对应一个δ</p>
<p>对 S–&gt;aB，有 δ(S,a) = {B}</p>
<p>对 B–&gt;aB，有 δ(B,a) = {B}</p>
<p>对 B–&gt;bS，有 δ(B,b) = {S}</p>
<p>对 B–&gt;a，  有 δ(B,a) = {H}</p>
<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><p>构造δ时，只有在形如S–&gt;aB时能使用，即右边不能超过两个字母表中字母。如果出现S–&gt;abB，则必须新构造一个状态，使得S–&gt;aC, C–&gt;bB. </p>
<h3 id="3-9-3-10右线性语言的性质"><a href="#3-9-3-10右线性语言的性质" class="headerlink" title="3.9-3.10右线性语言的性质"></a>3.9-3.10右线性语言的性质</h3><h4 id="DFA极小化"><a href="#DFA极小化" class="headerlink" title="DFA极小化"></a>DFA极小化</h4><h5 id="等价状态"><a href="#等价状态" class="headerlink" title="等价状态"></a>等价状态</h5><p>DFA M = ( Q , T , δ , q<del>0</del> , F ) , 对于任意两个状态q<del>1</del>q<del>2</del>∈Q和每个w∈T^<em>^，若有：(q<del>1</del> , w)|-^</em>^(q,ε)&lt;==&gt;(q<del>1</del> , w)|-^*^(q,ε)且q∈F，则称q<del>1</del>与q<del>2</del>等价，记作q<del>1</del>≡q<del>2</del></p>
<h5 id="不可达状态"><a href="#不可达状态" class="headerlink" title="不可达状态"></a>不可达状态</h5><p>不存在任何w∈T^<em>^，能够使(q<del>0</del> , w)|-^</em>^(q,ε)，则称 q∈Q 为不可达状态</p>
<h4 id="最小化"><a href="#最小化" class="headerlink" title="最小化"></a>最小化</h4><p>若DFA M不存在互为等价状态和不可达状态，则称 DFA M 为最小化的</p>
<h5 id="最小化算法–填表法"><a href="#最小化算法–填表法" class="headerlink" title="最小化算法–填表法"></a>最小化算法–填表法</h5><h6 id="确定不可达状态"><a href="#确定不可达状态" class="headerlink" title="确定不可达状态"></a>确定不可达状态</h6><p>将不可达状态删除</p>
<h6 id="区别终态"><a href="#区别终态" class="headerlink" title="区别终态"></a>区别终态</h6><p>终态与非终态不可能为等价状态</p>
<h6 id="合并等价态"><a href="#合并等价态" class="headerlink" title="合并等价态"></a>合并等价态</h6><p>划分结果时，互为等价态的状态集是用打大括号括起来，最后得出新的状态集合时，每个等价态只用一个状态表示，最后的状态集合每个状态都用中括号括起来</p>
<h5 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h5><h5 id=""><a href="#" class="headerlink" title=""></a><img src="https://img-blog.csdnimg.cn/20210425104849914.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></h5><p><img src="https://img-blog.csdnimg.cn/20210425104854244.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h4 id="泵浦定理"><a href="#泵浦定理" class="headerlink" title="泵浦定理"></a>泵浦定理</h4><p>设L是正则集，存在常数K，对字符串w∈L且 | w | &gt;= n，则 w 可以写成 w<del>1</del>w<del>0</del>w<del>2</del> ，其中 | w<del>1</del>w<del>0</del> | &lt;= n，| w<del>0</del> | &gt; 0，对于所有的 i &gt;= 0 ，有 w<del>1</del>w<del>0</del>^i^w<del>2</del>∈L。//所以 w<del>0</del> 一定是在字符串的前n个字符中找。</p>
<h5 id="例1-2"><a href="#例1-2" class="headerlink" title="例1"></a>例1</h5><p>求证L={a^k^| k &gt;= 1}不是正则集</p>
<h5 id="回答规范"><a href="#回答规范" class="headerlink" title="回答规范"></a>回答规范</h5><p>假设L是正则集，取足够大的整数n，w = a^n^。有| w |=| w<del>1</del>w<del>0</del>w<del>2</del> | = n平方 &gt;= n。</p>
<p>因为 | w<del>1</del>w<del>2</del> | &lt;= n，| w<del>0</del> | &gt; 0，若取 i = 2，则 的情况为| w<del>1</del>w<del>0</del>w<del>0</del>w<del>2</del> |=| w |+| w<del>0</del> |, | w | = n平方,   0 &lt; | w<del>0</del> | &lt;= n, 所以        n平方 &lt; | w | + | w<del>0</del> | &lt;= n平方+n &lt; (n+1)平方,所以不满足w = a的n^2^次方（串长不是整数平方），所以与假设冲突。</p>
<p>像这个例子是使用了类似于逻辑归纳法的方式来进行反证的。看下一个例子</p>
<h5 id="例2"><a href="#例2" class="headerlink" title="例2"></a>例2</h5><p>L={ w | w中0和1的个数相等 }不是正则集</p>
<p>在证明这个L时，我们选取了 0^n^1^n^这样一个特殊条件来进行判断，在判断不是正则集后即可将L全部否定。</p>
<h4 id="右线性语言的封闭性"><a href="#右线性语言的封闭性" class="headerlink" title="右线性语言的封闭性"></a>右线性语言的封闭性</h4><p>L<del>1</del>和L<del>2</del>是右线性语言，则L<del>I</del>∪L<del>2</del>，L<del>1</del>L<del>2</del>，L<del>1</del>*，L<del>1</del>的补集(就是在L<del>1</del>上面画横杠)L<del>1</del>∩L<del>2</del>都是右线性语言。</p>
<h5 id="双向有限自动机"><a href="#双向有限自动机" class="headerlink" title="双向有限自动机"></a>双向有限自动机</h5><p>读入一个字符以后，读头可以：左移右移不动</p>
<p>形式定义：2DFA M = ( Q , T , σ , q<del>0</del> , F )</p>
<p>设有w<del>1</del>qw<del>2</del>   w<del>1</del>– 已输入串   q–当前状态    w<del>2</del>–待输入串 </p>
<p>σ(q,a<del>m+1</del>)=(p,R)//R说明右移   格局描述：a<del>1</del> a<del>2</del>  … a<del>m</del> q a<del>m+1</del>… |- a<del>1</del> a<del>2</del>  … a<del>m</del> a<del>m+1</del> q a<del>m+2</del> …</p>
<p>σ(q,a<del>m+1</del>)=(p,L)//L说明右移   格局描述：a<del>1</del> a<del>2</del>  … a<del>m</del> q a<del>m+1</del>… |- a<del>1</del> a<del>2</del>  …  a<del>m-1</del> q a<del>m</del> …</p>
<p>2DFA 接受的字符串集合：{w | q<del>0</del>w |-* wq , q∈F }</p>
<h6 id="确定的双向有限自动机"><a href="#确定的双向有限自动机" class="headerlink" title="确定的双向有限自动机"></a>确定的双向有限自动机</h6><p>不能不动</p>
<h5 id="有输出的有限自动机"><a href="#有输出的有限自动机" class="headerlink" title="有输出的有限自动机"></a>有输出的有限自动机</h5><h6 id="米兰机-摩尔机"><a href="#米兰机-摩尔机" class="headerlink" title="米兰机                                                                                                            摩尔机"></a>米兰机                                                                                                            摩尔机</h6><p>定义：                   输出字符与输入字符及状态有关                                                                     输出字符仅与状态有关</p>
<p>形式定义：                                                                                       （Q , T , R , σ , g , q0)</p>
<pre><code>                    T 有限输入字母表   R 有限输出字母表     σ 转换函数 Q×T--&gt;Q     q0 初始状态

                    g 输出函数   Q×T--&gt;R                                                                g 输出函数   Q--&gt;R</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20210425104907658.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTc5ODMxMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="4-上下文无关文法与下推自动机"><a href="#4-上下文无关文法与下推自动机" class="headerlink" title="4.上下文无关文法与下推自动机"></a>4.上下文无关文法与下推自动机</h2><h3 id="4-1推导树和二义性"><a href="#4-1推导树和二义性" class="headerlink" title="4.1推导树和二义性"></a>4.1推导树和二义性</h3><h5 id="归约与推导"><a href="#归约与推导" class="headerlink" title="归约与推导"></a>归约与推导</h5><p>G=(N,T,P,S)=( { <em>E,O</em> } , { *<em>,+,v,d,(,)</em> } , P , E ),已知字符串v*(v+d)</p>
<p>归约：字符串v*(v+d)推导回E</p>
<p>推导：E推导到字符串v*(v+d)</p>
<h6 id="最左推导"><a href="#最左推导" class="headerlink" title="最左推导"></a>最左推导</h6><p>推导过程的每一步总是替换出现在<u><strong>最左边</strong></u>的<u><strong>非终结符</strong></u></p>
<h6 id="最右推导"><a href="#最右推导" class="headerlink" title="最右推导"></a>最右推导</h6><p>推导过程的每一步总是替换出现在<u><strong>最右边</strong></u>的<u><strong>非终结符</strong></u></p>
<h6 id="推导树"><a href="#推导树" class="headerlink" title="推导树"></a>推导树</h6><p>根据最左推导或最右推导得出</p>
<h5 id="二义性"><a href="#二义性" class="headerlink" title="二义性"></a>二义性</h5><p>要证明某个文法是二义的，需要使用这个文法自己创造一个句子(字符串)，再使用两种最左推导或者最右推导得出这个句子就说明此文法二义。</p>
<h5 id="-1"><a href="#-1" class="headerlink" title=""></a></h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/13/%E8%87%AA%E5%8A%A8%E6%9C%BA%E6%80%BB%E7%BB%93/" data-id="ckq2c2d5f0005lsv076b91th9" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Computer Network" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/12/Computer%20Network/" class="article-date">
  <time class="dt-published" datetime="2021-04-12T12:23:45.133Z" itemprop="datePublished">2021-04-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="The-Summarize-of-Computer-Network"><a href="#The-Summarize-of-Computer-Network" class="headerlink" title="The Summarize of Computer Network"></a>The Summarize of Computer Network</h1><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1-Introduction"></a>1-Introduction</h2><h3 id="1-The-differences-between-Computer-Networks-and-Distributed-System"><a href="#1-The-differences-between-Computer-Networks-and-Distributed-System" class="headerlink" title="1.The differences between Computer Networks and Distributed System"></a><em>1.The differences between Computer Networks and Distributed System</em></h3><p>(1)Computer Network is a collection of autonomous computers interconnected by a single technology, but Distributed system is a collection of independent computers appears to its users as a single coherent system.</p>
<p>(2) A distributed system is a software system built on top of a network,gives it a high degree of cohesiveness and transparency. The difference of CN and DS lies with the software(especially the operating system)</p>
<p>(3)Distributed system example : the World Wide Web</p>
<h3 id="2-Transmission-technology"><a href="#2-Transmission-technology" class="headerlink" title="2.Transmission technology"></a><em>2.Transmission technology</em></h3><h3 id="1-Broadcast-networks"><a href="#1-Broadcast-networks" class="headerlink" title="(1)Broadcast networks:"></a>(1)Broadcast networks:</h3><p>the communication channel is shared by all the machines on the network,an address field within each packet specifies the <u>intend recipient.</u>(目的接收方)</p>
<p>i)Broadcasting :addressing a packet to all destinations</p>
<p>ii)Multicasting :support transmission to a subset of machines</p>
<p>iii)Two broadcast networks: Bus(line),Ring(circle)</p>
<h3 id="2-Point-to-point-links"><a href="#2-Point-to-point-links" class="headerlink" title="(2)Point-to-point links:,"></a>(2)Point-to-point links:,</h3><p>Also called unicasting. There re one or more immediate machines in the middle of channel , and we need to find a best length of different routes(路由)</p>
<h3 id="3-Classification-by-scale"><a href="#3-Classification-by-scale" class="headerlink" title="3.Classification by scale"></a><em>3.Classification by scale</em></h3><p>PAN-&gt;LAN-&gt;MAN-&gt;WAN-&gt;The Internet</p>
<h4 id="（1）LAN-Local-Area-Networks"><a href="#（1）LAN-Local-Area-Networks" class="headerlink" title="（1）LAN(Local Area Networks)"></a>（1）LAN(Local Area Networks)</h4><p>Each computer has a radio modem and an antenna that are used to communicated with other machines.</p>
<p>Including Channel allocation(信道冲突算法)</p>
<h4 id="（2）WAN"><a href="#（2）WAN" class="headerlink" title="（2）WAN"></a>（2）WAN</h4><p>Providing connections from a LAN to the Internet</p>
<p>Including Routing algorithm(路由算法)</p>
<h3 id="4-Protocol-Hierarchies"><a href="#4-Protocol-Hierarchies" class="headerlink" title="4. Protocol Hierarchies"></a>4. Protocol Hierarchies</h3><h4 id="definition"><a href="#definition" class="headerlink" title="definition"></a>definition</h4><p> Networks are organized as a stack of layers.</p>
<h4 id="Layer-5-Peers"><a href="#Layer-5-Peers" class="headerlink" title="Layer 5 Peers"></a>Layer 5 Peers</h4><p>![](file:///D:\Tencent Softwares\QQ\Files\1437290395\Image\C2C\BC23C70BA0110A797A28C99B7D3B1096.png)</p>
<h3 id="5-QoS-Quality-of-service"><a href="#5-QoS-Quality-of-service" class="headerlink" title="5.QoS(Quality  of  service)"></a>5.QoS(Quality  of  service)</h3><p>Such as carrying live video,QoS is more about <u>timeliness of delivery</u>  </p>
<p>There are also other QoS such as <u>high throughput</u>,</p>
<h3 id="6-Connection-Oriented-and-Connectionless-Services"><a href="#6-Connection-Oriented-and-Connectionless-Services" class="headerlink" title="6. Connection-Oriented and Connectionless Services"></a>6. Connection-Oriented and Connectionless Services</h3><h4 id="1-Differences-between-Connection-Oriented-and-Connectionless-Services"><a href="#1-Differences-between-Connection-Oriented-and-Connectionless-Services" class="headerlink" title="(1) Differences between Connection-Oriented and Connectionless Services:"></a>(1) Differences between Connection-Oriented and Connectionless Services:</h4><p>(a) Connection-Oriented need to establish a connection at first.</p>
<p>(b) Using Connection-Oriented service, the bits will arrive in the order they were sent.</p>
<p>(c) For Connectionless Services, each message carries the full destination address.</p>
<h4 id="2-Connection-Oriented"><a href="#2-Connection-Oriented" class="headerlink" title="(2)Connection-Oriented"></a>(2)Connection-Oriented</h4><p>Most typical example: telephone system.</p>
<p>establish a connection–&gt;uses the connection–&gt;releases the connection, the bits will arrive in the order they were sent.</p>
<h4 id="3-Connectionless-Services"><a href="#3-Connectionless-Services" class="headerlink" title="(3)Connectionless Services"></a>(3)Connectionless Services</h4><p>(a)Each message carries the full destination address,and  is routed through the intermediate nodes inside the system independent of all the subsequent messages.</p>
<p>(b)Store-and-Forward switching. </p>
<p>The intermediate nodes receive a message in full before sending it on to the next node </p>
<p>(c)Cut-through switching.</p>
<p>Onward transmission of a message at a node starts before it is completely received by the node.</p>
<h4 id="4-Reliable-service"><a href="#4-Reliable-service" class="headerlink" title="(4)Reliable service"></a>(4)Reliable service</h4><p>The receiver acknowledge the receipt of each message so the sender is sure that it arrived.</p>
<p>Connection-Oriented and Connectionless Services can all be reliable and unreliable.</p>
<h5 id="a-Reliable-Connection-Oriented-service"><a href="#a-Reliable-Connection-Oriented-service" class="headerlink" title="(a)Reliable Connection-Oriented service:"></a>(a)Reliable Connection-Oriented service:</h5><p>typical example: file transfer </p>
<p>Reliable message stream: the message boundaries are preserved,Example: Sequence of pages</p>
<p>Reliable byte stream: simply a stream of bytes, no message boundary .Example: Movie download</p>
<h5 id="b-Unreliable-Connection-Oriented-service"><a href="#b-Unreliable-Connection-Oriented-service" class="headerlink" title="(b)Unreliable Connection-Oriented service:"></a>(b)Unreliable Connection-Oriented service:</h5><p>Example: Voice over IP.</p>
<h5 id="c-Connection-less-service"><a href="#c-Connection-less-service" class="headerlink" title="(c)Connection-less service:"></a>(c)Connection-less service:</h5><p>Unreliable datagram: example: Electronic junk mail</p>
<p>Acknowledged datagram: example: Text messaging</p>
<p>Request-reply: Database query</p>
<p>Unreliable Connection-less service also called <u>datagram service</u></p>
<h3 id="7-Protocol-Terminology-协议术语"><a href="#7-Protocol-Terminology-协议术语" class="headerlink" title="7.Protocol  Terminology(协议术语)"></a>7.Protocol  Terminology(协议术语)</h3><p>Service: Relates to an interface between two layers, with the lower layer being the service provider and the upper layer being the service user  </p>
<p>Protocol: A set of rules governing the format and meaning of the packets and messages that are exchanged by the peer.</p>
<h2 id="3-The-Data-Link-Layer"><a href="#3-The-Data-Link-Layer" class="headerlink" title="3-The  Data Link Layer"></a>3-The  Data Link Layer</h2><h3 id="3-1-Services-Provided-to-The-Network-Layer-Provide-service-interface-to-the-network-layer"><a href="#3-1-Services-Provided-to-The-Network-Layer-Provide-service-interface-to-the-network-layer" class="headerlink" title="3.1- Services Provided to The Network Layer        //    Provide  service interface to the network layer"></a>3.1- Services Provided to The Network Layer        //    Provide  service interface to the network layer</h3><h4 id="1-Diferent-services-："><a href="#1-Diferent-services-：" class="headerlink" title="1.Diferent services ："></a>1.Diferent services ：</h4><h4 id="1-Unacknowledged-connectionless-service"><a href="#1-Unacknowledged-connectionless-service" class="headerlink" title="(1)Unacknowledged connectionless service"></a>(1)Unacknowledged connectionless service</h4><p> most LAN uses this type of service in the data link layer</p>
<h4 id="2-Acknowledged-connectionless-service"><a href="#2-Acknowledged-connectionless-service" class="headerlink" title="(2)Acknowledged connectionless service"></a>(2)Acknowledged connectionless service</h4><p> this can be used over unreliable channels ,such as <u>wireless systems</u></p>
<h4 id="3-Acknowledged-connection-oriented-service"><a href="#3-Acknowledged-connection-oriented-service" class="headerlink" title="(3)Acknowledged connection-oriented service"></a>(3)Acknowledged connection-oriented service</h4><h3 id="3-2-Framing"><a href="#3-2-Framing" class="headerlink" title="3.2- Framing"></a>3.2- Framing</h3><h4 id="1-Character-Count"><a href="#1-Character-Count" class="headerlink" title="(1)Character Count"></a>(1)Character Count</h4><p>Use a field in the header to specify the number of characters in the frame.</p>
<p>disadvantage: if this field occur an error when transferring , this type of framing while be destroyed</p>
<p>![img](file:///D:\Tencent Softwares\QQ\Files\1437290395\Image\C2C\08A5AB1B36DE8EF87614A1AE4E1C30C6.png)</p>
<h4 id="2-Byte-Stuffing"><a href="#2-Byte-Stuffing" class="headerlink" title="(2)Byte Stuffing"></a>(2)Byte Stuffing</h4><p>By using a flag byte stuffing,make special bytes at both start and end of each frame.</p>
<p>The end of the last frame is the start of the new frame.</p>
<p>Also ,if this flag byte is also used in the data frame,we need a ESC to make a difference. We also need a ESC when an ESC is used in the frame.</p>
<p>![img](file:///D:\Tencent Softwares\QQ\Files\1437290395\Image\C2C\2F445852B410600B02C826AAE96750AE.png)  </p>
<h4 id="3-Bit-Stuffing"><a href="#3-Bit-Stuffing" class="headerlink" title="(3)Bit Stuffing"></a>(3)Bit Stuffing</h4><p>Can be understood like : byte stuffing’s byte is token place by a special bit: 01111110=0x7E</p>
<p>If this bit is used in data frame, we need to put in a ‘0’ after 5 coiled ‘1’,for example: 01111110—&gt;011111010,so that detector won’t treat it as a flag bit.</p>
<p><strong>A disadvantage of Byte Stuffing and Bit Stuffing is that the length of a frame depends on the contents of the data it carries. If the data consists solely of flag bytes,as for Byte Stuffing, the length of frame has to become  200% of the data frame length ,as for Bit  Stuffing, the length of frame has to become  125% (1+1/8) of the data frame length.</strong></p>
<h4 id="4-Physical-Layer-Coding-Violations"><a href="#4-Physical-Layer-Coding-Violations" class="headerlink" title="(4)Physical Layer Coding Violations"></a>(4)Physical Layer Coding Violations</h4><p>Just use the redundant coding to represent different status.</p>
<h3 id="3-3-Error-Control"><a href="#3-3-Error-Control" class="headerlink" title="3.3- Error Control"></a>3.3- Error Control</h3><h4 id="1-Classifications-Lost-frames-and-Damaged-frames"><a href="#1-Classifications-Lost-frames-and-Damaged-frames" class="headerlink" title="(1)Classifications :Lost frames and Damaged frames"></a>(1)Classifications :Lost frames and Damaged frames</h4><h3 id="2-Single-bit-amp-Burst-Error"><a href="#2-Single-bit-amp-Burst-Error" class="headerlink" title="(2)Single-bit &amp; Burst Error"></a>(2)Single-bit &amp; Burst Error</h3><p>Need to notice: the length of burst error is the length from then first error to the last error</p>
<h3 id="3-Error-Detecting"><a href="#3-Error-Detecting" class="headerlink" title="(3)Error Detecting"></a>(3)Error Detecting</h3><h4 id="a-Parity"><a href="#a-Parity" class="headerlink" title="(a)Parity"></a>(a)Parity</h4><h4 id="b-Checksum"><a href="#b-Checksum" class="headerlink" title="(b)Checksum"></a>(b)Checksum</h4><h4 id="c-CRC-循环冗余检验码"><a href="#c-CRC-循环冗余检验码" class="headerlink" title="(c)CRC(循环冗余检验码)"></a>(c)CRC(循环冗余检验码)</h4><p>![img](file:///D:\Tencent Softwares\QQ\Files\1437290395\Image\C2C\E2E67B457FEF429E80D1CB541105FCA5.png)</p>
<h4 id="CRC-can-detect-all-the-odd-number-error-all"><a href="#CRC-can-detect-all-the-odd-number-error-all" class="headerlink" title="CRC can detect all the odd number error,all"></a>CRC can detect all the odd number error,all</h4><h3 id="4-Error-Correcting"><a href="#4-Error-Correcting" class="headerlink" title="(4)Error Correcting"></a>(4)Error Correcting</h3><h4 id="a-Hamming-code"><a href="#a-Hamming-code" class="headerlink" title="(a)Hamming code"></a>(a)<strong>Hamming code</strong></h4><h4 id="Hamming-Distance-The-number-of-bit-positions-in-which-2-codewords-differ-Hamming-distance-of-a-valid-encoding-set-is-the-shortest-Hamming-distance-in-this-set"><a href="#Hamming-Distance-The-number-of-bit-positions-in-which-2-codewords-differ-Hamming-distance-of-a-valid-encoding-set-is-the-shortest-Hamming-distance-in-this-set" class="headerlink" title="Hamming Distance : The number of bit positions in which 2 codewords differ .Hamming distance of a valid encoding set is the shortest Hamming distance in this set."></a>Hamming Distance : The number of bit positions in which 2 codewords differ .Hamming distance of a valid encoding set is the shortest Hamming distance in this set.</h4><p>To detect d-bit errors, a code must have a minimum Hamming distance of at least d+1.</p>
<p>To correct d-bit errors, a code must have a minimum Hamming distance of at least 2d+1.</p>
<p>Hamming code can only correct single error.</p>
<p>![img](file:///D:\Tencent Softwares\QQ\Files\1437290395\Image\C2C\93CE0FBB27B28E91E1A87F9695D06484.png)</p>
<h4 id="b-Binary-convolutional-codes"><a href="#b-Binary-convolutional-codes" class="headerlink" title="(b)Binary convolutional codes"></a>(b)Binary convolutional codes</h4><h4 id="c-Reed-Solomon-codes"><a href="#c-Reed-Solomon-codes" class="headerlink" title="(c)Reed-Solomon codes"></a>(c)Reed-Solomon codes</h4><h4 id="d-Low-Density-Parity-Check-codes"><a href="#d-Low-Density-Parity-Check-codes" class="headerlink" title="(d)Low-Density Parity Check codes"></a>(d)Low-Density Parity Check codes</h4><h3 id="Flow-Control-Regulating-data-flow-so-that-slow-receivers-won’t-be-swamped-by-fast-senders"><a href="#Flow-Control-Regulating-data-flow-so-that-slow-receivers-won’t-be-swamped-by-fast-senders" class="headerlink" title="Flow Control       //    Regulating data flow,so that slow receivers won’t be swamped by fast senders"></a>Flow Control       //    Regulating data flow,so that slow receivers won’t be swamped by fast senders</h3><h3 id="3-4-Elementary-Data-Link-Protocols"><a href="#3-4-Elementary-Data-Link-Protocols" class="headerlink" title="3.4- Elementary  Data  Link  Protocols"></a>3.4- Elementary  Data  Link  Protocols</h3><h3 id="3-5-Sliding-Windows-Protocols"><a href="#3-5-Sliding-Windows-Protocols" class="headerlink" title="3.5- Sliding  Windows  Protocols"></a>3.5- Sliding  Windows  Protocols</h3><h3 id="3-6-Example-Data-Link-Protocols"><a href="#3-6-Example-Data-Link-Protocols" class="headerlink" title="3.6-  Example Data  Link  Protocols"></a>3.6-  Example Data  Link  Protocols</h3><h2 id="4-The-MAC-Medium-Access-Control-Sublayer"><a href="#4-The-MAC-Medium-Access-Control-Sublayer" class="headerlink" title="4-The MAC(Medium Access Control) Sublayer"></a>4-The MAC(Medium Access Control) Sublayer</h2><p>Study field: broadcast channels,which also called multiaccess channels or random access channels</p>
<p>The protocols used to determine who goes next on a multiaccess channel belong to a subplayer of the data link layer called the <strong>MAC</strong> </p>
<h3 id="4-1-The-channel-allocation-problem"><a href="#4-1-The-channel-allocation-problem" class="headerlink" title="4.1-  The channel allocation problem"></a>4.1-  The channel allocation problem</h3><p><strong>Theme: How to allocate a single broadcast channel among competing users</strong></p>
<h4 id="The-poor-performance-of-static-FDM-queueing-theory"><a href="#The-poor-performance-of-static-FDM-queueing-theory" class="headerlink" title="The poor performance of static FDM: queueing theory"></a>The poor performance of static FDM: queueing theory</h4><p>a channel of capacity <strong><em>C</em></strong> bps;</p>
<p>mean time delay(时延): <strong><em>T</em></strong> ;</p>
<p>the frames arrive randomly with an average arrival rate : <strong><em>λ</em></strong> frames/sec ；</p>
<p>the average length of frames is <strong><em>1/μ</em></strong>；</p>
<p>the service rate(服务率) of the channel is <strong><em>μC</em></strong> frames/sec</p>
<p><strong>The standard queueing theory result: T = 1/(μC-λ)</strong></p>
<h4 id="Dynamic-channel-allocation"><a href="#Dynamic-channel-allocation" class="headerlink" title="Dynamic channel allocation"></a>Dynamic channel allocation</h4><h5 id="The-assumption-bases-on-5-keys"><a href="#The-assumption-bases-on-5-keys" class="headerlink" title="The assumption bases on 5 keys:"></a>The assumption bases on 5 keys:</h5><p>Independent traffic</p>
<p>Single Channel</p>
<p>Observable Collision</p>
<p>Continuous or Slotted Time</p>
<p>Carrier Sense or No Carrier Sense</p>
<h3 id="4-2-Multiple-Access-Protocols"><a href="#4-2-Multiple-Access-Protocols" class="headerlink" title="4.2- Multiple Access Protocols"></a>4.2- Multiple Access Protocols</h3><h4 id="ALOHA"><a href="#ALOHA" class="headerlink" title="ALOHA"></a>ALOHA</h4><p>一个帧成功发送的条件：设发送一帧所需时间为T，且帧长固定，必须在发送该帧前后各一段时间T内(共2T时间间隔)没有其他帧发送。</p>
<h5 id="Pure-ALOHA"><a href="#Pure-ALOHA" class="headerlink" title="Pure ALOHA"></a>Pure ALOHA</h5><p>Time is <strong><em>continuous</em></strong>. And if a station plan to send a frame,it will be <strong><em>No Carrier Sense</em></strong> </p>
<p>If the frame is destroyed, the sender must wait a random amount of time and sends it again.</p>
<p>We have made the frames all the same length so that the throughput(吞吐量) if ALOHA system is maximized</p>
<p>The <strong><em>efficiency</em></strong> of an ALOHA channel:</p>
<p>The throughput <strong>S</strong> = load <strong>G</strong> * probability of a transmission succeeding <strong>P<del>0</del></strong>,  </p>
<p>During a frame time , the probability that <strong>k</strong> frames are generated is :<strong>P[K]=G^K^e^-G^/k!</strong></p>
<p>So: during a given frame time, G frames are expected ,and P(k=0)=e^-G^                </p>
<p>during two frame times, the average number of generated frames is 2G and P(k=0)=e^-2G^</p>
<p>because of <strong>S=G<em>P<del>0</del>, S=G</em>e^-2G^</strong></p>
<p>The maximum throughput occurs when G=0.5，S=0.5e=0.184</p>
<h5 id=""><a href="#" class="headerlink" title=""></a><img src="C:\Users\14372\Desktop\1.png" alt="1"></h5><p>每终端每秒钟发送长度(信息到达率)λ：256/60</p>
<p>最多终端个数：*<strong>N=C<em>S/λ</em></strong>           S<del>max</del>=0.184</p>
<p>∴N<del>max</del>=2400*0.184/(256/60)=103.5</p>
<h5 id="Slotted-ALOHA"><a href="#Slotted-ALOHA" class="headerlink" title="Slotted ALOHA"></a>Slotted ALOHA</h5><p>A station is not permitted to send whenever the user types a line. Instead, it is required to wait  for the beginning of</p>
<p>the next slot.</p>
<p>The vulnerable period(冲突危险周期) becomes half of before. </p>
<p>During a frame time , the probability that <strong>k</strong> frames are generated is <strong><em>P[K]=G^K^e^-G^/k!</em></strong></p>
<p>and P(k=0)=e^-G^</p>
<p>∴throughput S=Ge^-G^ </p>
<p>The maximum throughput occurs when G=1, S=1/e.  The best we can hope for using slotted ALOHA is 37% of the slot empty, 37% success , 26% collisions. </p>
<p>TEST: the probability of avoiding a collision P(k=0)=e^-G^</p>
<p>​            the probability of collision is 1-P(k=0)=1-e^-G^</p>
<p>​            the probability of a transmission requires <strong>n</strong> attempts is <strong><em>P<del>n</del>=e^-G^（1-e^-G^）^k-1^</em></strong> </p>
<p>​            sum all above, the expected times of transmission <strong>E=e^G^</strong></p>
<h4 id="Carrier-Sense-Multiple-Access-Protocols-CSMA"><a href="#Carrier-Sense-Multiple-Access-Protocols-CSMA" class="headerlink" title="Carrier Sense Multiple  Access Protocols (CSMA)"></a>Carrier Sense Multiple  Access Protocols (CSMA)</h4><p>Station listens for a carrier before  Sending</p>
<p>If a collision occurs, waits for a random amount  of time and start all over again.</p>
<p><strong>1-persistent CSMA</strong></p>
<p>If the channel is busy, waits until it becomes  idle, then transmits frame immediately.</p>
<p>depends on 1、the number of frames that fit on the channel</p>
<p>​                    2、the bandwidth_delay product of the channel</p>
<p>Low delay when low load </p>
<p>Low throughput when high load</p>
<p><strong>Nonpersistent CSMA</strong></p>
<p>if the channel is busy, waits for a random amount  of time and sense channel again</p>
<p>longer delay than 1-persistent CSMA</p>
<p><strong>p-persistent CSMA</strong></p>
<p>applies to slotted channels</p>
<p>If the channel is busy, waits to the next slot </p>
<p>If idle, transmits frame with probability of p, with  a probability of q=1-p it defers to the next slot </p>
<p>Repeated until either the frame has been  transmitted or another station has begun  transmitting </p>
<p>If there had been a collision, waits a random time and starts again</p>
<p><strong>CSMA with Collision Detection    (CSMA/CD)</strong></p>
<p>The stations quickly detect the collision and abruptly stop transmitting as soon as it  detects a collision.</p>
<p>CSMA/CD with a single channel is  inherently <strong>a half-duplex system</strong>(半双工系统)</p>
<img src="C:\Users\14372\Desktop\2.png" alt="2" style="zoom:60%;" />

<p>If the time for a signal between two stations is t, a station cannot be sure that it has seized the channel until it has transmitted for 2t without hearing a collision,</p>
<p>So that this CSMA/CD can be seen as a slotted ALOHA with a slot width of 2t</p>
<h5 id="Collision-Free-Protocol"><a href="#Collision-Free-Protocol" class="headerlink" title="Collision-Free Protocol"></a>Collision-Free Protocol</h5><h6 id="A-Bit-Map-Protocol"><a href="#A-Bit-Map-Protocol" class="headerlink" title="A Bit_Map Protocol"></a>A Bit_Map Protocol</h6><p>Each contention period consists of N slots (bits),  with each station use one slot</p>
<p>If station have frames to send, it reserve it by fill  ‘1’ in its slot, after all N slots have passed by and been recognized, they begin transmitting frames in order </p>
<img src="C:\Users\14372\Desktop\3.png" alt="3" style="zoom:60%;"/>



<p>reservation protocols: reserve channel ownership in advance and prevent collisions</p>
<p>N station, contention time is <em>N</em> </p>
<p>One data frame is d bits, so time is <em>d</em></p>
<p>Low load: Efficiency=d/(d+N)</p>
<p>High load: Efficiency=d/(d+1)</p>
<h6 id="Binary-Countdown-二进制倒计数"><a href="#Binary-Countdown-二进制倒计数" class="headerlink" title="Binary Countdown(二进制倒计数)"></a>Binary Countdown(二进制倒计数)</h6><p>如果一个站想要使用信道，他就用二进制位串的形式广播自己的地址</p>
<p>仲裁规则：从最左边开始，一个站只要看到自己地址位中的0被改为1，就必须放弃竞争。n个站想要一同发送数据时，从最左边开始一位一位的进行or操作，知道只剩一个站的地址。</p>
<p>得到结果：高序站的优先级高</p>
<p>这种方法信道利用率(channel efficiency)=<em>d/(d+log<del>2</del>N)</em></p>
<h4 id="无线局域网协议"><a href="#无线局域网协议" class="headerlink" title="无线局域网协议"></a>无线局域网协议</h4><p>隐藏终端问题(hidden station problem):由于竞争者离得太远而导致站无法检测到潜在的竞争者</p>
<p>暴露终端问题(exposed station problem):开始传输之前，站不能知道接收方附近的无线电活动是否有影响。</p>
<h5 id="MACA-冲突避免多路访问"><a href="#MACA-冲突避免多路访问" class="headerlink" title="MACA(冲突避免多路访问)"></a>MACA(冲突避免多路访问)</h5><p>C——A—–&gt;B——D</p>
<p>A 首先给 B 发送一个 RTS(Request To Send)帧，B 用一个 CTS(Clear to Send)作为应答。A 在收到了 CTS 帧之后便开始传输，C收到A的RTS，收不到B的CTS，所以C自由活动除了对A。D收到B的CTS但没收到RTS，D就安静直到CTS要求的时间结束。</p>
<h3 id="4-3-Ethernet-以太网"><a href="#4-3-Ethernet-以太网" class="headerlink" title="4.3-Ethernet(以太网)"></a>4.3-Ethernet(以太网)</h3><p>中继器(repeater)：能接收，放大并在两个方向上重发信号</p>
<h4 id="经典以太网MAC子层协议-Classic-Ethernet-MAC-sub-protocol"><a href="#经典以太网MAC子层协议-Classic-Ethernet-MAC-sub-protocol" class="headerlink" title="经典以太网MAC子层协议(Classic Ethernet MAC sub protocol)"></a>经典以太网MAC子层协议(Classic Ethernet MAC sub protocol)</h4><p><img src="C:\Users\14372\AppData\Roaming\Typora\typora-user-images\image-20210615214036395.png" alt="image-20210615214036395" style="zoom: 40%;" />(a)以太网  （b) IEEE 802.3</p>
<p>Preamble:前导码，<strong>8</strong>个字节，前7个字节均为10101010，最后一个：10101011(802.3的帧起始定界符SOF)</p>
<p>Destination address:目标地址 ，<strong>6</strong>个字节</p>
<p>目标地址第一位为0：普通地址 </p>
<p>第一位为1：表示组地址，是一个组播</p>
<p>目标地址段全为1：广播</p>
<p>Source address:源地址 ，<strong>6</strong>个字节</p>
<p>以太网:Type:类型,<strong>2</strong>字节,告诉接收方阵内包含什么数据包.  0x0800==&gt;ipv4</p>
<p>802.3:Length类型,不定长度</p>
<p>Data:数据段:最多<strong>1500</strong>字节</p>
<p>以太网要求从目标地址算到校验和,这个有效帧必须至少<strong>64</strong>字节(即数据段至少为<strong>46</strong>字节),小于64则使用<strong>Pad</strong>(填充)来加入达到最少长度.限制最小帧为了防止过于短的帧还未到达,传送已经结束 .所以所有帧必须至少需要2t(传播时延)时间才能完成传送.</p>
<p>Checksum:校验和:最少<strong>4</strong>字节,32位.</p>
<p>数据字段的长度在 46 ~ 1500 字节之间。 有效的 MAC 帧长度为 64 ~ 1518 字节之间</p>
<p>以太网中使用的成帧方法是 <strong>物理层编码违例法</strong></p>
<h4 id="二进制指数后退的CSMA-CA-Binary-exponential-backoff"><a href="#二进制指数后退的CSMA-CA-Binary-exponential-backoff" class="headerlink" title="二进制指数后退的CSMA/CA(Binary exponential  backoff)"></a>二进制指数后退的CSMA/CA(Binary exponential  backoff)</h4><p>为达到以太网所允许的最长路径，时槽的长度被设置为 512 位时间，或 51.2 us。在第 i 次冲突后，在 0-2 i -1 之间随机选择一个数， 然后等待这么多个时槽。到达 10 次冲突之后，固定在最大值 1023 上</p>
<h4 id="以太网信道利用率"><a href="#以太网信道利用率" class="headerlink" title="以太网信道利用率"></a>以太网信道利用率</h4><p>针对每个帧e个竞争时间槽：</p>
<img src="C:\Users\14372\AppData\Roaming\Typora\typora-user-images\image-20210617150858434.png" alt="image-20210617150858434" style="zoom:50%;" />

<h4 id="交换机（switch）"><a href="#交换机（switch）" class="headerlink" title="交换机（switch）"></a>交换机（switch）</h4><p>完全避免冲突，一个站使用一个冲突域，比集线器提升性能</p>
<h4 id="快速以太网：802-3u"><a href="#快速以太网：802-3u" class="headerlink" title="快速以太网：802.3u"></a>快速以太网：802.3u</h4><p>保留原来帧格式，接口和过程规则，只是将比特时间从100ns降低到10ns。技术上照搬经典以太网，只是将电缆最大长度降低到十分之一</p>
<h4 id="千兆以太网："><a href="#千兆以太网：" class="headerlink" title="千兆以太网："></a>千兆以太网：</h4><p>全双工+半双工</p>
<p>半双工：载波扩充(carrier extension)</p>
<p>​            在普通帧后面加填充位到512字节，效率低</p>
<p>​              帧突发(frame bursting) </p>
<p>​            将多个待发送帧级联在一起，一次发送出去，不到512字节 再填充</p>
<p>巨型帧(Jumbo frame)</p>
<h4 id="万兆以太网："><a href="#万兆以太网：" class="headerlink" title="万兆以太网："></a>万兆以太网：</h4><p>只支持全双工</p>
<p>中继器：对网段上衰减的信号进行放大整形或再生，用于实现网络物理层的连接。只起扩展网段距离的作用，使用中继器互连的网 络在逻辑上仍属于同一网络，是物理层的设备。在经典以太网中，以太网允许使用 4 个中继器，最大长度从 500 米扩展到 2500 米。如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来。  </p>
<p>网桥：在不同或者相同的局域网之间存储和转发帧，ᨀ供数据链路层上协议转换功能。网桥的功能是通过过滤和转发实现的。常见 的网桥有透明网桥和源路由选择网桥 </p>
<p>路由器：作用于网络层，在不同的网络间存储和转发分组，供网络层上的协议转换。 </p>
<p>网关：对传输层和应用层协议进行协议转换的网间连接器，又称为协议转换器。网关一般有两种：传输层网关和应用层网关，分别 工作于传输层和应用层</p>
<h3 id="4-4-802-11"><a href="#4-4-802-11" class="headerlink" title="4.4-802.11"></a>4.4-802.11</h3><h4 id="带有冲突避免的CSMA：CSMA-CA"><a href="#带有冲突避免的CSMA：CSMA-CA" class="headerlink" title="带有冲突避免的CSMA：CSMA/CA"></a>带有冲突避免的CSMA：CSMA/CA</h4><p>发送前先检测，检测到有冲突 ，在后退时间槽数选择范围内：0~15，选择一个时间槽进行等待，倒数空闲时间槽，有帧发送则暂停倒数，直到倒数为0</p>
<h3 id="Virtual-LAN-VLAN"><a href="#Virtual-LAN-VLAN" class="headerlink" title="Virtual LAN(VLAN)"></a>Virtual LAN(VLAN)</h3><p>实际使用VLAN字段的是网桥和交换机，为了使用VLAN，网桥必须能感知VLAN,因为存在一些计算机和交换机无法感知VLAN，因此第一个VLAN感知的网桥在帧上添加一个VLAN字段，路径上最后一个网桥再将其删除</p>
<h2 id="5-Network"><a href="#5-Network" class="headerlink" title="5-Network"></a>5-Network</h2><p>数据链路层的目标是将帧从线的一端传送到另一端。 网络层是处理端到端数据传输的最低层</p>
<h3 id="5-1-Network-Layer-Design-Issues"><a href="#5-1-Network-Layer-Design-Issues" class="headerlink" title="5.1-Network Layer  Design Issues"></a>5.1-Network Layer  Design Issues</h3><h4 id="存储-转发数据包交换："><a href="#存储-转发数据包交换：" class="headerlink" title="存储-转发数据包交换："></a>存储-转发数据包交换：</h4><p>要发送一个数据包，就将其传输给最近的路由器，路由器的链路层对其进行校验和验证，就先将它存储起来，然后转发给下一个路由器直到主机</p>
<h4 id="数据包和虚电路"><a href="#数据包和虚电路" class="headerlink" title="数据包和虚电路"></a>数据包和虚电路</h4><p>无连接服务，每个数据包独立路由。这样的数据包常称为<strong>数据报</strong>，对应数据包网络</p>
<p>面向连接服务，先建立连接 。这个连接称为<strong>虚电路</strong>，对应虚电路网络 </p>
<p>数据包的路由过程：</p>
<img src="C:\Users\14372\AppData\Roaming\Typora\typora-user-images\image-20210617172830374.png" alt="image-20210617172830374" style="zoom:50%;" />

<p>每个表项由两部分组成：<em>目标地址</em> 和通往目标地址所使用的<em>出境线路</em></p>
<p>虚电路网络路由：</p>
<img src="C:\Users\14372\AppData\Roaming\Typora\typora-user-images\image-20210617191032341.png" alt="image-20210617191032341" style="zoom:50%;" />

<p>H1和H3的连接标识符一定为1，是他们唯一的连接。</p>
<h3 id="5-2-Routing-Algorithms"><a href="#5-2-Routing-Algorithms" class="headerlink" title="5.2-Routing Algorithms"></a>5.2-Routing Algorithms</h3><h4 id="转发"><a href="#转发" class="headerlink" title="转发"></a>转发</h4><p>每有一个数据包到达就对他进行处理，在路由表中查找该数据包对应的出境线路</p>
<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><p>负责生成和更新路由表</p>
<p>数据报：每到一个数据包都要重新选择路径</p>
<p>虚电路：建立一条新的虚电路需要路由</p>
<h4 id="最优化原则"><a href="#最优化原则" class="headerlink" title="最优化原则"></a>最优化原则</h4><p>从所有的元到一个指定目标的最优路径的集合构成一棵以<strong>目标节点</strong>为根的树，这棵树称为汇集树(sink tree)</p>
<p>汇集树不唯一，把所有可能的路径汇聚在一起，树就变成了有向无环图(DAG)</p>
<h4 id="最短路径算法"><a href="#最短路径算法" class="headerlink" title="最短路径算法"></a>最短路径算法</h4><p>跳数测量</p>
<p>物理距离测量</p>
<p>Dijkstra算法</p>
<h4 id="泛洪算法"><a href="#泛洪算法" class="headerlink" title="泛洪算法"></a>泛洪算法</h4><p>将每一个入境数据包发送到除了该数据到达的那条线以外的所有线。</p>
<p>发送的信息就是与本路由器相邻的所有路由器的链路状态，但这只是路由器所知道的部分信息。</p>
<p>“链路状态”就是说明本路由器都和哪些路由器相邻，以及该链路的“度量”(metric)。 </p>
<p>只有当链路状态发生变化时，路由器才用洪泛法向所有路由器发送此信息。</p>
<h4 id="距离矢量路由-distance-vector-routing"><a href="#距离矢量路由-distance-vector-routing" class="headerlink" title="距离矢量路由(distance vector routing)"></a>距离矢量路由(distance vector routing)</h4><p>每个路由器都有一个表，列出已知的到每个目标的最佳距离。每个邻居路由器会互相交换表 ，最终每个路由器都明白到每个目的地最优解。所以全网路由器的拓扑数据库是一致的，有错误也是一致的</p>
<img src="file:///D:\Tencent Softwares\QQ\Files\1437290395\Image\C2C\283D9772F65A47D381974C898302EE5C.png" alt="img" style="zoom:40%;" />

<h5 id="收敛-convergence"><a href="#收敛-convergence" class="headerlink" title="收敛(convergence)"></a>收敛(convergence)</h5><p>整个网络最佳路径的寻找过程称为收敛</p>
<h4 id="链路状态路由-link-state-routing"><a href="#链路状态路由-link-state-routing" class="headerlink" title="链路状态路由(link  state routing)"></a>链路状态路由(link  state routing)</h4><h5 id="发现邻居"><a href="#发现邻居" class="headerlink" title="发现邻居"></a>发现邻居</h5><p>路由器启动，向每条p2p链路上发送hello包 ，链路另一方会向它回复自己的名字；或者向broadcast网络广播hello接受回复.</p>
<p>简化LAN使用人造节点N代表广播LAN</p>
<h5 id="设置链路成本"><a href="#设置链路成本" class="headerlink" title="设置链路成本"></a>设置链路成本</h5><p>寻找最短路径，需要每条链路度量的成本或距离；链路延迟也可以当作成本；</p>
<p>成本与链接的线路带宽成反比，所以带宽越大，成本越低，越容易被选中；</p>
<h5 id="构造链路状态包"><a href="#构造链路状态包" class="headerlink" title="构造链路状态包"></a>构造链路状态包</h5><p>构建一个包含所有这些信息的数据包 ；</p>
<p>数据包内容：</p>
<p>发送方的标识符，序号，年龄，邻居列表，到这个邻居的延迟；</p>
<img src="C:\Users\14372\AppData\Roaming\Typora\typora-user-images\image-20210617200142849.png" alt="image-20210617200142849" style="zoom:44%;" />

<p>可以周期性的或者发生事情的时候创建数据表；</p>
<h5 id="分发链路状态包"><a href="#分发链路状态包" class="headerlink" title="分发链路状态包"></a>分发链路状态包</h5><p>使用的是可靠的扩散法 </p>
<p>为了控制泛洪，每个分组含一个序号，每次发送新分组时加一；</p>
<p>路由器记录信息对（源路由器，序号）</p>
<p>如果序列号回转了，则可能会产生混淆。解决办法：使用 32 位序号； </p>
<p>若路由器崩溃后，序号重置；或者序号出错； 解决方法：增加年龄（age）域，每秒钟年龄减 1，为零则丢弃；</p>
<p>链路状态包到达后，延迟一段时间，并与其它已到达的来自同一路由器的链路状态包比较序号，丢弃重复包，保留新包； </p>
<p>链路状态包需要应答；</p>
<h5 id="计算新路由"><a href="#计算新路由" class="headerlink" title="计算新路由"></a>计算新路由</h5><p>每个路由器都获得了自己的路由拓扑图 </p>
<p>根据 Dijkstra 算法计算最短路径; </p>
<p>生成自己的路由表</p>
<h4 id="分层路由"><a href="#分层路由" class="headerlink" title="分层路由"></a>分层路由</h4><p>应该分多少层？</p>
<p>考虑：1个由720个路由器构成的子网：720个路由表项</p>
<p>​                    24个区域，30个路由器：30个本地路由表项+（24-1）个远程表项=53个路由表项</p>
<p>​        8个族，9个区域，10个路由器：10个本地路由表项+（9-1）个其他区域表项+（8-1）个远程表项=25个路由表项</p>
<p>N个路由器，最优：lnN层</p>
<h3 id="5-3-拥塞控制-Congestion-control"><a href="#5-3-拥塞控制-Congestion-control" class="headerlink" title="5.3-拥塞控制(Congestion control )"></a>5.3-拥塞控制(Congestion control )</h3><p>负载的增加，突发流量与缓冲队列(太长和太短）都会造成拥塞</p>
<h4 id="流量感知路由"><a href="#流量感知路由" class="headerlink" title="流量感知路由"></a>流量感知路由</h4><h4 id="准入控制"><a href="#准入控制" class="headerlink" title="准入控制"></a>准入控制</h4><p>漏桶和令牌桶</p>
<h4 id="流量调节"><a href="#流量调节" class="headerlink" title="流量调节"></a>流量调节</h4><h5 id="路由器要确定何时接近拥塞"><a href="#路由器要确定何时接近拥塞" class="headerlink" title="路由器要确定何时接近拥塞"></a>路由器要确定何时接近拥塞</h5><p>EWMA:指数加权移动平均</p>
<p>路由器内部的排队延迟直接捕获了数据包经历过的任何拥塞</p>
<p>当有一个突发流量产生挤压时会跳跃。</p>
<p>为了维持良好的排队延迟估计d，假设顺势队列长度的样值为s，可以定期生成d，并按如下方式更新：</p>
<p>d<del>new</del>=αd<del>old</del>+(1+α)s</p>
<p>当d上升到某个阈值，路由器要注意拥塞 </p>
<h5 id="路由器要及时反馈信息给造成拥塞的发送方"><a href="#路由器要及时反馈信息给造成拥塞的发送方" class="headerlink" title="路由器要及时反馈信息给造成拥塞的发送方"></a>路由器要及时反馈信息给造成拥塞的发送方</h5><h5 id="不同反馈机制-都是已经发生拥塞，缓冲区溢出-："><a href="#不同反馈机制-都是已经发生拥塞，缓冲区溢出-：" class="headerlink" title="不同反馈机制(都是已经发生拥塞，缓冲区溢出)："></a>不同反馈机制(都是已经发生拥塞，缓冲区溢出)：</h5><p>抑制(choke packets)：</p>
<p>给发送方的抑制包中的目标地址取自某个被拥塞的数据包，告知发送方慢点</p>
<p>显式拥塞控制(ECN)：隐式地拥塞通知就是丢包 </p>
<p>路由器在它转发的任何一个数据包打上标记发出拥塞信号，发送应答包的时候告知发送方慢点</p>
<p>逐条后压：</p>
<p>让抑制包在每一条都发挥作用</p>
<h4 id="负载脱落-Load-shedding"><a href="#负载脱落-Load-shedding" class="headerlink" title="负载脱落(Load shedding)"></a>负载脱落(Load shedding)</h4><h5 id="随机早期检测-RED"><a href="#随机早期检测-RED" class="headerlink" title="随机早期检测:RED"></a>随机早期检测:RED</h5><p>当某条链路上的平均队列长度超过阈值，该链路被认为<strong>即将</strong>拥塞，所以随即丢弃一部分数据包，引起发送方注意，是隐式通知。</p>
<h3 id="5-4-QoS"><a href="#5-4-QoS" class="headerlink" title="5.4-QoS"></a>5.4-QoS</h3><p>四个因素：</p>
<p>可靠性，延迟，抖动，带宽</p>
<h4 id="漏桶算法：leaky-bucket-algorihm"><a href="#漏桶算法：leaky-bucket-algorihm" class="headerlink" title="漏桶算法：leaky bucket algorihm"></a>漏桶算法：leaky bucket algorihm</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/12/Computer%20Network/" data-id="ckq2c2d5d0003lsv0gugy77l8" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-链表第一题" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/09/%E9%93%BE%E8%A1%A8%E7%AC%AC%E4%B8%80%E9%A2%98/" class="article-date">
  <time class="dt-published" datetime="2021-03-09T05:00:02.964Z" itemprop="datePublished">2021-03-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="关于链表的leetcode习题"><a href="#关于链表的leetcode习题" class="headerlink" title="关于链表的leetcode习题"></a>关于链表的leetcode习题</h3><h1 id="1-链表反转-Num-206"><a href="#1-链表反转-Num-206" class="headerlink" title="1.链表反转(Num.206)"></a>1.链表反转(Num.206)</h1><h3 id="题目描述：反转一个单链表"><a href="#题目描述：反转一个单链表" class="headerlink" title="题目描述：反转一个单链表"></a>题目描述：反转一个单链表</h3><pre><code>输入：1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;null
输出：5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;null

/**
 * Definition for singly-linked list.
 * struct ListNode &#123;
 *     int val;
 *     struct ListNode *next;
 * &#125;;
 */</code></pre>
<h2 id="解法一：双指针法（迭代算法）"><a href="#解法一：双指针法（迭代算法）" class="headerlink" title="解法一：双指针法（迭代算法）"></a>解法一：双指针法（迭代算法）</h2><pre><code>struct ListNode* reverseList(struct ListNode* head)&#123;
    struct ListNode *pre,*cur,*flag;
    cur=head;
    pre=NULL;
    while(cur)
       &#123;
        flag=cur-&gt;next;
        cur-&gt;next=pre;
        pre=cur;
        cur=flag;
    &#125;
    return pre;
&#125;</code></pre>
<h3 id="解题思路：整个链表的反转其实就是将整个链表各个节点的next指针都指向前一个也就是next指针的反转，那么就涉及两个指针，这里用的是pre指针和cur指针来进行标识。那么很自然的就有每次循环中的"><a href="#解题思路：整个链表的反转其实就是将整个链表各个节点的next指针都指向前一个也就是next指针的反转，那么就涉及两个指针，这里用的是pre指针和cur指针来进行标识。那么很自然的就有每次循环中的" class="headerlink" title="解题思路：整个链表的反转其实就是将整个链表各个节点的next指针都指向前一个也就是next指针的反转，那么就涉及两个指针，这里用的是pre指针和cur指针来进行标识。那么很自然的就有每次循环中的"></a>解题思路：整个链表的反转其实就是将整个链表各个节点的next指针都指向前一个也就是next指针的反转，那么就涉及两个指针，这里用的是pre指针和cur指针来进行标识。那么很自然的就有每次循环中的</h3><pre><code>cur-&gt;next=pre;
pre=cur;</code></pre>
<h3 id="两行代码出现。接下来一个个的数字向后继续直到指向链表结束即可，但是这里出现了一个问题，就是当一个cur-gt-next指针指向的数字是它的前驱节点，这样就没办法向后继续了，所以在cur-gt-next改变指向对象之前先将其保存在一个另外的指针中，这样一次反转结束以后就能继续进行下一节点的反转。这里我们使用的是flag指针来做保存。这样就是循环中的算法思路。"><a href="#两行代码出现。接下来一个个的数字向后继续直到指向链表结束即可，但是这里出现了一个问题，就是当一个cur-gt-next指针指向的数字是它的前驱节点，这样就没办法向后继续了，所以在cur-gt-next改变指向对象之前先将其保存在一个另外的指针中，这样一次反转结束以后就能继续进行下一节点的反转。这里我们使用的是flag指针来做保存。这样就是循环中的算法思路。" class="headerlink" title="两行代码出现。接下来一个个的数字向后继续直到指向链表结束即可，但是这里出现了一个问题，就是当一个cur-&gt;next指针指向的数字是它的前驱节点，这样就没办法向后继续了，所以在cur-&gt;next改变指向对象之前先将其保存在一个另外的指针中，这样一次反转结束以后就能继续进行下一节点的反转。这里我们使用的是flag指针来做保存。这样就是循环中的算法思路。"></a>两行代码出现。接下来一个个的数字向后继续直到指向链表结束即可，但是这里出现了一个问题，就是当一个cur-&gt;next指针指向的数字是它的前驱节点，这样就没办法向后继续了，所以在cur-&gt;next改变指向对象之前先将其保存在一个另外的指针中，这样一次反转结束以后就能继续进行下一节点的反转。这里我们使用的是flag指针来做保存。这样就是循环中的算法思路。</h3><h3 id="cur指针要对链表做遍历，所以刚开始指向的是head指针，而循环的判定条件就是链表遍历完成，所以截至条件为cur指针不为空。而在刚开始，head指向的节点是没有前驱节点的，所以pre指针为空。"><a href="#cur指针要对链表做遍历，所以刚开始指向的是head指针，而循环的判定条件就是链表遍历完成，所以截至条件为cur指针不为空。而在刚开始，head指向的节点是没有前驱节点的，所以pre指针为空。" class="headerlink" title="cur指针要对链表做遍历，所以刚开始指向的是head指针，而循环的判定条件就是链表遍历完成，所以截至条件为cur指针不为空。而在刚开始，head指向的节点是没有前驱节点的，所以pre指针为空。"></a>cur指针要对链表做遍历，所以刚开始指向的是head指针，而循环的判定条件就是链表遍历完成，所以截至条件为cur指针不为空。而在刚开始，head指向的节点是没有前驱节点的，所以pre指针为空。</h3><h3 id="最后要返回的是什么指针呢，是head指针吗，我们要看表头在哪里，很明显，对于最后输出的54321，表头是指向5的，而最后cur指向空节点，pre指向5，所以对应的是pre指针，将其返回即可。"><a href="#最后要返回的是什么指针呢，是head指针吗，我们要看表头在哪里，很明显，对于最后输出的54321，表头是指向5的，而最后cur指向空节点，pre指向5，所以对应的是pre指针，将其返回即可。" class="headerlink" title="最后要返回的是什么指针呢，是head指针吗，我们要看表头在哪里，很明显，对于最后输出的54321，表头是指向5的，而最后cur指向空节点，pre指向5，所以对应的是pre指针，将其返回即可。"></a>最后要返回的是什么指针呢，是head指针吗，我们要看表头在哪里，很明显，对于最后输出的54321，表头是指向5的，而最后cur指向空节点，pre指向5，所以对应的是pre指针，将其返回即可。</h3><h2 id="解法二：递归法"><a href="#解法二：递归法" class="headerlink" title="解法二：递归法"></a>解法二：递归法</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/09/%E9%93%BE%E8%A1%A8%E7%AC%AC%E4%B8%80%E9%A2%98/" data-id="ckq2c2d5c0002lsv0ej5f26yi" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-指针部分总结（下）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/20/%E6%8C%87%E9%92%88%E9%83%A8%E5%88%86%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%8B%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2021-02-20T09:28:22.358Z" itemprop="datePublished">2021-02-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/20/%E6%8C%87%E9%92%88%E9%83%A8%E5%88%86%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%8B%EF%BC%89/">指针的部分总结（下）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="四、指针的使用"><a href="#四、指针的使用" class="headerlink" title="四、指针的使用"></a>四、指针的使用</h1><h2 id="5-结构体指针"><a href="#5-结构体指针" class="headerlink" title="5.结构体指针"></a>5.结构体指针</h2><h3 id="1-定义结构的一般形式为："><a href="#1-定义结构的一般形式为：" class="headerlink" title="(1)定义结构的一般形式为："></a>(1)定义结构的一般形式为：</h3><h3 id="struct-结构名"><a href="#struct-结构名" class="headerlink" title="struct    结构名{"></a>struct    结构名{</h3><h3 id="成员列表"><a href="#成员列表" class="headerlink" title="成员列表"></a>成员列表</h3><h3 id="；"><a href="#；" class="headerlink" title="}；"></a>}；</h3><h3 id="2-使用指针来指向结构的解释说明："><a href="#2-使用指针来指向结构的解释说明：" class="headerlink" title="(2)使用指针来指向结构的解释说明："></a>(2)使用指针来指向结构的解释说明：</h3><pre><code>struct guy&#123;
char favfood;
char job;
float income;
&#125;

struct guy fellow[2];/*这是一个结构数组*/
struct guy * him/*声明一个指向结构的指针*/
him=fellow[0]/*告诉指针它指向的地址*/</code></pre>
<h3 id="声明指针的语法和其他的指针声明一样，意味着指针him可以指向任何现有的guy类型的结构。而令指针指向fellow-0-则是对该指针的初始化。"><a href="#声明指针的语法和其他的指针声明一样，意味着指针him可以指向任何现有的guy类型的结构。而令指针指向fellow-0-则是对该指针的初始化。" class="headerlink" title="声明指针的语法和其他的指针声明一样，意味着指针him可以指向任何现有的guy类型的结构。而令指针指向fellow[0]则是对该指针的初始化。"></a>声明指针的语法和其他的指针声明一样，意味着指针him可以指向任何现有的guy类型的结构。而令指针指向fellow[0]则是对该指针的初始化。</h3><h3 id="同样的，如果对him加1，那么指针指向的地址就加了1-1-4-6个字节，因为每个结构体占的内存空间为6。"><a href="#同样的，如果对him加1，那么指针指向的地址就加了1-1-4-6个字节，因为每个结构体占的内存空间为6。" class="headerlink" title="同样的，如果对him加1，那么指针指向的地址就加了1+1+4=6个字节，因为每个结构体占的内存空间为6。"></a>同样的，如果对him加1，那么指针指向的地址就加了1+1+4=6个字节，因为每个结构体占的内存空间为6。</h3><h3 id="3-使用指针来访问结构体的成员时有两种方法："><a href="#3-使用指针来访问结构体的成员时有两种方法：" class="headerlink" title="(3)使用指针来访问结构体的成员时有两种方法："></a>(3)使用指针来访问结构体的成员时有两种方法：</h3><h3 id="①结构指针后跟-gt-运算符，而需要注意的是结构名之后则需跟-点-运算符-即"><a href="#①结构指针后跟-gt-运算符，而需要注意的是结构名之后则需跟-点-运算符-即" class="headerlink" title="①结构指针后跟-&gt;运算符，而需要注意的是结构名之后则需跟.(点)运算符,即:"></a>①结构指针后跟-&gt;运算符，而需要注意的是结构名之后则需跟.(点)运算符,即:</h3><pre><code>him-&gt;job is fellow[0].j0b if him == fellow[0]</code></pre>
<h3 id="②利用-amp-和-的互逆性-因为him-amp-fellow-0-则有-him-fellow-0"><a href="#②利用-amp-和-的互逆性-因为him-amp-fellow-0-则有-him-fellow-0" class="headerlink" title="②利用&amp;和* 的互逆性,因为him=&amp;fellow[0],则有*him=fellow[0]"></a>②利用&amp;和* 的互逆性,因为him=&amp;fellow[0],则有*him=fellow[0]</h3><h3 id="4-使用指针传递结构成员"><a href="#4-使用指针传递结构成员" class="headerlink" title="(4)使用指针传递结构成员"></a>(4)使用指针传递结构成员</h3><pre><code>#include &lt;stdio.h&gt;

double people(const struct guy *)//people函数使用了指针作为参数

int main()
&#123;
    printf(&quot;%.2f&quot;,people(&amp;him));//把地址&amp;him传给该函数使得指针指向结构him
    return 0;
&#125;

double people(const struct guy * anyone)//确定指针为anyone
&#123;
    return anyone-&gt;job;
&#125;</code></pre>
<h3 id="需要注意的是-数组可以通过使用其数组名作为数组地址-但是结构不可以使用结构名作为其地址必须使用-amp-运算符"><a href="#需要注意的是-数组可以通过使用其数组名作为数组地址-但是结构不可以使用结构名作为其地址必须使用-amp-运算符" class="headerlink" title="需要注意的是,数组可以通过使用其数组名作为数组地址,但是结构不可以使用结构名作为其地址必须使用&amp;运算符"></a>需要注意的是,数组可以通过使用其数组名作为数组地址,但是结构不可以使用结构名作为其地址必须使用&amp;运算符</h3><h3 id="5-结构指针与malloc"><a href="#5-结构指针与malloc" class="headerlink" title="(5)结构指针与malloc"></a>(5)结构指针与malloc</h3><h3 id="当我们在结构中使用指针来存储字符串时，例如："><a href="#当我们在结构中使用指针来存储字符串时，例如：" class="headerlink" title="当我们在结构中使用指针来存储字符串时，例如："></a>当我们在结构中使用指针来存储字符串时，例如：</h3><pre><code>struct pnames &#123;
    char * first;
    char * last;
&#125;</code></pre>
<h3 id="与常用的字符数组不同的是是现在字符串存储于编译器存储字符的任意位置，不局限于结构内部，这个结构中存放的只有8字节的地址信息。"><a href="#与常用的字符数组不同的是是现在字符串存储于编译器存储字符的任意位置，不局限于结构内部，这个结构中存放的只有8字节的地址信息。" class="headerlink" title="与常用的字符数组不同的是是现在字符串存储于编译器存储字符的任意位置，不局限于结构内部，这个结构中存放的只有8字节的地址信息。"></a>与常用的字符数组不同的是是现在字符串存储于编译器存储字符的任意位置，不局限于结构内部，这个结构中存放的只有8字节的地址信息。</h3><h3 id="但是需要注意的是，pnames结构并不会为字符串分配空间，为了避免出错，first，last所指向的字符串一定是在程序其他地方已经分配过空间，这里我们经常用的方法是使用malloc-分配内存。"><a href="#但是需要注意的是，pnames结构并不会为字符串分配空间，为了避免出错，first，last所指向的字符串一定是在程序其他地方已经分配过空间，这里我们经常用的方法是使用malloc-分配内存。" class="headerlink" title="但是需要注意的是，pnames结构并不会为字符串分配空间，为了避免出错，first，last所指向的字符串一定是在程序其他地方已经分配过空间，这里我们经常用的方法是使用malloc()分配内存。"></a>但是需要注意的是，pnames结构并不会为字符串分配空间，为了避免出错，first，last所指向的字符串一定是在程序其他地方已经分配过空间，这里我们经常用的方法是使用malloc()分配内存。</h3><pre><code>pnames-&gt;first=(char*)malloc(sizeof(char))//成员指针被分配内存
free(pnames-&gt;first)//不要忘记free掉不用的内存</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/20/%E6%8C%87%E9%92%88%E9%83%A8%E5%88%86%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%8B%EF%BC%89/" data-id="ckli716ss00023sv03gwb4qwp" data-title="指针的部分总结（下）" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-指针部分总结（上）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/12/%E6%8C%87%E9%92%88%E9%83%A8%E5%88%86%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%8A%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2021-01-12T05:59:41.728Z" itemprop="datePublished">2021-01-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/12/%E6%8C%87%E9%92%88%E9%83%A8%E5%88%86%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%8A%EF%BC%89/">指针的部分总结（上）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="指针是C语言的关键所在，可以说掌握了指针就打通了学习C语言的经脉。作为C语言的特点也是难点，一部分同学在学习指针的时候会感觉云里雾里，希望我的博客会对学习困难的同学有一定帮助。大家一起加油-ง-•-•-ง！"><a href="#指针是C语言的关键所在，可以说掌握了指针就打通了学习C语言的经脉。作为C语言的特点也是难点，一部分同学在学习指针的时候会感觉云里雾里，希望我的博客会对学习困难的同学有一定帮助。大家一起加油-ง-•-•-ง！" class="headerlink" title="指针是C语言的关键所在，可以说掌握了指针就打通了学习C语言的经脉。作为C语言的特点也是难点，一部分同学在学习指针的时候会感觉云里雾里，希望我的博客会对学习困难的同学有一定帮助。大家一起加油(ง •_•)ง！"></a>指针是C语言的关键所在，可以说掌握了指针就打通了学习C语言的经脉。作为C语言的特点也是难点，一部分同学在学习指针的时候会感觉云里雾里，希望我的博客会对学习困难的同学有一定帮助。大家一起加油(ง •_•)ง！</h3><hr>
<h1 id="一、指针是什么："><a href="#一、指针是什么：" class="headerlink" title="一、指针是什么："></a>一、指针是什么：</h1><h3 id="指针其实也是一种变量，与int、char一样，代表的是不同的数据类型。只是int类型变量以整数作为其数值，char类型变量以字符作为其数值，而指针变量的数值是地址。所以指针也可以进行一系列变量可以进行的操作，比如对指针赋值，指针的加减，两个指针大小的比较（同类型）等等。"><a href="#指针其实也是一种变量，与int、char一样，代表的是不同的数据类型。只是int类型变量以整数作为其数值，char类型变量以字符作为其数值，而指针变量的数值是地址。所以指针也可以进行一系列变量可以进行的操作，比如对指针赋值，指针的加减，两个指针大小的比较（同类型）等等。" class="headerlink" title="指针其实也是一种变量，与int、char一样，代表的是不同的数据类型。只是int类型变量以整数作为其数值，char类型变量以字符作为其数值，而指针变量的数值是地址。所以指针也可以进行一系列变量可以进行的操作，比如对指针赋值，指针的加减，两个指针大小的比较（同类型）等等。"></a>指针其实也是一种变量，与int、char一样，代表的是不同的数据类型。只是int类型变量以整数作为其数值，char类型变量以字符作为其数值，而指针变量的数值是地址。所以指针也可以进行一系列变量可以进行的操作，比如对指针赋值，指针的加减，两个指针大小的比较（同类型）等等。</h3><hr>
<h1 id="二、为什么要学习指针-："><a href="#二、为什么要学习指针-：" class="headerlink" title="二、为什么要学习指针 #："></a>二、为什么要学习指针 #：</h1><h3 id="这里有一个很多人问的问题：我们到底为什么需要指针，直接用变量名对数值进行操作不就可以了吗？"><a href="#这里有一个很多人问的问题：我们到底为什么需要指针，直接用变量名对数值进行操作不就可以了吗？" class="headerlink" title="这里有一个很多人问的问题：我们到底为什么需要指针，直接用变量名对数值进行操作不就可以了吗？"></a>这里有一个很多人问的问题：我们到底为什么需要指针，直接用变量名对数值进行操作不就可以了吗？</h3><h3 id="用变量名当然可以，但是只是用变量名会出现很多bug，因为人脑的思维方式和电脑的运作方式不一样。我们知道int代表整数啊，char代表字符啊，但是计算机不知道，计算机只知道地址和指令（这个也是当本菜鸡学习汇编指令之后才明白的）。"><a href="#用变量名当然可以，但是只是用变量名会出现很多bug，因为人脑的思维方式和电脑的运作方式不一样。我们知道int代表整数啊，char代表字符啊，但是计算机不知道，计算机只知道地址和指令（这个也是当本菜鸡学习汇编指令之后才明白的）。" class="headerlink" title="用变量名当然可以，但是只是用变量名会出现很多bug，因为人脑的思维方式和电脑的运作方式不一样。我们知道int代表整数啊，char代表字符啊，但是计算机不知道，计算机只知道地址和指令（这个也是当本菜鸡学习汇编指令之后才明白的）。"></a>用变量名当然可以，但是只是用变量名会出现很多bug，因为人脑的思维方式和电脑的运作方式不一样。我们知道int代表整数啊，char代表字符啊，但是计算机不知道，计算机只知道地址和指令（这个也是当本菜鸡学习汇编指令之后才明白的）。</h3><h3 id="当我们查看编译之后的代码时，它长这样："><a href="#当我们查看编译之后的代码时，它长这样：" class="headerlink" title="当我们查看编译之后的代码时，它长这样："></a>当我们查看编译之后的代码时，它长这样：</h3><p><img src="https://i.loli.net/2021/01/12/c1eigSFwhr9YNlj.png"></p>
<h3 id="这里并没有我们习以为常的各种变量名，只有一系列抽象的数字串。所以在处理一些复杂项目的时候，全篇使用变量名可能会出现一些让人摸不着头脑的bug，而这些错误的源头位置也较难发现。"><a href="#这里并没有我们习以为常的各种变量名，只有一系列抽象的数字串。所以在处理一些复杂项目的时候，全篇使用变量名可能会出现一些让人摸不着头脑的bug，而这些错误的源头位置也较难发现。" class="headerlink" title="这里并没有我们习以为常的各种变量名，只有一系列抽象的数字串。所以在处理一些复杂项目的时候，全篇使用变量名可能会出现一些让人摸不着头脑的bug，而这些错误的源头位置也较难发现。"></a>这里并没有我们习以为常的各种变量名，只有一系列抽象的数字串。所以在处理一些复杂项目的时候，全篇使用变量名可能会出现一些让人摸不着头脑的bug，而这些错误的源头位置也较难发现。</h3><p><img src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2760428880,4127050796&fm=26&gp=0.jpg"></p>
<h3 id="这样说还是抽象了点，接下来举个栗子："><a href="#这样说还是抽象了点，接下来举个栗子：" class="headerlink" title="这样说还是抽象了点，接下来举个栗子："></a>这样说还是抽象了点，接下来举个栗子：</h3><p><img src="https://i.loli.net/2021/01/12/o5HTvUbYjl4D6CF.png"></p>
<h3 id="如图是李明的部分代码，他在主函数中定义了整型变量a之后，在函数fun1中对a进行了修改，但在输出结果中，a的值没有改变。像这样，多个函数要对同一个数据进行读写操作的时候就需要用到指针。"><a href="#如图是李明的部分代码，他在主函数中定义了整型变量a之后，在函数fun1中对a进行了修改，但在输出结果中，a的值没有改变。像这样，多个函数要对同一个数据进行读写操作的时候就需要用到指针。" class="headerlink" title="如图是李明的部分代码，他在主函数中定义了整型变量a之后，在函数fun1中对a进行了修改，但在输出结果中，a的值没有改变。像这样，多个函数要对同一个数据进行读写操作的时候就需要用到指针。"></a>如图是李明的部分代码，他在主函数中定义了整型变量a之后，在函数fun1中对a进行了修改，但在输出结果中，a的值没有改变。像这样，多个函数要对同一个数据进行读写操作的时候就需要用到指针。</h3><h3 id="需要理解的是，在函数中对数据的改动只是对数据副本的更改，原本不动。如果想要对原值进行修改，就需要传入数据的地址，这样程序才能找到地址将其修改"><a href="#需要理解的是，在函数中对数据的改动只是对数据副本的更改，原本不动。如果想要对原值进行修改，就需要传入数据的地址，这样程序才能找到地址将其修改" class="headerlink" title="需要理解的是，在函数中对数据的改动只是对数据副本的更改，原本不动。如果想要对原值进行修改，就需要传入数据的地址，这样程序才能找到地址将其修改"></a>需要理解的是，在函数中对数据的改动只是对数据副本的更改，原本不动。如果想要对原值进行修改，就需要传入数据的地址，这样程序才能找到地址将其修改</h3><hr>
<h1 id="三、对某个特定指针的理解："><a href="#三、对某个特定指针的理解：" class="headerlink" title="三、对某个特定指针的理解："></a>三、对某个特定指针的理解：</h1><h2 id="1-个人认为，学好指针的关键在于对计算机内存的理解。"><a href="#1-个人认为，学好指针的关键在于对计算机内存的理解。" class="headerlink" title="1. 个人认为，学好指针的关键在于对计算机内存的理解。"></a>1. 个人认为，学好指针的关键在于对计算机内存的理解。</h2><h3 id="计算机的内存是用于储存数据的空间，空间的分布是建立在字节-byte-和位-bit-的概念之上的。一个位能表示0-1两个状态，而一个字节是一个8位的块，大多数计算机将字节作为最小的可寻址内存单位。不同的数据类型的占用内存的大小不同，int类型的数据占用4字节的内存而char类型的数据占用1字节的内存。"><a href="#计算机的内存是用于储存数据的空间，空间的分布是建立在字节-byte-和位-bit-的概念之上的。一个位能表示0-1两个状态，而一个字节是一个8位的块，大多数计算机将字节作为最小的可寻址内存单位。不同的数据类型的占用内存的大小不同，int类型的数据占用4字节的内存而char类型的数据占用1字节的内存。" class="headerlink" title="计算机的内存是用于储存数据的空间，空间的分布是建立在字节(byte)和位(bit)的概念之上的。一个位能表示0/1两个状态，而一个字节是一个8位的块，大多数计算机将字节作为最小的可寻址内存单位。不同的数据类型的占用内存的大小不同，int类型的数据占用4字节的内存而char类型的数据占用1字节的内存。"></a>计算机的内存是用于储存数据的空间，空间的分布是建立在字节(byte)和位(bit)的概念之上的。一个位能表示0/1两个状态，而一个字节是一个8位的块，大多数计算机将字节作为最小的可寻址内存单位。不同的数据类型的占用内存的大小不同，int类型的数据占用4字节的内存而char类型的数据占用1字节的内存。</h3><p><img src="https://i.loli.net/2021/01/12/4FB6Edy8fmUkbVn.png"></p>
<h3 id="当我们声明一个变量的时候，实际上是向内存申请了一块空间来存放数据，而一个指针存储的数据就是该指针所指向变量的起始地址。"><a href="#当我们声明一个变量的时候，实际上是向内存申请了一块空间来存放数据，而一个指针存储的数据就是该指针所指向变量的起始地址。" class="headerlink" title="当我们声明一个变量的时候，实际上是向内存申请了一块空间来存放数据，而一个指针存储的数据就是该指针所指向变量的起始地址。"></a>当我们声明一个变量的时候，实际上是向内存申请了一块空间来存放数据，而一个指针存储的数据就是该指针所指向变量的起始地址。</h3><h2 id="2-当我们看到一个指针的时候，需要搞定四道关卡：指针的类型、指针所指数据的类型、指针的值、指针本身所占的内存。"><a href="#2-当我们看到一个指针的时候，需要搞定四道关卡：指针的类型、指针所指数据的类型、指针的值、指针本身所占的内存。" class="headerlink" title="2.当我们看到一个指针的时候，需要搞定四道关卡：指针的类型、指针所指数据的类型、指针的值、指针本身所占的内存。"></a>2.当我们看到一个指针的时候，需要搞定四道关卡：指针的类型、指针所指数据的类型、指针的值、指针本身所占的内存。</h2><h3 id="首先说用到最多的：指针的类型和指针所指数据的类型。"><a href="#首先说用到最多的：指针的类型和指针所指数据的类型。" class="headerlink" title="首先说用到最多的：指针的类型和指针所指数据的类型。"></a>首先说用到最多的：指针的类型和指针所指数据的类型。</h3><h3 id="从语法的角度看，将声明语句中指针的名字去掉剩下的就是指针的类型，而将指针名字以及其左边的指针声明符-去掉之后剩下的就是指针指向数据的类型。"><a href="#从语法的角度看，将声明语句中指针的名字去掉剩下的就是指针的类型，而将指针名字以及其左边的指针声明符-去掉之后剩下的就是指针指向数据的类型。" class="headerlink" title="从语法的角度看，将声明语句中指针的名字去掉剩下的就是指针的类型，而将指针名字以及其左边的指针声明符*去掉之后剩下的就是指针指向数据的类型。"></a>从语法的角度看，将声明语句中指针的名字去掉剩下的就是指针的类型，而将指针名字以及其左边的指针声明符*去掉之后剩下的就是指针指向数据的类型。</h3><h3 id="接下来还是举一些例子："><a href="#接下来还是举一些例子：" class="headerlink" title="接下来还是举一些例子："></a>接下来还是举一些例子：</h3><h3 id="1-int-ptr"><a href="#1-int-ptr" class="headerlink" title="(1)int *ptr"></a>(1)<code>int *ptr</code></h3><h3 id="指针类型：int"><a href="#指针类型：int" class="headerlink" title="指针类型：int*"></a>指针类型：<code>int*</code></h3><h3 id="指针指向数据类型：int"><a href="#指针指向数据类型：int" class="headerlink" title="指针指向数据类型：int"></a>指针指向数据类型：<code>int</code></h3><h3 id="2-char-ptr"><a href="#2-char-ptr" class="headerlink" title="(2)    char *ptr"></a>(2)    <code>char *ptr</code></h3><h3 id="指针类型：char"><a href="#指针类型：char" class="headerlink" title="指针类型：char*"></a>指针类型：<code>char*</code></h3><h3 id="指针指向数据类型：char"><a href="#指针指向数据类型：char" class="headerlink" title="指针指向数据类型：char"></a>指针指向数据类型：<code>char</code></h3><h3 id="3-int-ptr"><a href="#3-int-ptr" class="headerlink" title="(3)    int **ptr"></a>(3)    <code>int **ptr</code></h3><h3 id="指针类型：int-1"><a href="#指针类型：int-1" class="headerlink" title="指针类型：int**"></a>指针类型：<code>int**</code></h3><h3 id="指针指向数据类型：int-1"><a href="#指针指向数据类型：int-1" class="headerlink" title="指针指向数据类型：int*"></a>指针指向数据类型：<code>int*</code></h3><h3 id="4-int-ptr-3"><a href="#4-int-ptr-3" class="headerlink" title="(4)    int(*ptr)[3]"></a>(4)    <code>int(*ptr)[3]</code></h3><h3 id="指针类型：int-3"><a href="#指针类型：int-3" class="headerlink" title="指针类型：int*[3]"></a>指针类型：<code>int*[3]</code></h3><h3 id="指针指向数据类型：int-3"><a href="#指针指向数据类型：int-3" class="headerlink" title="指针指向数据类型：int[3]"></a>指针指向数据类型：<code>int[3]</code></h3><h3 id="在这个例子中，从名称ptr出发，ptr先与-结合-加括号的原因是-优先级高于-，所以分析的时候可以去掉括号-，说明ptr是一个指针，指针与-结合说明指针指向的内容是数组，然后与int结合说明数组元素是整型，所以p是指向整型数组的指针。"><a href="#在这个例子中，从名称ptr出发，ptr先与-结合-加括号的原因是-优先级高于-，所以分析的时候可以去掉括号-，说明ptr是一个指针，指针与-结合说明指针指向的内容是数组，然后与int结合说明数组元素是整型，所以p是指向整型数组的指针。" class="headerlink" title="在这个例子中，从名称ptr出发，ptr先与*结合(加括号的原因是[ ]优先级高于 *，所以分析的时候可以去掉括号)，说明ptr是一个指针，指针与[]结合说明指针指向的内容是数组，然后与int结合说明数组元素是整型，所以p是指向整型数组的指针。"></a>在这个例子中，从名称ptr出发，ptr先与*结合(加括号的原因是[ ]优先级高于 *，所以分析的时候可以去掉括号)，说明ptr是一个指针，指针与[]结合说明指针指向的内容是数组，然后与int结合说明数组元素是整型，所以p是指向整型数组的指针。</h3><h3 id="与指向数组的指针相对应的是指针数组：int-ptr-3"><a href="#与指向数组的指针相对应的是指针数组：int-ptr-3" class="headerlink" title="与指向数组的指针相对应的是指针数组：int*ptr[3]"></a>与指向数组的指针相对应的是指针数组：int*ptr[3]</h3><h3 id="因为ptr首先与-结合，所以ptr是一个数组，然后与-结合，说明这个数组中的元素是指针，然后与int结合，说明指针指向的是内容是整型。所以这是一个指向整型数据的指针组成的数组。"><a href="#因为ptr首先与-结合，所以ptr是一个数组，然后与-结合，说明这个数组中的元素是指针，然后与int结合，说明指针指向的是内容是整型。所以这是一个指向整型数据的指针组成的数组。" class="headerlink" title="因为ptr首先与[ ]结合，所以ptr是一个数组，然后与*结合，说明这个数组中的元素是指针，然后与int结合，说明指针指向的是内容是整型。所以这是一个指向整型数据的指针组成的数组。"></a>因为ptr首先与[ ]结合，所以ptr是一个数组，然后与*结合，说明这个数组中的元素是指针，然后与int结合，说明指针指向的是内容是整型。所以这是一个指向整型数据的指针组成的数组。</h3><h3 id="5-int-ptr-4"><a href="#5-int-ptr-4" class="headerlink" title="(5)    int *(*ptr)[4]"></a>(5)    <code>int *(*ptr)[4]</code></h3><h3 id="指针类型：int-4"><a href="#指针类型：int-4" class="headerlink" title="指针类型：int**[4]"></a>指针类型：<code>int**[4]</code></h3><h3 id="指针指向数据类型：int-4"><a href="#指针指向数据类型：int-4" class="headerlink" title="指针指向数据类型：int*[4]"></a>指针指向数据类型：<code>int*[4]</code></h3><h3 id="通过上一个例子的解释，例-5-就很明了是指向数组的指针，而这个数组是由指向整型数据的指针组成的。"><a href="#通过上一个例子的解释，例-5-就很明了是指向数组的指针，而这个数组是由指向整型数据的指针组成的。" class="headerlink" title="通过上一个例子的解释，例(5)就很明了是指向数组的指针，而这个数组是由指向整型数据的指针组成的。"></a>通过上一个例子的解释，例(5)就很明了是指向数组的指针，而这个数组是由指向整型数据的指针组成的。</h3><h3 id="接下来要讨论的是指针的值，我们说指针中存储的是地址，所以指针的值就是地址的大小。即为指针所指向的数据的起始地址。"><a href="#接下来要讨论的是指针的值，我们说指针中存储的是地址，所以指针的值就是地址的大小。即为指针所指向的数据的起始地址。" class="headerlink" title="接下来要讨论的是指针的值，我们说指针中存储的是地址，所以指针的值就是地址的大小。即为指针所指向的数据的起始地址。"></a>接下来要讨论的是指针的值，我们说指针中存储的是地址，所以指针的值就是地址的大小。即为指针所指向的数据的起始地址。</h3><h3 id="指针本身所占的内存大小也就是说指针这种变量类型的字长，在64位机器-大部分机器-中是八字节。"><a href="#指针本身所占的内存大小也就是说指针这种变量类型的字长，在64位机器-大部分机器-中是八字节。" class="headerlink" title="指针本身所占的内存大小也就是说指针这种变量类型的字长，在64位机器(大部分机器)中是八字节。"></a>指针本身所占的内存大小也就是说指针这种变量类型的字长，在64位机器(大部分机器)中是八字节。</h3><hr>
<h1 id="四、指针的使用："><a href="#四、指针的使用：" class="headerlink" title="四、指针的使用："></a>四、指针的使用：</h1><h2 id="1、首先必须强调的一点是绝对不能对未初始化的指针取值！！！"><a href="#1、首先必须强调的一点是绝对不能对未初始化的指针取值！！！" class="headerlink" title="1、首先必须强调的一点是绝对不能对未初始化的指针取值！！！"></a>1、首先必须强调的一点是绝对不能对未初始化的指针取值！！！</h2><h3 id="形如"><a href="#形如" class="headerlink" title="形如"></a>形如</h3><p><code>int *ptr;  *ptr=5;</code></p>
<h3 id="这样的未初始化的指针我们称之为“野指针”，其危害性极大。第二句表示将数值5存储在指针ptr所指向的地址中，但是因为指针未初始化，所以其值是随机的，我们不知道5会被存到什么位置。也许会存到某个已经有程序数据的地址，这样做的后果是原有的数据会被覆盖，可能导致程序崩溃。"><a href="#这样的未初始化的指针我们称之为“野指针”，其危害性极大。第二句表示将数值5存储在指针ptr所指向的地址中，但是因为指针未初始化，所以其值是随机的，我们不知道5会被存到什么位置。也许会存到某个已经有程序数据的地址，这样做的后果是原有的数据会被覆盖，可能导致程序崩溃。" class="headerlink" title="这样的未初始化的指针我们称之为“野指针”，其危害性极大。第二句表示将数值5存储在指针ptr所指向的地址中，但是因为指针未初始化，所以其值是随机的，我们不知道5会被存到什么位置。也许会存到某个已经有程序数据的地址，这样做的后果是原有的数据会被覆盖，可能导致程序崩溃。"></a>这样的未初始化的指针我们称之为“野指针”，其危害性极大。第二句表示将数值5存储在指针ptr所指向的地址中，但是因为指针未初始化，所以其值是随机的，我们不知道5会被存到什么位置。也许会存到某个已经有程序数据的地址，这样做的后果是原有的数据会被覆盖，可能导致程序崩溃。</h3><h3 id="指针需要初始化的原因在于当创建指针的时候，系统之分配了用来存储指针本身的内存空间。并没有给它分配存储数据的内存空间。因此在使用指针之前，必须给它赋予一个已经分配的内存地址用来存储数据。"><a href="#指针需要初始化的原因在于当创建指针的时候，系统之分配了用来存储指针本身的内存空间。并没有给它分配存储数据的内存空间。因此在使用指针之前，必须给它赋予一个已经分配的内存地址用来存储数据。" class="headerlink" title="指针需要初始化的原因在于当创建指针的时候，系统之分配了用来存储指针本身的内存空间。并没有给它分配存储数据的内存空间。因此在使用指针之前，必须给它赋予一个已经分配的内存地址用来存储数据。"></a>指针需要初始化的原因在于当创建指针的时候，系统之分配了用来存储指针本身的内存空间。并没有给它分配存储数据的内存空间。因此在使用指针之前，必须给它赋予一个已经分配的内存地址用来存储数据。</h3><hr>
<h2 id="2、运算符：-amp-和-（作为单目运算符"><a href="#2、运算符：-amp-和-（作为单目运算符" class="headerlink" title="2、运算符：&amp;和*（作为单目运算符)"></a>2、运算符：&amp;和*（作为单目运算符)</h2><h3 id="amp-即为取址运算符，对一个变量a进行取址运算-amp-a得到的是a的地址，即-amp-a成为了指针变量。"><a href="#amp-即为取址运算符，对一个变量a进行取址运算-amp-a得到的是a的地址，即-amp-a成为了指针变量。" class="headerlink" title="&amp;即为取址运算符，对一个变量a进行取址运算&amp;a得到的是a的地址，即&amp;a成为了指针变量。"></a>&amp;即为取址运算符，对一个变量a进行取址运算&amp;a得到的是a的地址，即&amp;a成为了指针变量。</h3><h3 id="是间接运算符，用来拿到一个指针所指向地址的内容。"><a href="#是间接运算符，用来拿到一个指针所指向地址的内容。" class="headerlink" title="*是间接运算符，用来拿到一个指针所指向地址的内容。"></a>*是间接运算符，用来拿到一个指针所指向地址的内容。</h3><hr>
<h2 id="3、数组与指针及数组的算术运算："><a href="#3、数组与指针及数组的算术运算：" class="headerlink" title="3、数组与指针及数组的算术运算："></a>3、数组与指针及数组的算术运算：</h2><h3 id="数组标记其实是对指针的变相使用。对于数组：data-int-size-，数组名data实际上就是该数组首元素的地址，即数组名就是指向数组起始元素的指针：data-amp-data-0-。"><a href="#数组标记其实是对指针的变相使用。对于数组：data-int-size-，数组名data实际上就是该数组首元素的地址，即数组名就是指向数组起始元素的指针：data-amp-data-0-。" class="headerlink" title="数组标记其实是对指针的变相使用。对于数组：data[int size]，数组名data实际上就是该数组首元素的地址，即数组名就是指向数组起始元素的指针：data = = &amp;data[0]。"></a>数组标记其实是对指针的变相使用。对于数组：data[int size]，数组名data实际上就是该数组首元素的地址，即数组名就是指向数组起始元素的指针：data = = &amp;data[0]。</h3><h3 id="在C语言中，对指针加1的结果是对该指针增加一个存储空间-即sizeof-指针指向的数据类型-。所以对一个数组data-size-来说，-data-1-data-1-。但是对于非数组指针来说，情况就会变得不太一样。"><a href="#在C语言中，对指针加1的结果是对该指针增加一个存储空间-即sizeof-指针指向的数据类型-。所以对一个数组data-size-来说，-data-1-data-1-。但是对于非数组指针来说，情况就会变得不太一样。" class="headerlink" title="在C语言中，对指针加1的结果是对该指针增加一个存储空间(即sizeof((指针指向的数据类型))。所以对一个数组data[size]来说，*(data+1)=data[1]。但是对于非数组指针来说，情况就会变得不太一样。"></a>在C语言中，对指针加1的结果是对该指针增加一个存储空间(即sizeof((指针指向的数据类型))。所以对一个数组data[size]来说，*(data+1)=data[1]。但是对于非数组指针来说，情况就会变得不太一样。</h3><h3 id="举个栗子："><a href="#举个栗子：" class="headerlink" title="举个栗子："></a>举个栗子：</h3><p><img src="https://i.loli.net/2021/01/12/c438mSg9XwWE5hR.png"></p>
<h3 id="思考一下会输出什么？"><a href="#思考一下会输出什么？" class="headerlink" title="思考一下会输出什么？"></a>思考一下会输出什么？</h3><h3 id="我是一道分隔符"><a href="#我是一道分隔符" class="headerlink" title="~~~~~~~~~~~~~~~~我是一道分隔符~~~~~~~~~~~~~~~~"></a>~~~~~~~~~~~~~~~~我是一道分隔符~~~~~~~~~~~~~~~~</h3><h3 id="答案是：J-未知数"><a href="#答案是：J-未知数" class="headerlink" title="答案是：J  未知数"></a>答案是：J  未知数</h3><p><img src="http://img.doutula.com/production/uploads/image/2019/07/08/20190708533814_FlUARy.jpg"></p>
<h3 id="我们来分析一下ptr这个指针-它的类型是char-，所指向的类型是char-，所以当ptr执行递增操作时，指针会增加一个sizeof-char-即指针原来指向的地址-8-数组是一系列连续排列的地址-但是指向数组的指针的地址可并不是连续排列的-而指针的地址-8，谁都不知道会指向哪里。"><a href="#我们来分析一下ptr这个指针-它的类型是char-，所指向的类型是char-，所以当ptr执行递增操作时，指针会增加一个sizeof-char-即指针原来指向的地址-8-数组是一系列连续排列的地址-但是指向数组的指针的地址可并不是连续排列的-而指针的地址-8，谁都不知道会指向哪里。" class="headerlink" title="我们来分析一下ptr这个指针,它的类型是char ** ，所指向的类型是char * ，所以当ptr执行递增操作时，指针会增加一个sizeof(char*)即指针原来指向的地址+8.数组是一系列连续排列的地址,但是指向数组的指针的地址可并不是连续排列的,而指针的地址+8，谁都不知道会指向哪里。"></a>我们来分析一下ptr这个指针,它的类型是char ** ，所指向的类型是char * ，所以当ptr执行递增操作时，指针会增加一个sizeof(char*)即指针原来指向的地址+8.数组是一系列连续排列的地址,但是指向数组的指针的地址可并不是连续排列的,而指针的地址+8，谁都不知道会指向哪里。</h3><hr>
<h2 id="4、指针与多维数组"><a href="#4、指针与多维数组" class="headerlink" title="4、指针与多维数组"></a>4、指针与多维数组</h2><h3 id="假设有声明：int-zippo-4-2"><a href="#假设有声明：int-zippo-4-2" class="headerlink" title="假设有声明：int zippo[4][2]"></a>假设有声明：<code>int zippo[4][2]</code></h3><h3 id="那么有这么几个概念：zippo-zippo-0-zippo-0-0"><a href="#那么有这么几个概念：zippo-zippo-0-zippo-0-0" class="headerlink" title="那么有这么几个概念：zippo,zippo[0],zippo[0][0]"></a>那么有这么几个概念：zippo,zippo[0],zippo[0][0]</h3><h3 id="zippo是数组首元素地址，所以zippo-amp-zippo-0-。"><a href="#zippo是数组首元素地址，所以zippo-amp-zippo-0-。" class="headerlink" title="zippo是数组首元素地址，所以zippo=&amp;zippo[0]。"></a>zippo是数组首元素地址，所以zippo=&amp;zippo[0]。</h3><h3 id="而zippo-0-是包含两个整数的数组名，所以zippo-0-amp-zippo-0-0-。"><a href="#而zippo-0-是包含两个整数的数组名，所以zippo-0-amp-zippo-0-0-。" class="headerlink" title="而zippo[0]是包含两个整数的数组名，所以zippo[0]=&amp;zippo[0][0]。"></a>而zippo[0]是包含两个整数的数组名，所以zippo[0]=&amp;zippo[0][0]。</h3><h3 id="因为整数和两个整数组成的数组开始的地址相同，所以zippo-zippo-0-，两者数值一致。"><a href="#因为整数和两个整数组成的数组开始的地址相同，所以zippo-zippo-0-，两者数值一致。" class="headerlink" title="因为整数和两个整数组成的数组开始的地址相同，所以zippo=zippo[0]，两者数值一致。"></a>因为整数和两个整数组成的数组开始的地址相同，所以zippo=zippo[0]，两者数值一致。</h3><h3 id="那么来判断一下zippo-1-zippo-0-1这句代码的正确性"><a href="#那么来判断一下zippo-1-zippo-0-1这句代码的正确性" class="headerlink" title="那么来判断一下zippo+1==zippo[0]+1这句代码的正确性"></a>那么来判断一下<code>zippo+1==zippo[0]+1</code>这句代码的正确性</h3><h3 id="答案是否定的。zippo指向的是一个由两个整数组成的数组，zippo-0-指向的是一个整数，所以zippo-1是原值-8-2-4-，而zippo-0-1则是原值-4"><a href="#答案是否定的。zippo指向的是一个由两个整数组成的数组，zippo-0-指向的是一个整数，所以zippo-1是原值-8-2-4-，而zippo-0-1则是原值-4" class="headerlink" title="答案是否定的。zippo指向的是一个由两个整数组成的数组，zippo[0]指向的是一个整数，所以zippo+1是原值+8(2*4)，而zippo[0]+1则是原值+4"></a>答案是否定的。zippo指向的是一个由两个整数组成的数组，zippo[0]指向的是一个整数，所以<code>zippo+1</code>是原值+8(2*4)，而<code>zippo[0]+1</code>则是原值+4</h3><h3 id="当用指针符号表示时，"><a href="#当用指针符号表示时，" class="headerlink" title="当用指针符号表示时，"></a>当用指针符号表示时，</h3><h3 id="zippo-zippo-0"><a href="#zippo-zippo-0" class="headerlink" title="zippo==zippo[0]"></a><code>zippo==zippo[0]</code></h3><h3 id="zippo-zippo-0-amp-zippo-0-0"><a href="#zippo-zippo-0-amp-zippo-0-0" class="headerlink" title="*zippo==zippo[0]==&amp;zippo[0][0]"></a><code>*zippo==zippo[0]==&amp;zippo[0][0]</code></h3><h3 id="zippo-zippo-0-zippo-0-0"><a href="#zippo-zippo-0-zippo-0-0" class="headerlink" title="**zippo==*zippo[0]==zippo[0][0]"></a><code>**zippo==*zippo[0]==zippo[0][0]</code></h3><h3 id="zippo-2-1-zippo-2-1"><a href="#zippo-2-1-zippo-2-1" class="headerlink" title="zippo[2][1]==*(*(zippo+2)+1)"></a><code>zippo[2][1]==*(*(zippo+2)+1)</code></h3><h3 id="对于最后一行等式，如果不理解可以看这里："><a href="#对于最后一行等式，如果不理解可以看这里：" class="headerlink" title="对于最后一行等式，如果不理解可以看这里："></a>对于最后一行等式，如果不理解可以看这里：</h3><table>
  <tr>
      <td>zippo</td>
      <td>第一个一维数组的首元素地址</td>
  </tr>
  <tr>
      <td>zippo+2</td>
      <td>第三个一维数组的首元素地址</td>
  </tr>
 <tr>
      <td>*(zippo+2)</td>
      <td>第三个一维数组的首元素地址,和zippo+2的区别在于类型转变了</td>
  </tr>
 <tr>
      <td>*(zippo+2)+1</td>
      <td>第三个一维数组的第二个元素的地址</td>
  </tr>
 <tr>
      <td>*(*(zippo+2)+1)</td>
      <td>第三个一维数组的第二个元素的值</td>
  </tr>
</table>
***

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/12/%E6%8C%87%E9%92%88%E9%83%A8%E5%88%86%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%8A%EF%BC%89/" data-id="ckli716sr00013sv0fxdc0a4o" data-title="指针的部分总结（上）" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/12/%E5%BD%A2%E5%BC%8F%E8%AF%AD%E8%A8%80%E4%B8%8E%E8%87%AA%E5%8A%A8%E6%9C%BA%E5%AE%9E%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/07/JAVA/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/03/%E8%AE%A1%E7%BD%91%E8%AF%BE%E8%AE%BE%E6%96%87%E6%A1%A3/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/02/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>